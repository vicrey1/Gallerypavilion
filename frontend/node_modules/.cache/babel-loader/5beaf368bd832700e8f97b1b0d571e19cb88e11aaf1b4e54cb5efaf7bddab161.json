{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/Desktop/Gallerypavilion/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from'react';import{useParams,useNavigate,useSearchParams}from'react-router-dom';import{motion,AnimatePresence}from'framer-motion';import axios from'axios';import{ArrowLeft,Camera,Calendar,MapPin,Info,Mail,ShoppingCart,Sun,Moon,Heart,Share2,Download,Eye,Palette,Award,Edit3}from'lucide-react';import{useAuth}from'../contexts/AuthContext';import PhotoEditForm from'../components/PhotoEditForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const prefersDark=()=>window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;const PhotoDetailPage=()=>{var _photo$metadata4,_photo$metadata4$purc,_photo$metadata5,_photo$metadata6,_photo$artwork,_photo$artwork2,_photo$artwork3,_photo$artwork4,_photo$artwork5,_photo$artwork6,_photo$artwork7,_photo$artwork8,_photo$artwork9,_photo$artwork0,_photo$artwork1,_photo$metadata7,_photo$metadata8,_photo$metadata9,_photo$artwork10,_gallery$photographer3,_photo$artist;const{token,photoId}=useParams();const[searchParams]=useSearchParams();const navigate=useNavigate();const{user,isAuthenticated}=useAuth();const[photo,setPhoto]=useState(null);const[gallery,setGallery]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isEditing,setIsEditing]=useState(false);const[activeTab,setActiveTab]=useState('about');// Theme: default to system\nconst[theme,setTheme]=useState(prefersDark()?'dark':'light');// Apply theme to document\nuseEffect(()=>{if(theme==='dark'){document.documentElement.classList.add('dark');}else{document.documentElement.classList.remove('dark');}},[theme]);useEffect(()=>{const mq=window.matchMedia('(prefers-color-scheme: dark)');const handler=e=>setTheme(e.matches?'dark':'light');mq.addEventListener('change',handler);return()=>mq.removeEventListener('change',handler);},[]);const toggleTheme=()=>setTheme(t=>t==='dark'?'light':'dark');// Check if current user is the photographer\nconst isPhotographer=isAuthenticated&&user&&(photo===null||photo===void 0?void 0:photo.photographer)&&(user.id===photo.photographer._id||user.id===photo.photographer);useEffect(()=>{const fetchData=async()=>{try{setLoading(true);setError(null);// We can fetch photo by id; the backend allows optional auth and public access if permitted\nconst params={};// If there was a password or invite on gallery, propagate via query if present\nconst password=searchParams.get('password');const invite=searchParams.get('invite');if(password)params.password=password;if(invite)params.invite=invite;// Fetch the shared gallery to get photographer contact and photos\nconst galleryResp=await axios.get(\"/share/\".concat(token),{params});const g=galleryResp.data.gallery||galleryResp.data;const respPhotographer=galleryResp.data.photographer||(g===null||g===void 0?void 0:g.photographer);const photos=galleryResp.data.photos||[];const normalizedPhotographer=respPhotographer&&typeof respPhotographer==='object'?_objectSpread(_objectSpread({},respPhotographer),{},{name:respPhotographer.name||\"\".concat(respPhotographer.firstName||'',\" \").concat(respPhotographer.lastName||'').trim(),email:respPhotographer.email||respPhotographer.clientEmail||undefined}):respPhotographer||undefined;const normalizedGallery=_objectSpread(_objectSpread({},g),{},{photographer:normalizedPhotographer||(typeof(g===null||g===void 0?void 0:g.photographer)==='object'?_objectSpread(_objectSpread({},g.photographer),{},{name:g.photographer.name||\"\".concat(g.photographer.firstName||'',\" \").concat(g.photographer.lastName||'').trim()}):g===null||g===void 0?void 0:g.photographer)});setGallery(normalizedGallery);// Find the specific photo from the shared gallery photos\nconst specificPhoto=photos.find(p=>p._id===photoId);if(!specificPhoto){throw new Error('Photo not found in this gallery');}setPhoto(specificPhoto);// Check if current user is the photographer is now handled by computed value below\n}catch(err){var _err$response,_err$response$data;console.error('Failed to load photo detail',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to load photo details');}finally{setLoading(false);}};fetchData();},[token,photoId,searchParams]);const handleSavePhoto=async updatedData=>{try{const authToken=localStorage.getItem('token');if(!authToken){throw new Error('Authentication required');}const response=await axios.put(\"/api/photos/\".concat(photoId),updatedData,{headers:{Authorization:\"Bearer \".concat(authToken),'Content-Type':'application/json'}});// Update the local photo state\nsetPhoto(response.data);setIsEditing(false);// Show success message (you can add a toast notification here)\nconsole.log('Photo updated successfully');}catch(error){console.error('Error updating photo:',error);throw error;}};const photographerEmail=useMemo(()=>{var _gallery$photographer,_gallery$photographer2,_photo$photographer,_photo$photographer2,_photo$gallery,_photo$gallery$photog,_photo$gallery2,_photo$gallery2$photo;const fromGallery=(gallery===null||gallery===void 0?void 0:(_gallery$photographer=gallery.photographer)===null||_gallery$photographer===void 0?void 0:_gallery$photographer.email)||(gallery===null||gallery===void 0?void 0:(_gallery$photographer2=gallery.photographer)===null||_gallery$photographer2===void 0?void 0:_gallery$photographer2.clientEmail);const fromPhoto=(photo===null||photo===void 0?void 0:(_photo$photographer=photo.photographer)===null||_photo$photographer===void 0?void 0:_photo$photographer.email)||(photo===null||photo===void 0?void 0:(_photo$photographer2=photo.photographer)===null||_photo$photographer2===void 0?void 0:_photo$photographer2.clientEmail);const fromPhotoGallery=(photo===null||photo===void 0?void 0:(_photo$gallery=photo.gallery)===null||_photo$gallery===void 0?void 0:(_photo$gallery$photog=_photo$gallery.photographer)===null||_photo$gallery$photog===void 0?void 0:_photo$gallery$photog.email)||(photo===null||photo===void 0?void 0:(_photo$gallery2=photo.gallery)===null||_photo$gallery2===void 0?void 0:(_photo$gallery2$photo=_photo$gallery2.photographer)===null||_photo$gallery2$photo===void 0?void 0:_photo$gallery2$photo.clientEmail);return fromGallery||fromPhoto||fromPhotoGallery||'';},[gallery,photo]);const handleInquiry=()=>{var _photo$metadata,_photo$metadata2,_photo$metadata2$purc;if(!photo)return;if(!photographerEmail){alert('Photographer email not available yet. Please try again later or contact the gallery owner.');return;}const subject=\"Inquiry about \\\"\".concat(photo.title||'Artwork',\"\\\"\");const body=\"Hi,\\n\\nI'm interested in learning more about the artwork \\\"\".concat(photo.title||'this piece',\"\\\"\").concat((_photo$metadata=photo.metadata)!==null&&_photo$metadata!==void 0&&_photo$metadata.artworkInfo?\" (\".concat(photo.metadata.artworkInfo.medium).concat(photo.metadata.artworkInfo.year?\", \".concat(photo.metadata.artworkInfo.year):'',\")\"):'',\".\\n\\n\").concat((_photo$metadata2=photo.metadata)!==null&&_photo$metadata2!==void 0&&(_photo$metadata2$purc=_photo$metadata2.purchaseInfo)!==null&&_photo$metadata2$purc!==void 0&&_photo$metadata2$purc.price?\"Listed price: $\".concat(photo.metadata.purchaseInfo.price.toLocaleString(),\"\\n\\n\"):'',\"Please provide more information about availability, pricing, and shipping.\\n\\nThank you!\");const mailtoLink=\"mailto:\".concat(encodeURIComponent(photographerEmail),\"?subject=\").concat(encodeURIComponent(subject),\"&body=\").concat(encodeURIComponent(body));window.open(mailtoLink,'_blank');};const handlePurchase=()=>{var _photo$metadata3,_photo$metadata3$purc;if(!photo)return;if(!photographerEmail){alert('Photographer email not available yet. Please try again later or contact the gallery owner.');return;}const subject=\"Purchase request for \\\"\".concat(photo.title||'Artwork',\"\\\"\");const body=\"Hello,\\n\\nI would like to purchase \\\"\".concat(photo.title||'this artwork',\"\\\".\").concat((_photo$metadata3=photo.metadata)!==null&&_photo$metadata3!==void 0&&(_photo$metadata3$purc=_photo$metadata3.purchaseInfo)!==null&&_photo$metadata3$purc!==void 0&&_photo$metadata3$purc.price?\"\\n\\nPrice understood: $\".concat(photo.metadata.purchaseInfo.price.toLocaleString()):'',\"\\n\\nPlease let me know the next steps for payment and delivery.\\n\\nBest regards,\");const mailtoLink=\"mailto:\".concat(encodeURIComponent(photographerEmail),\"?subject=\").concat(encodeURIComponent(subject),\"&body=\").concat(encodeURIComponent(body));window.open(mailtoLink,'_blank');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-neutral-100 dark:bg-black text-neutral-800 dark:text-neutral-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin h-10 w-10 border-4 border-neutral-300 border-t-transparent rounded-full\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex flex-col items-center justify-center gap-4 bg-neutral-100 dark:bg-black text-neutral-800 dark:text-neutral-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"px-4 py-2 rounded-md bg-neutral-900 text-white dark:bg-white dark:text-black\",children:\"Go Back\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen \".concat(theme==='dark'?'dark':'',\" bg-gradient-to-br from-white via-neutral-50 to-neutral-100 dark:from-black dark:via-neutral-950 dark:to-neutral-900 text-neutral-900 dark:text-neutral-50 relative overflow-hidden\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 overflow-hidden pointer-events-none\",children:[/*#__PURE__*/_jsx(motion.div,{className:\"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-purple-600/10 rounded-full blur-3xl\",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:Infinity,ease:\"linear\"}}),/*#__PURE__*/_jsx(motion.div,{className:\"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-emerald-400/10 to-cyan-600/10 rounded-full blur-3xl\",animate:{scale:[1.2,1,1.2],rotate:[360,180,0]},transition:{duration:25,repeat:Infinity,ease:\"linear\"}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8 relative z-10\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:0.6},className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(\"/gallery/\".concat(token)),className:\"group inline-flex items-center gap-3 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:18,className:\"group-hover:-translate-x-1 transition-transform duration-300\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Back to Gallery\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[isPhotographer&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsEditing(true),className:\"inline-flex items-center gap-2 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\",children:[/*#__PURE__*/_jsx(Edit3,{size:16}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Edit\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"p-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\",children:/*#__PURE__*/_jsx(Share2,{size:18})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setTheme(theme==='dark'?'light':'dark'),className:\"inline-flex items-center gap-2 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\",children:[theme==='dark'?/*#__PURE__*/_jsx(Sun,{size:16}):/*#__PURE__*/_jsx(Moon,{size:16}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:theme==='dark'?'Light':'Dark'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto space-y-8\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:0.8,ease:\"easeOut\"},className:\"group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative rounded-3xl overflow-hidden shadow-2xl ring-1 ring-black/5 dark:ring-white/10 bg-gradient-to-br from-white to-neutral-50 dark:from-neutral-950 dark:to-black\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative overflow-hidden\",children:[/*#__PURE__*/_jsx(motion.img,{src:photo.url||photo.previewUrl||photo.thumbnailUrl,alt:photo.title||'Photo',className:\"w-full h-auto object-contain transition-transform duration-700 group-hover:scale-105\",whileHover:{scale:1.02},transition:{duration:0.3}}),/*#__PURE__*/_jsx(motion.div,{className:\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\",initial:{opacity:0},whileHover:{opacity:1},children:/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-6 left-6 right-6 flex justify-between items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:0.95},className:\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\",children:/*#__PURE__*/_jsx(Eye,{size:20})}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:0.95},className:\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\",children:/*#__PURE__*/_jsx(Heart,{size:20})})]}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:0.95},className:\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\",children:/*#__PURE__*/_jsx(Download,{size:20})})]})})]}),((_photo$metadata4=photo.metadata)===null||_photo$metadata4===void 0?void 0:(_photo$metadata4$purc=_photo$metadata4.purchaseInfo)===null||_photo$metadata4$purc===void 0?void 0:_photo$metadata4$purc.price)&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},transition:{delay:0.5},className:\"absolute top-6 right-6 px-4 py-2 rounded-full bg-gradient-to-r from-amber-400 to-orange-500 text-white text-sm font-semibold shadow-lg backdrop-blur-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Award,{size:16}),\"Premium\"]})]})}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:0.8,delay:0.2,ease:\"easeOut\"},className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.4},children:[/*#__PURE__*/_jsx(motion.h1,{className:\"text-4xl lg:text-5xl font-bold tracking-tight bg-gradient-to-r from-neutral-900 to-neutral-600 dark:from-neutral-100 dark:to-neutral-400 bg-clip-text text-transparent mb-4\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.5},children:photo.title||'Untitled'}),((_photo$metadata5=photo.metadata)===null||_photo$metadata5===void 0?void 0:_photo$metadata5.description)&&/*#__PURE__*/_jsx(motion.p,{className:\"text-lg text-neutral-600 dark:text-neutral-300 leading-relaxed font-light\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.6},children:photo.metadata.description})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:0.7},className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-neutral-200 dark:border-neutral-700\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex space-x-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('about'),className:\"py-2 px-1 border-b-2 font-medium text-sm transition-colors \".concat(activeTab==='about'?'border-black dark:border-white text-neutral-900 dark:text-neutral-100':'border-transparent text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300'),children:\"About the work\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('provenance'),className:\"py-2 px-1 border-b-2 font-medium text-sm transition-colors \".concat(activeTab==='provenance'?'border-black dark:border-white text-neutral-900 dark:text-neutral-100':'border-transparent text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300'),children:\"Provenance\"})]})}),/*#__PURE__*/_jsxs(AnimatePresence,{mode:\"wait\",children:[activeTab==='about'&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.3},className:\"space-y-6\",children:[((_photo$metadata6=photo.metadata)===null||_photo$metadata6===void 0?void 0:_photo$metadata6.description)&&/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-neutral dark:prose-invert max-w-none\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-700 dark:text-neutral-300 leading-relaxed\",children:photo.metadata.description})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[((_photo$artwork=photo.artwork)===null||_photo$artwork===void 0?void 0:_photo$artwork.materials)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Materials\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.artwork.materials})]}),((_photo$artwork2=photo.artwork)===null||_photo$artwork2===void 0?void 0:_photo$artwork2.dimensions)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Size\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.artwork.dimensions})]}),((_photo$artwork3=photo.artwork)===null||_photo$artwork3===void 0?void 0:_photo$artwork3.edition)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Edition\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.artwork.edition})]}),((_photo$artwork4=photo.artwork)===null||_photo$artwork4===void 0?void 0:_photo$artwork4.rarity)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Rarity\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.artwork.rarity})]}),((_photo$artwork5=photo.artwork)===null||_photo$artwork5===void 0?void 0:_photo$artwork5.medium)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.artwork.medium})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[((_photo$artwork6=photo.artwork)===null||_photo$artwork6===void 0?void 0:_photo$artwork6.condition)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Condition\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.artwork.condition})]}),((_photo$artwork7=photo.artwork)===null||_photo$artwork7===void 0?void 0:_photo$artwork7.signature)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Signature\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.artwork.signature})]}),((_photo$artwork8=photo.artwork)===null||_photo$artwork8===void 0?void 0:_photo$artwork8.certificate)!==undefined&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Certificate of authenticity\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.artwork.certificate?'Included':'Not included'})]}),((_photo$artwork9=photo.artwork)===null||_photo$artwork9===void 0?void 0:_photo$artwork9.frame)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Frame\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.artwork.frame})]}),((_photo$artwork0=photo.artwork)===null||_photo$artwork0===void 0?void 0:_photo$artwork0.series)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Series\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.artwork.series})]})]})]})]},\"about\"),activeTab==='provenance'&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:0.3},className:\"space-y-6\",children:(_photo$artwork1=photo.artwork)!==null&&_photo$artwork1!==void 0&&_photo$artwork1.provenance?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-neutral-900 dark:text-neutral-100 mb-4\",children:\"Provenance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-neutral dark:prose-invert max-w-none\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-700 dark:text-neutral-300 leading-relaxed\",children:photo.artwork.provenance})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-neutral-500 dark:text-neutral-400\",children:\"No provenance information available\"})})},\"provenance\")]})]}),((_photo$metadata7=photo.metadata)===null||_photo$metadata7===void 0?void 0:_photo$metadata7.exif)&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:0.8},className:\"rounded-2xl bg-gradient-to-br from-white/90 to-white/70 dark:from-neutral-900/90 dark:to-neutral-900/60 backdrop-blur-xl ring-1 ring-black/5 dark:ring-white/10 p-6 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 text-white\",children:/*#__PURE__*/_jsx(Camera,{size:18})}),\"Technical Details\"]}),((_photo$metadata8=photo.metadata)===null||_photo$metadata8===void 0?void 0:_photo$metadata8.exif)&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:0.9},className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 text-white\",children:/*#__PURE__*/_jsx(Camera,{size:18})}),\"Technical Details\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-2 pl-12\",children:[photo.metadata.exif.cameraModel&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-2 border-b border-neutral-200/50 dark:border-neutral-700/50\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-600 dark:text-neutral-400 font-medium\",children:\"Camera\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-900 dark:text-neutral-100 font-semibold\",children:photo.metadata.exif.cameraModel})]}),photo.metadata.exif.lensModel&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-2 border-b border-neutral-200/50 dark:border-neutral-700/50\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-600 dark:text-neutral-400 font-medium\",children:\"Lens\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-900 dark:text-neutral-100 font-semibold\",children:photo.metadata.exif.lensModel})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[photo.metadata.exif.fNumber&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\",children:\"Aperture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-neutral-900 dark:text-neutral-100\",children:[\"f/\",photo.metadata.exif.fNumber]})]}),photo.metadata.exif.exposureTime&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\",children:\"Shutter\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-neutral-900 dark:text-neutral-100\",children:[photo.metadata.exif.exposureTime,\"s\"]})]}),photo.metadata.exif.iso&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\",children:\"ISO\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-bold text-neutral-900 dark:text-neutral-100\",children:photo.metadata.exif.iso})]}),photo.metadata.exif.focalLength&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\",children:\"Focal\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-neutral-900 dark:text-neutral-100\",children:[photo.metadata.exif.focalLength,\"mm\"]})]})]})]})]}),((_photo$metadata9=photo.metadata)===null||_photo$metadata9===void 0?void 0:_photo$metadata9.location)&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1.0},className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 text-white\",children:/*#__PURE__*/_jsx(MapPin,{size:18})}),\"Location\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-700 dark:text-neutral-300 pl-12 font-medium\",children:photo.metadata.location})]})]})}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.1},className:\"space-y-6\",children:[((_photo$artwork10=photo.artwork)===null||_photo$artwork10===void 0?void 0:_photo$artwork10.price)&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.9},animate:{opacity:1,scale:1},transition:{delay:1.2},className:\"text-center p-6 rounded-2xl bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200/50 dark:border-amber-700/50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-amber-600 dark:text-amber-400 font-medium uppercase tracking-wide mb-2\",children:photo.artwork.isForSale?'Price':'Estimated Value'}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-4xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent\",children:[photo.artwork.currency||'$',parseFloat(photo.artwork.price).toLocaleString()]}),photo.artwork.isForSale&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-emerald-600 dark:text-emerald-400 font-medium mt-2\",children:\"Available for Purchase\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(motion.button,{onClick:handleInquiry,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1.3},whileHover:{scale:1.05,y:-2},whileTap:{scale:0.95},className:\"group relative px-6 py-4 rounded-2xl bg-gradient-to-r from-neutral-900 to-neutral-700 dark:from-white dark:to-neutral-200 text-white dark:text-black font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-r from-neutral-700 to-neutral-900 dark:from-neutral-200 dark:to-white opacity-0 group-hover:opacity-100 transition-opacity duration-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Mail,{size:18,className:\"group-hover:rotate-12 transition-transform duration-300\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Inquiry\"})]})]}),/*#__PURE__*/_jsxs(motion.button,{onClick:handlePurchase,initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:1.4},whileHover:{scale:1.05,y:-2},whileTap:{scale:0.95},className:\"group relative px-6 py-4 rounded-2xl bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-r from-emerald-500 to-teal-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(ShoppingCart,{size:18,className:\"group-hover:scale-110 transition-transform duration-300\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Purchase\"})]})]})]})]}),(gallery===null||gallery===void 0?void 0:(_gallery$photographer3=gallery.photographer)===null||_gallery$photographer3===void 0?void 0:_gallery$photographer3.name)&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.5},className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 pb-4 border-b border-neutral-200 dark:border-neutral-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-full bg-gradient-to-br from-neutral-200 to-neutral-300 dark:from-neutral-700 dark:to-neutral-800 flex items-center justify-center text-2xl font-bold text-neutral-600 dark:text-neutral-300\",children:gallery.photographer.name.charAt(0)}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-neutral-900 dark:text-neutral-100\",children:gallery.photographer.name})})]}),((_photo$artist=photo.artist)===null||_photo$artist===void 0?void 0:_photo$artist.biography)&&/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-neutral dark:prose-invert max-w-none\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-700 dark:text-neutral-300 leading-relaxed whitespace-pre-line\",children:photo.artist.biography})}),gallery.photographer.email&&/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 border-t border-neutral-200 dark:border-neutral-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Contact\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-neutral-600 dark:text-neutral-400\",children:gallery.photographer.email})]})]})]})]})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:isEditing&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\",onClick:()=>setIsEditing(false),children:/*#__PURE__*/_jsx(motion.div,{initial:{scale:0.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0.95,opacity:0},onClick:e=>e.stopPropagation(),className:\"bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsx(PhotoEditForm,{photo:photo,onSave:handleSavePhoto,onCancel:()=>setIsEditing(false)})})})})]});};export default PhotoDetailPage;","map":{"version":3,"names":["React","useEffect","useMemo","useState","useParams","useNavigate","useSearchParams","motion","AnimatePresence","axios","ArrowLeft","Camera","Calendar","MapPin","Info","Mail","ShoppingCart","Sun","Moon","Heart","Share2","Download","Eye","Palette","Award","Edit3","useAuth","PhotoEditForm","jsx","_jsx","jsxs","_jsxs","prefersDark","window","matchMedia","matches","PhotoDetailPage","_photo$metadata4","_photo$metadata4$purc","_photo$metadata5","_photo$metadata6","_photo$artwork","_photo$artwork2","_photo$artwork3","_photo$artwork4","_photo$artwork5","_photo$artwork6","_photo$artwork7","_photo$artwork8","_photo$artwork9","_photo$artwork0","_photo$artwork1","_photo$metadata7","_photo$metadata8","_photo$metadata9","_photo$artwork10","_gallery$photographer3","_photo$artist","token","photoId","searchParams","navigate","user","isAuthenticated","photo","setPhoto","gallery","setGallery","loading","setLoading","error","setError","isEditing","setIsEditing","activeTab","setActiveTab","theme","setTheme","document","documentElement","classList","add","remove","mq","handler","e","addEventListener","removeEventListener","toggleTheme","t","isPhotographer","photographer","id","_id","fetchData","params","password","get","invite","galleryResp","concat","g","data","respPhotographer","photos","normalizedPhotographer","_objectSpread","name","firstName","lastName","trim","email","clientEmail","undefined","normalizedGallery","specificPhoto","find","p","Error","err","_err$response","_err$response$data","console","response","message","handleSavePhoto","updatedData","authToken","localStorage","getItem","put","headers","Authorization","log","photographerEmail","_gallery$photographer","_gallery$photographer2","_photo$photographer","_photo$photographer2","_photo$gallery","_photo$gallery$photog","_photo$gallery2","_photo$gallery2$photo","fromGallery","fromPhoto","fromPhotoGallery","handleInquiry","_photo$metadata","_photo$metadata2","_photo$metadata2$purc","alert","subject","title","body","metadata","artworkInfo","medium","year","purchaseInfo","price","toLocaleString","mailtoLink","encodeURIComponent","open","handlePurchase","_photo$metadata3","_photo$metadata3$purc","className","children","onClick","div","animate","scale","rotate","transition","duration","repeat","Infinity","ease","initial","opacity","y","size","img","src","url","previewUrl","thumbnailUrl","alt","whileHover","button","whileTap","delay","h1","description","mode","exit","artwork","materials","dimensions","edition","rarity","condition","signature","certificate","frame","series","provenance","exif","x","cameraModel","lensModel","fNumber","exposureTime","iso","focalLength","location","isForSale","currency","parseFloat","charAt","artist","biography","stopPropagation","onSave","onCancel"],"sources":["C:/Users/USER/Desktop/Gallerypavilion/frontend/src/pages/PhotoDetailPage.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport axios from 'axios';\nimport { ArrowLeft, Camera, Calendar, MapPin, Info, Mail, ShoppingCart, Sun, Moon, Heart, Share2, Download, Eye, Palette, Award, Edit3 } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\nimport PhotoEditForm from '../components/PhotoEditForm';\n\nconst prefersDark = () => window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n\nconst PhotoDetailPage = () => {\n  const { token, photoId } = useParams();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const { user, isAuthenticated } = useAuth();\n\n  const [photo, setPhoto] = useState(null);\n  const [gallery, setGallery] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [activeTab, setActiveTab] = useState('about');\n\n  // Theme: default to system\n  const [theme, setTheme] = useState(prefersDark() ? 'dark' : 'light');\n  \n  // Apply theme to document\n  useEffect(() => {\n    if (theme === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [theme]);\n  \n  useEffect(() => {\n    const mq = window.matchMedia('(prefers-color-scheme: dark)');\n    const handler = (e) => setTheme(e.matches ? 'dark' : 'light');\n    mq.addEventListener('change', handler);\n    return () => mq.removeEventListener('change', handler);\n  }, []);\n\n  const toggleTheme = () => setTheme((t) => (t === 'dark' ? 'light' : 'dark'));\n\n  // Check if current user is the photographer\n  const isPhotographer = isAuthenticated && user && photo?.photographer && \n    (user.id === photo.photographer._id || user.id === photo.photographer);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        // We can fetch photo by id; the backend allows optional auth and public access if permitted\n        const params = {};\n        // If there was a password or invite on gallery, propagate via query if present\n        const password = searchParams.get('password');\n        const invite = searchParams.get('invite');\n        if (password) params.password = password;\n        if (invite) params.invite = invite;\n\n        // Fetch the shared gallery to get photographer contact and photos\n        const galleryResp = await axios.get(`/share/${token}`, { params });\n        const g = galleryResp.data.gallery || galleryResp.data;\n        const respPhotographer = galleryResp.data.photographer || g?.photographer;\n        const photos = galleryResp.data.photos || [];\n        \n        const normalizedPhotographer = respPhotographer && typeof respPhotographer === 'object'\n          ? {\n              ...respPhotographer,\n              name: respPhotographer.name || `${respPhotographer.firstName || ''} ${respPhotographer.lastName || ''}`.trim(),\n              email: respPhotographer.email || respPhotographer.clientEmail || undefined,\n            }\n          : respPhotographer || undefined;\n        const normalizedGallery = {\n          ...g,\n          photographer: normalizedPhotographer || (typeof g?.photographer === 'object'\n            ? {\n                ...g.photographer,\n                name: g.photographer.name || `${g.photographer.firstName || ''} ${g.photographer.lastName || ''}`.trim(),\n              }\n            : g?.photographer),\n        };\n        setGallery(normalizedGallery);\n\n        // Find the specific photo from the shared gallery photos\n        const specificPhoto = photos.find(p => p._id === photoId);\n        if (!specificPhoto) {\n          throw new Error('Photo not found in this gallery');\n        }\n        setPhoto(specificPhoto);\n\n        // Check if current user is the photographer is now handled by computed value below\n      } catch (err) {\n        console.error('Failed to load photo detail', err);\n        setError(err.response?.data?.message || 'Failed to load photo details');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [token, photoId, searchParams]);\n\n  const handleSavePhoto = async (updatedData) => {\n    try {\n      const authToken = localStorage.getItem('token');\n      if (!authToken) {\n        throw new Error('Authentication required');\n      }\n\n      const response = await axios.put(\n        `/api/photos/${photoId}`,\n        updatedData,\n        {\n          headers: {\n            Authorization: `Bearer ${authToken}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n\n      // Update the local photo state\n      setPhoto(response.data);\n      setIsEditing(false);\n      \n      // Show success message (you can add a toast notification here)\n      console.log('Photo updated successfully');\n    } catch (error) {\n      console.error('Error updating photo:', error);\n      throw error;\n    }\n  };\n\n  const photographerEmail = useMemo(() => {\n    const fromGallery = gallery?.photographer?.email || gallery?.photographer?.clientEmail;\n    const fromPhoto = photo?.photographer?.email || photo?.photographer?.clientEmail;\n    const fromPhotoGallery = photo?.gallery?.photographer?.email || photo?.gallery?.photographer?.clientEmail;\n    return fromGallery || fromPhoto || fromPhotoGallery || '';\n  }, [gallery, photo]);\n\n  const handleInquiry = () => {\n    if (!photo) return;\n    if (!photographerEmail) {\n      alert('Photographer email not available yet. Please try again later or contact the gallery owner.');\n      return;\n    }\n    const subject = `Inquiry about \\\"${photo.title || 'Artwork'}\\\"`;\n    const body = `Hi,\\n\\nI'm interested in learning more about the artwork \\\"${photo.title || 'this piece'}\\\"${photo.metadata?.artworkInfo ? ` (${photo.metadata.artworkInfo.medium}${photo.metadata.artworkInfo.year ? `, ${photo.metadata.artworkInfo.year}` : ''})` : ''}.\\n\\n${photo.metadata?.purchaseInfo?.price ? `Listed price: $${photo.metadata.purchaseInfo.price.toLocaleString()}\\n\\n` : ''}Please provide more information about availability, pricing, and shipping.\\n\\nThank you!`;\n    const mailtoLink = `mailto:${encodeURIComponent(photographerEmail)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n    window.open(mailtoLink, '_blank');\n  };\n\n  const handlePurchase = () => {\n    if (!photo) return;\n    if (!photographerEmail) {\n      alert('Photographer email not available yet. Please try again later or contact the gallery owner.');\n      return;\n    }\n    const subject = `Purchase request for \\\"${photo.title || 'Artwork'}\\\"`;\n    const body = `Hello,\\n\\nI would like to purchase \\\"${photo.title || 'this artwork'}\\\".${photo.metadata?.purchaseInfo?.price ? `\\n\\nPrice understood: $${photo.metadata.purchaseInfo.price.toLocaleString()}` : ''}\\n\\nPlease let me know the next steps for payment and delivery.\\n\\nBest regards,`;\n    const mailtoLink = `mailto:${encodeURIComponent(photographerEmail)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n    window.open(mailtoLink, '_blank');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-neutral-100 dark:bg-black text-neutral-800 dark:text-neutral-100\">\n        <div className=\"animate-spin h-10 w-10 border-4 border-neutral-300 border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center gap-4 bg-neutral-100 dark:bg-black text-neutral-800 dark:text-neutral-100\">\n        <p className=\"text-lg\">{error}</p>\n        <button onClick={() => navigate(-1)} className=\"px-4 py-2 rounded-md bg-neutral-900 text-white dark:bg-white dark:text-black\">Go Back</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`min-h-screen ${theme === 'dark' ? 'dark' : ''} bg-gradient-to-br from-white via-neutral-50 to-neutral-100 dark:from-black dark:via-neutral-950 dark:to-neutral-900 text-neutral-900 dark:text-neutral-50 relative overflow-hidden`}>\n      {/* Animated background elements */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        <motion.div \n          className=\"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-purple-600/10 rounded-full blur-3xl\"\n          animate={{ \n            scale: [1, 1.2, 1],\n            rotate: [0, 180, 360],\n          }}\n          transition={{ \n            duration: 20,\n            repeat: Infinity,\n            ease: \"linear\"\n          }}\n        />\n        <motion.div \n          className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-emerald-400/10 to-cyan-600/10 rounded-full blur-3xl\"\n          animate={{ \n            scale: [1.2, 1, 1.2],\n            rotate: [360, 180, 0],\n          }}\n          transition={{ \n            duration: 25,\n            repeat: Infinity,\n            ease: \"linear\"\n          }}\n        />\n      </div>\n      \n      <div className=\"max-w-7xl mx-auto px-4 py-8 relative z-10\">\n        <motion.div \n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n          className=\"flex items-center justify-between mb-8\"\n        >\n          <button \n            onClick={() => navigate(`/gallery/${token}`)} \n            className=\"group inline-flex items-center gap-3 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n          >\n            <ArrowLeft size={18} className=\"group-hover:-translate-x-1 transition-transform duration-300\" />\n            <span className=\"font-medium\">Back to Gallery</span>\n          </button>\n          \n          <div className=\"flex items-center gap-3\">\n            {isPhotographer && (\n              <button \n                onClick={() => setIsEditing(true)}\n                className=\"inline-flex items-center gap-2 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n              >\n                <Edit3 size={16} />\n                <span className=\"font-medium\">Edit</span>\n              </button>\n            )}\n            <button className=\"p-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\">\n              <Share2 size={18} />\n            </button>\n            <button \n              onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')} \n              className=\"inline-flex items-center gap-2 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n            >\n              {theme === 'dark' ? <Sun size={16} /> : <Moon size={16} />}\n              <span className=\"font-medium\">{theme === 'dark' ? 'Light' : 'Dark'}</span>\n            </button>\n          </div>\n        </motion.div>\n\n        <div className=\"max-w-4xl mx-auto space-y-8\">\n          {/* Image */}\n          <motion.div \n            initial={{ opacity: 0, y: -30 }} \n            animate={{ opacity: 1, y: 0 }} \n            transition={{ duration: 0.8, ease: \"easeOut\" }} \n            className=\"group\"\n          >\n            <div className=\"relative rounded-3xl overflow-hidden shadow-2xl ring-1 ring-black/5 dark:ring-white/10 bg-gradient-to-br from-white to-neutral-50 dark:from-neutral-950 dark:to-black\">\n              {/* Image container with hover effects */}\n              <div className=\"relative overflow-hidden\">\n                <motion.img \n                  src={photo.url || photo.previewUrl || photo.thumbnailUrl} \n                  alt={photo.title || 'Photo'} \n                  className=\"w-full h-auto object-contain transition-transform duration-700 group-hover:scale-105\"\n                  whileHover={{ scale: 1.02 }}\n                  transition={{ duration: 0.3 }}\n                />\n                \n                {/* Overlay with actions */}\n                <motion.div \n                  className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"\n                  initial={{ opacity: 0 }}\n                  whileHover={{ opacity: 1 }}\n                >\n                  <div className=\"absolute bottom-6 left-6 right-6 flex justify-between items-end\">\n                    <div className=\"flex gap-3\">\n                      <motion.button \n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.95 }}\n                        className=\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\"\n                      >\n                        <Eye size={20} />\n                      </motion.button>\n                      <motion.button \n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.95 }}\n                        className=\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\"\n                      >\n                        <Heart size={20} />\n                      </motion.button>\n                    </div>\n                    <motion.button \n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.95 }}\n                      className=\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\"\n                    >\n                      <Download size={20} />\n                    </motion.button>\n                  </div>\n                </motion.div>\n              </div>\n              \n              {/* Premium badge if price exists */}\n              {photo.metadata?.purchaseInfo?.price && (\n                <motion.div \n                  initial={{ opacity: 0, scale: 0.8 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  transition={{ delay: 0.5 }}\n                  className=\"absolute top-6 right-6 px-4 py-2 rounded-full bg-gradient-to-r from-amber-400 to-orange-500 text-white text-sm font-semibold shadow-lg backdrop-blur-sm flex items-center gap-2\"\n                >\n                  <Award size={16} />\n                  Premium\n                </motion.div>\n              )}\n            </div>\n          </motion.div>\n\n          {/* Details */}\n          <motion.div \n            initial={{ opacity: 0, y: 30 }} \n            animate={{ opacity: 1, y: 0 }} \n            transition={{ duration: 0.8, delay: 0.2, ease: \"easeOut\" }} \n            className=\"space-y-8\"\n          >\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.4 }}\n            >\n              <motion.h1 \n                className=\"text-4xl lg:text-5xl font-bold tracking-tight bg-gradient-to-r from-neutral-900 to-neutral-600 dark:from-neutral-100 dark:to-neutral-400 bg-clip-text text-transparent mb-4\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.5 }}\n              >\n                {photo.title || 'Untitled'}\n              </motion.h1>\n              {photo.metadata?.description && (\n                <motion.p \n                  className=\"text-lg text-neutral-600 dark:text-neutral-300 leading-relaxed font-light\"\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: 0.6 }}\n                >\n                  {photo.metadata.description}\n                </motion.p>\n              )}\n            </motion.div>\n\n            {/* Artsy-style Tabbed Content */}\n            <motion.div \n              initial={{ opacity: 0, y: 30 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.7 }}\n              className=\"space-y-6\"\n            >\n              {/* Tab Navigation */}\n              <div className=\"border-b border-neutral-200 dark:border-neutral-700\">\n                <nav className=\"flex space-x-8\">\n                  <button \n                    onClick={() => setActiveTab('about')}\n                    className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${\n                      activeTab === 'about' \n                        ? 'border-black dark:border-white text-neutral-900 dark:text-neutral-100' \n                        : 'border-transparent text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300'\n                    }`}\n                  >\n                    About the work\n                  </button>\n\n                  <button \n                    onClick={() => setActiveTab('provenance')}\n                    className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${\n                      activeTab === 'provenance' \n                        ? 'border-black dark:border-white text-neutral-900 dark:text-neutral-100' \n                        : 'border-transparent text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300'\n                    }`}\n                  >\n                    Provenance\n                  </button>\n                </nav>\n              </div>\n\n              {/* Tab Content */}\n              <AnimatePresence mode=\"wait\">\n                {activeTab === 'about' && (\n                  <motion.div \n                    key=\"about\"\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"space-y-6\"\n                  >\n                    {/* Description */}\n                    {photo.metadata?.description && (\n                      <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                        <p className=\"text-neutral-700 dark:text-neutral-300 leading-relaxed\">\n                          {photo.metadata.description}\n                        </p>\n                      </div>\n                    )}\n\n                    {/* Detailed Artwork Information */}\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      {/* Left Column */}\n                      <div className=\"space-y-4\">\n                        {photo.artwork?.materials && (\n                          <div>\n                            <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Materials</dt>\n                            <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.artwork.materials}</dd>\n                          </div>\n                        )}\n                        {photo.artwork?.dimensions && (\n                          <div>\n                            <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Size</dt>\n                            <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.artwork.dimensions}</dd>\n                          </div>\n                        )}\n                        {photo.artwork?.edition && (\n                          <div>\n                            <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Edition</dt>\n                            <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.artwork.edition}</dd>\n                          </div>\n                        )}\n                        {photo.artwork?.rarity && (\n                          <div>\n                            <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Rarity</dt>\n                            <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.artwork.rarity}</dd>\n                          </div>\n                        )}\n                        {photo.artwork?.medium && (\n                          <div>\n                            <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Medium</dt>\n                            <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.artwork.medium}</dd>\n                          </div>\n                        )}\n                      </div>\n\n                      {/* Right Column */}\n                      <div className=\"space-y-4\">\n                        {photo.artwork?.condition && (\n                          <div>\n                            <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Condition</dt>\n                            <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.artwork.condition}</dd>\n                          </div>\n                        )}\n                        {photo.artwork?.signature && (\n                          <div>\n                            <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Signature</dt>\n                            <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.artwork.signature}</dd>\n                          </div>\n                        )}\n                        {photo.artwork?.certificate !== undefined && (\n                          <div>\n                            <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Certificate of authenticity</dt>\n                            <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.artwork.certificate ? 'Included' : 'Not included'}</dd>\n                          </div>\n                        )}\n                        {photo.artwork?.frame && (\n                          <div>\n                            <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Frame</dt>\n                            <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.artwork.frame}</dd>\n                          </div>\n                        )}\n                        {photo.artwork?.series && (\n                          <div>\n                            <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Series</dt>\n                            <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.artwork.series}</dd>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </motion.div>\n                )}\n\n\n\n                {activeTab === 'provenance' && (\n                  <motion.div \n                    key=\"provenance\"\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -20 }}\n                    transition={{ duration: 0.3 }}\n                    className=\"space-y-6\"\n                  >\n                    {photo.artwork?.provenance ? (\n                      <div>\n                        <h4 className=\"font-semibold text-neutral-900 dark:text-neutral-100 mb-4\">Provenance</h4>\n                        <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                          <p className=\"text-neutral-700 dark:text-neutral-300 leading-relaxed\">\n                            {photo.artwork.provenance}\n                          </p>\n                        </div>\n                      </div>\n                    ) : (\n                      <div className=\"text-center py-8\">\n                        <div className=\"text-neutral-500 dark:text-neutral-400\">No provenance information available</div>\n                      </div>\n                    )}\n                  </motion.div>\n                )}\n              </AnimatePresence>\n            </motion.div>\n\n            {/* Technical Details */}\n            {photo.metadata?.exif && (\n              <motion.div \n                initial={{ opacity: 0, y: 30 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.8 }}\n                className=\"rounded-2xl bg-gradient-to-br from-white/90 to-white/70 dark:from-neutral-900/90 dark:to-neutral-900/60 backdrop-blur-xl ring-1 ring-black/5 dark:ring-white/10 p-6 shadow-xl\"\n              >\n                <div className=\"space-y-4\">\n                  <div className=\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\">\n                    <div className=\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 text-white\">\n                      <Camera size={18} />\n                    </div>\n                    Technical Details\n                  </div>\n                  \n                  {photo.metadata?.exif && (\n                    <motion.div \n                      initial={{ opacity: 0, x: -20 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ delay: 0.9 }}\n                      className=\"space-y-3\"\n                    >\n                      <div className=\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\">\n                        <div className=\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 text-white\">\n                          <Camera size={18} />\n                        </div>\n                        Technical Details\n                      </div>\n                      <div className=\"grid gap-2 pl-12\">\n                        {photo.metadata.exif.cameraModel && (\n                          <div className=\"flex justify-between items-center py-2 border-b border-neutral-200/50 dark:border-neutral-700/50\">\n                            <span className=\"text-neutral-600 dark:text-neutral-400 font-medium\">Camera</span>\n                            <span className=\"text-neutral-900 dark:text-neutral-100 font-semibold\">{photo.metadata.exif.cameraModel}</span>\n                          </div>\n                        )}\n                        {photo.metadata.exif.lensModel && (\n                          <div className=\"flex justify-between items-center py-2 border-b border-neutral-200/50 dark:border-neutral-700/50\">\n                            <span className=\"text-neutral-600 dark:text-neutral-400 font-medium\">Lens</span>\n                            <span className=\"text-neutral-900 dark:text-neutral-100 font-semibold\">{photo.metadata.exif.lensModel}</span>\n                          </div>\n                        )}\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          {photo.metadata.exif.fNumber && (\n                            <div className=\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\">\n                              <div className=\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\">Aperture</div>\n                              <div className=\"text-lg font-bold text-neutral-900 dark:text-neutral-100\">f/{photo.metadata.exif.fNumber}</div>\n                            </div>\n                          )}\n                          {photo.metadata.exif.exposureTime && (\n                            <div className=\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\">\n                              <div className=\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\">Shutter</div>\n                              <div className=\"text-lg font-bold text-neutral-900 dark:text-neutral-100\">{photo.metadata.exif.exposureTime}s</div>\n                            </div>\n                          )}\n                          {photo.metadata.exif.iso && (\n                            <div className=\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\">\n                              <div className=\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\">ISO</div>\n                              <div className=\"text-lg font-bold text-neutral-900 dark:text-neutral-100\">{photo.metadata.exif.iso}</div>\n                            </div>\n                          )}\n                          {photo.metadata.exif.focalLength && (\n                            <div className=\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\">\n                              <div className=\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\">Focal</div>\n                              <div className=\"text-lg font-bold text-neutral-900 dark:text-neutral-100\">{photo.metadata.exif.focalLength}mm</div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </motion.div>\n                  )}\n                  \n                  {photo.metadata?.location && (\n                    <motion.div \n                      initial={{ opacity: 0, x: -20 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ delay: 1.0 }}\n                      className=\"space-y-3\"\n                    >\n                      <div className=\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\">\n                        <div className=\"p-2 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 text-white\">\n                          <MapPin size={18} />\n                        </div>\n                        Location\n                      </div>\n                      <p className=\"text-neutral-700 dark:text-neutral-300 pl-12 font-medium\">{photo.metadata.location}</p>\n                    </motion.div>\n                  )}\n                </div>\n              </motion.div>\n            )}\n\n            {/* Price and actions */}\n            <motion.div \n              initial={{ opacity: 0, y: 30 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 1.1 }}\n              className=\"space-y-6\"\n            >\n              {photo.artwork?.price && (\n                <motion.div \n                  initial={{ opacity: 0, scale: 0.9 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  transition={{ delay: 1.2 }}\n                  className=\"text-center p-6 rounded-2xl bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200/50 dark:border-amber-700/50\"\n                >\n                  <div className=\"text-sm text-amber-600 dark:text-amber-400 font-medium uppercase tracking-wide mb-2\">\n                    {photo.artwork.isForSale ? 'Price' : 'Estimated Value'}\n                  </div>\n                  <div className=\"text-4xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent\">\n                    {photo.artwork.currency || '$'}{parseFloat(photo.artwork.price).toLocaleString()}\n                  </div>\n                  {photo.artwork.isForSale && (\n                    <div className=\"text-sm text-emerald-600 dark:text-emerald-400 font-medium mt-2\">\n                      Available for Purchase\n                    </div>\n                  )}\n                </motion.div>\n              )}\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <motion.button \n                  onClick={handleInquiry}\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: 1.3 }}\n                  whileHover={{ scale: 1.05, y: -2 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"group relative px-6 py-4 rounded-2xl bg-gradient-to-r from-neutral-900 to-neutral-700 dark:from-white dark:to-neutral-200 text-white dark:text-black font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden\"\n                >\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-neutral-700 to-neutral-900 dark:from-neutral-200 dark:to-white opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n                  <div className=\"relative flex items-center justify-center gap-2\">\n                    <Mail size={18} className=\"group-hover:rotate-12 transition-transform duration-300\" />\n                    <span>Inquiry</span>\n                  </div>\n                </motion.button>\n                \n                <motion.button \n                  onClick={handlePurchase}\n                  initial={{ opacity: 0, x: 20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: 1.4 }}\n                  whileHover={{ scale: 1.05, y: -2 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"group relative px-6 py-4 rounded-2xl bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden\"\n                >\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-emerald-500 to-teal-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n                  <div className=\"relative flex items-center justify-center gap-2\">\n                    <ShoppingCart size={18} className=\"group-hover:scale-110 transition-transform duration-300\" />\n                    <span>Purchase</span>\n                  </div>\n                </motion.button>\n              </div>\n            </motion.div>\n\n            {/* Artist Information - Artsy Style */}\n            {gallery?.photographer?.name && (\n              <motion.div \n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 1.5 }}\n                className=\"space-y-6\"\n              >\n                {/* Artist Header */}\n                <div className=\"flex items-center gap-4 pb-4 border-b border-neutral-200 dark:border-neutral-700\">\n                  <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-neutral-200 to-neutral-300 dark:from-neutral-700 dark:to-neutral-800 flex items-center justify-center text-2xl font-bold text-neutral-600 dark:text-neutral-300\">\n                    {gallery.photographer.name.charAt(0)}\n                  </div>\n                  <div>\n                    <h3 className=\"text-2xl font-bold text-neutral-900 dark:text-neutral-100\">{gallery.photographer.name}</h3>\n                  </div>\n                </div>\n\n                {/* Artist Biography */}\n                {photo.artist?.biography && (\n                  <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                    <p className=\"text-neutral-700 dark:text-neutral-300 leading-relaxed whitespace-pre-line\">\n                      {photo.artist.biography}\n                    </p>\n                  </div>\n                )}\n\n\n\n\n\n\n\n\n                {/* Contact */}\n                {gallery.photographer.email && (\n                  <div className=\"pt-4 border-t border-neutral-200 dark:border-neutral-700\">\n                    <div className=\"text-sm text-neutral-500 dark:text-neutral-400 mb-1\">Contact</div>\n                    <div className=\"text-neutral-600 dark:text-neutral-400\">{gallery.photographer.email}</div>\n                  </div>\n                )}\n              </motion.div>\n            )}\n          </motion.div>\n        </div>\n      </div>\n\n      {/* Edit Modal */}\n      <AnimatePresence>\n        {isEditing && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n            onClick={() => setIsEditing(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.95, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.95, opacity: 0 }}\n              onClick={(e) => e.stopPropagation()}\n              className=\"bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\n            >\n              <PhotoEditForm\n                photo={photo}\n                onSave={handleSavePhoto}\n                onCancel={() => setIsEditing(false)}\n              />\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default PhotoDetailPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}