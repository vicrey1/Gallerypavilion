{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/Desktop/Gallerypavilion/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useParams,Link,useSearchParams}from'react-router-dom';import{motion}from'framer-motion';import{useAuth}from'../contexts/AuthContext';import axios from'axios';import{ArrowLeftIcon,PhotoIcon,CloudArrowUpIcon,XMarkIcon,Cog6ToothIcon,PencilIcon,EyeIcon,TrashIcon,AdjustmentsHorizontalIcon,ShareIcon,UserGroupIcon}from'@heroicons/react/24/outline';import{toast}from'react-hot-toast';import ShareLinkForm from'../components/ShareLinkForm';import ShareLinksList from'../components/ShareLinksList';import InviteManager from'../components/InviteManager';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GalleryPage=()=>{const{id}=useParams();const{isAuthenticated}=useAuth();const[searchParams]=useSearchParams();const[activeTab,setActiveTab]=useState(searchParams.get('tab')||'edit');const[gallery,setGallery]=useState(null);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[uploading,setUploading]=useState(false);const[photos,setPhotos]=useState([]);const[formData,setFormData]=useState({title:'',description:'',category:'',collections:[],settings:{allowDownload:false,showMetadata:true,enableComments:false,watermarkIntensity:0.3,requirePassword:false,password:'',inviteOnly:false,sortOrder:'newest'},isPublished:false});const[errors,setErrors]=useState({});const[newCollection,setNewCollection]=useState('');const[coverImage,setCoverImage]=useState(null);const[coverImagePreview,setCoverImagePreview]=useState(null);const[shareLinks,setShareLinks]=useState([]);const[loadingShares,setLoadingShares]=useState(false);// Photo metadata editing\nconst[editingPhoto,setEditingPhoto]=useState(null);const[photoMetadata,setPhotoMetadata]=useState({title:'',description:'',tags:[],artworkInfo:{year:'',series:'',edition:'',size:'',materials:'',signature:''},purchaseInfo:{price:'',priceOnRequest:false,availability:'available',shippingInfo:'',returnPolicy:''},context:{artistStatement:'',exhibitionHistory:''}});const categories=['Portrait','Wedding','Landscape','Wildlife','Street','Fashion','Commercial','Fine Art','Event','Documentary'];const fetchGallery=useCallback(async()=>{try{var _galleryData$settings,_galleryData$settings2,_galleryData$settings3,_galleryData$settings4,_galleryData$settings5,_galleryData$settings6,_galleryData$settings7,_galleryData$settings8;setLoading(true);const response=await axios.get(\"/galleries/\".concat(id));const galleryData=response.data;setGallery(galleryData);// Normalize watermarkIntensity for UI slider if backend returns enum\nconst rawIntensity=(_galleryData$settings=galleryData.settings)===null||_galleryData$settings===void 0?void 0:_galleryData$settings.watermarkIntensity;let intensityNumber;if(typeof rawIntensity==='number'){intensityNumber=rawIntensity;}else if(typeof rawIntensity==='string'){if(['light','medium','heavy'].includes(rawIntensity)){intensityNumber=rawIntensity==='light'?0.2:rawIntensity==='medium'?0.5:0.85;}else{const num=parseFloat(rawIntensity);intensityNumber=Number.isFinite(num)?num:0.3;}}else{intensityNumber=0.3;}// Populate form data\nsetFormData({title:galleryData.title||'',description:galleryData.description||'',category:galleryData.category||'',collections:galleryData.collections||[],settings:{allowDownload:((_galleryData$settings2=galleryData.settings)===null||_galleryData$settings2===void 0?void 0:_galleryData$settings2.allowDownload)||false,showMetadata:((_galleryData$settings3=galleryData.settings)===null||_galleryData$settings3===void 0?void 0:_galleryData$settings3.showMetadata)||true,enableComments:((_galleryData$settings4=galleryData.settings)===null||_galleryData$settings4===void 0?void 0:_galleryData$settings4.enableComments)||false,watermarkIntensity:intensityNumber,requirePassword:((_galleryData$settings5=galleryData.settings)===null||_galleryData$settings5===void 0?void 0:_galleryData$settings5.requirePassword)||false,password:((_galleryData$settings6=galleryData.settings)===null||_galleryData$settings6===void 0?void 0:_galleryData$settings6.password)||'',inviteOnly:((_galleryData$settings7=galleryData.settings)===null||_galleryData$settings7===void 0?void 0:_galleryData$settings7.inviteOnly)||false,sortOrder:((_galleryData$settings8=galleryData.settings)===null||_galleryData$settings8===void 0?void 0:_galleryData$settings8.sortOrder)||'newest'},isPublished:galleryData.isPublished||false});if(galleryData.coverImage){setCoverImagePreview(galleryData.coverImage.previewUrl||null);}}catch(error){console.error('Error fetching gallery:',error);toast.error('Failed to load gallery');}finally{setLoading(false);}},[id]);const fetchPhotos=useCallback(async()=>{try{const response=await axios.get(\"/galleries/\".concat(id,\"/photos\"));setPhotos(response.data.photos||[]);}catch(error){console.error('Error fetching photos:',error);}},[id]);// Fetch share links\nconst fetchShareLinks=useCallback(async()=>{try{setLoadingShares(true);const response=await axios.get(\"/galleries/\".concat(id,\"/shares\"));setShareLinks(response.data.shares||[]);}catch(error){console.error('Error fetching share links:',error);toast.error('Failed to fetch share links');}finally{setLoadingShares(false);}},[id]);// Create share link\nconst createShareLink=async shareData=>{try{const response=await axios.post(\"/galleries/\".concat(id,\"/shares\"),shareData);setShareLinks(prev=>[...prev,response.data.share]);toast.success('Share link created successfully');return response.data.share;}catch(error){var _error$response,_error$response$data;console.error('Error creating share link:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to create share link');throw error;}};// Delete share link\nconst deleteShareLink=async shareId=>{try{await axios.delete(\"/galleries/\".concat(id,\"/shares/\").concat(shareId));setShareLinks(prev=>prev.filter(share=>share._id!==shareId));toast.success('Share link deleted successfully');}catch(error){console.error('Error deleting share link:',error);toast.error('Failed to delete share link');}};// Fetch gallery data\nuseEffect(()=>{if(id){fetchGallery();fetchPhotos();fetchShareLinks();}},[id,fetchGallery,fetchPhotos,fetchShareLinks]);// Handle form input changes\nconst handleInputChange=e=>{const{name,value,type,checked}=e.target;if(name.startsWith('settings.')){const settingName=name.split('.')[1];setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{settings:_objectSpread(_objectSpread({},prev.settings),{},{[settingName]:type==='checkbox'?checked:settingName==='watermarkIntensity'?parseFloat(value):value})}));}else{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));}// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:null}));}};// Handle cover image upload\nconst handleCoverImageChange=e=>{const file=e.target.files[0];if(file){if(file.size>10*1024*1024){toast.error('Cover image must be less than 10MB');return;}if(!file.type.startsWith('image/')){toast.error('Please select a valid image file');return;}setCoverImage(file);// Create preview\nconst reader=new FileReader();reader.onload=e=>setCoverImagePreview(e.target.result);reader.readAsDataURL(file);}};// Remove cover image\nconst removeCoverImage=()=>{setCoverImage(null);setCoverImagePreview(null);};// Add collection\nconst addCollection=()=>{if(newCollection.trim()&&!formData.collections.includes(newCollection.trim())){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{collections:[...prev.collections,newCollection.trim()]}));setNewCollection('');}};// Remove collection\nconst removeCollection=index=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{collections:prev.collections.filter((_,i)=>i!==index)}));};// Validate form\nconst validateForm=()=>{const newErrors={};if(!formData.title.trim()){newErrors.title='Gallery title is required';}else if(formData.title.length>100){newErrors.title='Title cannot exceed 100 characters';}if(!formData.description.trim()){newErrors.description='Gallery description is required';}else if(formData.description.length>1000){newErrors.description='Description cannot exceed 1000 characters';}if(!formData.category){newErrors.category='Please select a category';}if(formData.settings.requirePassword&&!formData.settings.password.trim()){newErrors['settings.password']='Password is required when password protection is enabled';}setErrors(newErrors);return Object.keys(newErrors).length===0;};// Save gallery changes\nconst handleSave=async()=>{if(!validateForm()){toast.error('Please fix the errors in the form');return;}setSaving(true);try{const submitData=new FormData();// Prepare settings strictly matching backend schema\nconst rawSettings=_objectSpread({},formData.settings);const numericIntensity=typeof rawSettings.watermarkIntensity==='number'?rawSettings.watermarkIntensity:parseFloat(rawSettings.watermarkIntensity||0.5);const watermarkEnum=Number.isFinite(numericIntensity)?numericIntensity<=0.33?'light':numericIntensity<=0.66?'medium':'heavy':'medium';const settingsPayload={allowDownload:!!rawSettings.allowDownload,showMetadata:!!rawSettings.showMetadata,enableComments:!!rawSettings.enableComments,watermarkIntensity:watermarkEnum,sortOrder:['newest','oldest','custom'].includes(rawSettings.sortOrder)?rawSettings.sortOrder:'newest',inviteOnly:!!rawSettings.inviteOnly};const collectionsProcessed=(formData.collections||[]).map(c=>(c||'').toString().trim()).filter(Boolean);// Add gallery data\nObject.keys(formData).forEach(key=>{if(key==='settings'){submitData.append('settings',JSON.stringify(settingsPayload));}else if(key==='collections'){submitData.append('collections',JSON.stringify(collectionsProcessed));}else{submitData.append(key,formData[key]);}});// Add cover image if selected\nif(coverImage){submitData.append('coverImage',coverImage);}const response=await axios.put(\"/galleries/\".concat(id),submitData,{headers:{'Content-Type':'multipart/form-data'}});toast.success('Gallery updated successfully!');setGallery(response.data);}catch(error){var _error$response2,_error$response2$data,_error$response3,_error$response3$data;console.error('Error updating gallery:',error);const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to update gallery';toast.error(errorMessage);// Handle validation errors\nif((_error$response3=error.response)!==null&&_error$response3!==void 0&&(_error$response3$data=_error$response3.data)!==null&&_error$response3$data!==void 0&&_error$response3$data.errors){const validationErrors={};error.response.data.errors.forEach(err=>{validationErrors[err.path]=err.msg;});setErrors(validationErrors);}}finally{setSaving(false);}};// Upload photos\nconst handlePhotoUpload=async files=>{if(!files||files.length===0)return;setUploading(true);try{var _response$data$photos;const formData=new FormData();for(let i=0;i<files.length;i++){formData.append('photos',files[i]);}const response=await axios.post(\"/galleries/\".concat(id,\"/photos\"),formData,{headers:{'Content-Type':'multipart/form-data'}});toast.success(\"\".concat(((_response$data$photos=response.data.photos)===null||_response$data$photos===void 0?void 0:_response$data$photos.length)||0,\" photos uploaded successfully!\"));fetchPhotos();// Refresh photos list\n}catch(error){var _error$response4,_error$response4$data;console.error('Error uploading photos:',error);const errorMessage=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to upload photos';toast.error(errorMessage);}finally{setUploading(false);}};// Handle file input change\nconst handleFileInputChange=e=>{handlePhotoUpload(e.target.files);};// Drag and drop handlers\nconst[dragActive,setDragActive]=useState(false);const handleDrag=e=>{e.preventDefault();e.stopPropagation();if(e.type===\"dragenter\"||e.type===\"dragover\"){setDragActive(true);}else if(e.type===\"dragleave\"){setDragActive(false);}};const handleDrop=e=>{e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files[0]){const files=Array.from(e.dataTransfer.files).filter(file=>file.type.startsWith('image/'));if(files.length>0){handlePhotoUpload(files);}else{toast.error('Please drop only image files');}}};// Delete photo\nconst handleDeletePhoto=async photoId=>{if(!window.confirm('Are you sure you want to delete this photo?'))return;try{await axios.delete(\"/photos/\".concat(photoId));toast.success('Photo deleted successfully');fetchPhotos();// Refresh photos list\n}catch(error){console.error('Error deleting photo:',error);toast.error('Failed to delete photo');}};// Edit photo metadata\nconst handleEditPhoto=photo=>{var _photo$artworkInfo,_photo$artworkInfo2,_photo$artworkInfo3,_photo$artworkInfo4,_photo$artworkInfo5,_photo$artworkInfo6,_photo$purchaseInfo,_photo$purchaseInfo2,_photo$purchaseInfo3,_photo$purchaseInfo4,_photo$purchaseInfo5,_photo$context,_photo$context2;setEditingPhoto(photo);setPhotoMetadata({title:photo.title||'',description:photo.description||'',tags:photo.tags||[],artworkInfo:{year:((_photo$artworkInfo=photo.artworkInfo)===null||_photo$artworkInfo===void 0?void 0:_photo$artworkInfo.year)||'',series:((_photo$artworkInfo2=photo.artworkInfo)===null||_photo$artworkInfo2===void 0?void 0:_photo$artworkInfo2.series)||'',edition:((_photo$artworkInfo3=photo.artworkInfo)===null||_photo$artworkInfo3===void 0?void 0:_photo$artworkInfo3.edition)||'',size:((_photo$artworkInfo4=photo.artworkInfo)===null||_photo$artworkInfo4===void 0?void 0:_photo$artworkInfo4.size)||'',materials:((_photo$artworkInfo5=photo.artworkInfo)===null||_photo$artworkInfo5===void 0?void 0:_photo$artworkInfo5.materials)||'',signature:((_photo$artworkInfo6=photo.artworkInfo)===null||_photo$artworkInfo6===void 0?void 0:_photo$artworkInfo6.signature)||''},purchaseInfo:{price:((_photo$purchaseInfo=photo.purchaseInfo)===null||_photo$purchaseInfo===void 0?void 0:_photo$purchaseInfo.price)||'',priceOnRequest:((_photo$purchaseInfo2=photo.purchaseInfo)===null||_photo$purchaseInfo2===void 0?void 0:_photo$purchaseInfo2.priceOnRequest)||false,availability:((_photo$purchaseInfo3=photo.purchaseInfo)===null||_photo$purchaseInfo3===void 0?void 0:_photo$purchaseInfo3.availability)||'available',shippingInfo:((_photo$purchaseInfo4=photo.purchaseInfo)===null||_photo$purchaseInfo4===void 0?void 0:_photo$purchaseInfo4.shippingInfo)||'',returnPolicy:((_photo$purchaseInfo5=photo.purchaseInfo)===null||_photo$purchaseInfo5===void 0?void 0:_photo$purchaseInfo5.returnPolicy)||''},context:{artistStatement:((_photo$context=photo.context)===null||_photo$context===void 0?void 0:_photo$context.artistStatement)||'',exhibitionHistory:((_photo$context2=photo.context)===null||_photo$context2===void 0?void 0:_photo$context2.exhibitionHistory)||''}});};// Save photo metadata\nconst handleSavePhotoMetadata=async()=>{if(!editingPhoto)return;try{await axios.put(\"/photos/\".concat(editingPhoto._id),photoMetadata);toast.success('Photo metadata updated successfully');setEditingPhoto(null);fetchPhotos();// Refresh photos list\n}catch(error){console.error('Error updating photo metadata:',error);toast.error('Failed to update photo metadata');}};// Handle metadata input change\nconst handleMetadataChange=(field,value)=>{if(field.includes('.')){const[parent,child]=field.split('.');setPhotoMetadata(prev=>_objectSpread(_objectSpread({},prev),{},{[parent]:_objectSpread(_objectSpread({},prev[parent]),{},{[child]:value})}));}else{setPhotoMetadata(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));}};// Toggle publish status\nconst handleTogglePublish=async()=>{try{const newStatus=!formData.isPublished;await axios.patch(\"/galleries/\".concat(id,\"/status\"),{isPublished:newStatus});setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{isPublished:newStatus}));toast.success(newStatus?'Gallery published!':'Gallery unpublished');}catch(error){console.error('Error toggling publish status:',error);toast.error('Failed to update gallery status');}};if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Authentication Required\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Please log in to edit galleries.\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn-primary\",children:\"Log In\"})]})});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})});}if(!gallery){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Gallery Not Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"The requested gallery could not be found.\"}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"btn-primary\",children:\"Back to Dashboard\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center h-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"text-gray-600 hover:text-gray-900\",children:/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-2xl font-serif font-bold gradient-text\",children:\"Gallery Pavilion\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[\"/ Editing: \",gallery.title]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleTogglePublish,className:\"px-4 py-2 rounded-lg font-medium \".concat(formData.isPublished?'bg-green-100 text-green-800 hover:bg-green-200':'bg-gray-100 text-gray-800 hover:bg-gray-200',\" transition-colors\"),children:formData.isPublished?'Published':'Draft'}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,disabled:saving,className:\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\",children:[saving&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:saving?'Saving...':'Save Changes'})]})]})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6},children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"flex space-x-8\",children:[{id:'edit',label:'Edit Gallery',icon:PencilIcon},{id:'photos',label:'Photos',icon:PhotoIcon},{id:'share',label:'Share Links',icon:ShareIcon},{id:'invitations',label:'Invitations',icon:UserGroupIcon},{id:'settings',label:'Settings',icon:Cog6ToothIcon}].map(tab=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors \".concat(activeTab===tab.id?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(tab.icon,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:tab.label})]},tab.id))})}),activeTab==='edit'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Gallery Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:formData.title,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.title?'border-red-300':'border-gray-300'),placeholder:\"Enter gallery title\",maxLength:100}),errors.title&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[formData.title.length,\"/100 characters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",name:\"category\",value:formData.category,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.category?'border-red-300':'border-gray-300'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a category\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))]}),errors.category&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.category})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Collections\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCollection,onChange:e=>setNewCollection(e.target.value),onKeyPress:e=>e.key==='Enter'&&(e.preventDefault(),addCollection()),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",placeholder:\"Add collection tag\",maxLength:50}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addCollection,className:\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\",children:\"Add\"})]}),formData.collections.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 flex flex-wrap gap-2\",children:formData.collections.map((collection,index)=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-3 py-1 bg-primary-100 text-primary-800 text-sm rounded-full\",children:[collection,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeCollection(index),className:\"ml-2 text-primary-600 hover:text-primary-800\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-4 h-4\"})})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",value:formData.description,onChange:handleInputChange,rows:4,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.description?'border-red-300':'border-gray-300'),placeholder:\"Describe your gallery\",maxLength:1000}),errors.description&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[formData.description.length,\"/1000 characters\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Cover Image\"}),!coverImagePreview?/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\",children:[/*#__PURE__*/_jsx(CloudArrowUpIcon,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Upload a cover image for your gallery\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleCoverImageChange,className:\"hidden\",id:\"coverImage\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"coverImage\",className:\"btn-secondary cursor-pointer\",children:\"Choose Image\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"PNG, JPG, GIF up to 10MB\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:coverImagePreview,alt:\"Cover preview\",className:\"w-full h-64 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:removeCoverImage,className:\"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-4 h-4\"})})]})]})]}),activeTab==='photos'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Upload Photos\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-lg p-8 text-center transition-colors \".concat(dragActive?'border-primary-500 bg-primary-50':'border-gray-300 hover:border-gray-400'),onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,children:[/*#__PURE__*/_jsx(CloudArrowUpIcon,{className:\"w-12 h-12 mx-auto mb-4 \".concat(dragActive?'text-primary-500':'text-gray-400')}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 \".concat(dragActive?'text-primary-600':'text-gray-600'),children:dragActive?'Drop photos here!':'Drag and drop photos here, or click to browse'}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileInputChange,multiple:true,className:\"hidden\",id:\"photoUpload\",disabled:uploading}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"photoUpload\",className:\"btn-secondary cursor-pointer \".concat(uploading?'opacity-50 cursor-not-allowed':''),children:uploading?'Uploading...':'Select Photos'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Up to 20 photos at once, 10MB each \\u2022 Supports JPG, PNG, WEBP\"}),uploading&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-primary-600 h-2 rounded-full animate-pulse\",style:{width:'60%'}})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Processing images and generating watermarks...\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:[\"Photos (\",photos.length,\")\"]}),photos.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(PhotoIcon,{className:\"w-16 h-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No photos uploaded yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Upload photos to get started\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4\",children:photos.map(photo=>/*#__PURE__*/_jsxs(\"div\",{className:\"group relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:photo.previewUrl||\"/uploads/photos/\".concat(photo.filename),alt:photo.title,className:\"w-full h-48 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(EyeIcon,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditPhoto(photo),className:\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(AdjustmentsHorizontalIcon,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeletePhoto(photo._id),className:\"p-2 bg-red-600 hover:bg-red-700 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"w-4 h-4 text-white\"})})]})})]},photo._id))})]})]}),activeTab==='share'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Create Share Link\"}),/*#__PURE__*/_jsx(ShareLinkForm,{onCreateShare:createShareLink})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Existing Share Links\"}),loadingShares?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"})}):shareLinks.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-gray-500\",children:[/*#__PURE__*/_jsx(ShareIcon,{className:\"w-12 h-12 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No share links created yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Create your first share link above\"})]}):/*#__PURE__*/_jsx(ShareLinksList,{shareLinks:shareLinks,onDeleteShare:deleteShareLink,galleryId:id})]})]}),activeTab==='invitations'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsx(InviteManager,{galleryId:id,isInviteOnly:formData.settings.inviteOnly})}),activeTab==='settings'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Gallery Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"allowDownload\",name:\"settings.allowDownload\",checked:formData.settings.allowDownload,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"allowDownload\",className:\"ml-2 block text-sm text-gray-700\",children:\"Allow photo downloads\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"showMetadata\",name:\"settings.showMetadata\",checked:formData.settings.showMetadata,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"showMetadata\",className:\"ml-2 block text-sm text-gray-700\",children:\"Show photo metadata\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"enableComments\",name:\"settings.enableComments\",checked:formData.settings.enableComments,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"enableComments\",className:\"ml-2 block text-sm text-gray-700\",children:\"Enable comments\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"requirePassword\",name:\"settings.requirePassword\",checked:formData.settings.requirePassword,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"requirePassword\",className:\"ml-2 block text-sm text-gray-700\",children:\"Require password for access\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"inviteOnly\",name:\"settings.inviteOnly\",checked:formData.settings.inviteOnly,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inviteOnly\",className:\"ml-2 block text-sm text-gray-700\",children:\"Invite-only access (requires invitation code)\"})]})]}),formData.settings.requirePassword&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Gallery Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"settings.password\",value:formData.settings.password,onChange:handleInputChange,className:\"w-full max-w-md px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors['settings.password']?'border-red-300':'border-gray-300'),placeholder:\"Enter gallery password\"}),errors['settings.password']&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors['settings.password']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"watermarkIntensity\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Watermark Intensity: \",Math.round(formData.settings.watermarkIntensity*100),\"%\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",id:\"watermarkIntensity\",name:\"settings.watermarkIntensity\",min:\"0\",max:\"1\",step:\"0.1\",value:formData.settings.watermarkIntensity,onChange:handleInputChange,className:\"w-full max-w-md\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Controls the opacity of watermarks on preview images\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-6 mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-700 mb-4\",children:\"Danger Zone\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm('Are you sure you want to delete this gallery? This action cannot be undone.')){// Handle delete\n}},className:\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\",children:\"Delete Gallery\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Once deleted, the gallery and all its photos cannot be recovered.\"})]})]})]})]})]})}),editingPhoto&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900\",children:\"Edit Photo Metadata\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingPhoto(null),className:\"p-2 hover:bg-gray-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-6 h-6 text-gray-500\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:editingPhoto.previewUrl||\"/uploads/photos/\".concat(editingPhoto.filename),alt:editingPhoto.title,className:\"w-full h-64 object-cover rounded-lg mb-4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Original: \",editingPhoto.originalFilename]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.title,onChange:e=>handleMetadataChange('title',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:photoMetadata.description,onChange:e=>handleMetadataChange('description',e.target.value),rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Artwork Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Year\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.artworkInfo.year,onChange:e=>handleMetadataChange('artworkInfo.year',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Series\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.artworkInfo.series,onChange:e=>handleMetadataChange('artworkInfo.series',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Edition\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.artworkInfo.edition,onChange:e=>handleMetadataChange('artworkInfo.edition',e.target.value),placeholder:\"e.g., 1/50\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Size\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.artworkInfo.size,onChange:e=>handleMetadataChange('artworkInfo.size',e.target.value),placeholder:\"e.g., 24x36 inches\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Materials\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.artworkInfo.materials,onChange:e=>handleMetadataChange('artworkInfo.materials',e.target.value),placeholder:\"e.g., Archival pigment print on cotton paper\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Purchase Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.purchaseInfo.price,onChange:e=>handleMetadataChange('purchaseInfo.price',e.target.value),placeholder:\"$2,500\",disabled:photoMetadata.purchaseInfo.priceOnRequest,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"priceOnRequest\",checked:photoMetadata.purchaseInfo.priceOnRequest,onChange:e=>handleMetadataChange('purchaseInfo.priceOnRequest',e.target.checked),className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"priceOnRequest\",className:\"ml-2 text-sm text-gray-700\",children:\"Price on Request\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Availability\"}),/*#__PURE__*/_jsxs(\"select\",{value:photoMetadata.purchaseInfo.availability,onChange:e=>handleMetadataChange('purchaseInfo.availability',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"available\",children:\"Available\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sold\",children:\"Sold\"}),/*#__PURE__*/_jsx(\"option\",{value:\"reserved\",children:\"Reserved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"not-for-sale\",children:\"Not for Sale\"})]})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 mt-8 pt-6 border-t\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingPhoto(null),className:\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSavePhotoMetadata,className:\"px-4 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded-lg transition-colors\",children:\"Save Changes\"})]})]})})})]});};export default GalleryPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","Link","useSearchParams","motion","useAuth","axios","ArrowLeftIcon","PhotoIcon","CloudArrowUpIcon","XMarkIcon","Cog6ToothIcon","PencilIcon","EyeIcon","TrashIcon","AdjustmentsHorizontalIcon","ShareIcon","UserGroupIcon","toast","ShareLinkForm","ShareLinksList","InviteManager","jsx","_jsx","jsxs","_jsxs","GalleryPage","id","isAuthenticated","searchParams","activeTab","setActiveTab","get","gallery","setGallery","loading","setLoading","saving","setSaving","uploading","setUploading","photos","setPhotos","formData","setFormData","title","description","category","collections","settings","allowDownload","showMetadata","enableComments","watermarkIntensity","requirePassword","password","inviteOnly","sortOrder","isPublished","errors","setErrors","newCollection","setNewCollection","coverImage","setCoverImage","coverImagePreview","setCoverImagePreview","shareLinks","setShareLinks","loadingShares","setLoadingShares","editingPhoto","setEditingPhoto","photoMetadata","setPhotoMetadata","tags","artworkInfo","year","series","edition","size","materials","signature","purchaseInfo","price","priceOnRequest","availability","shippingInfo","returnPolicy","context","artistStatement","exhibitionHistory","categories","fetchGallery","_galleryData$settings","_galleryData$settings2","_galleryData$settings3","_galleryData$settings4","_galleryData$settings5","_galleryData$settings6","_galleryData$settings7","_galleryData$settings8","response","concat","galleryData","data","rawIntensity","intensityNumber","includes","num","parseFloat","Number","isFinite","previewUrl","error","console","fetchPhotos","fetchShareLinks","shares","createShareLink","shareData","post","prev","share","success","_error$response","_error$response$data","message","deleteShareLink","shareId","delete","filter","_id","handleInputChange","e","name","value","type","checked","target","startsWith","settingName","split","_objectSpread","handleCoverImageChange","file","files","reader","FileReader","onload","result","readAsDataURL","removeCoverImage","addCollection","trim","removeCollection","index","_","i","validateForm","newErrors","length","Object","keys","handleSave","submitData","FormData","rawSettings","numericIntensity","watermarkEnum","settingsPayload","collectionsProcessed","map","c","toString","Boolean","forEach","key","append","JSON","stringify","put","headers","_error$response2","_error$response2$data","_error$response3","_error$response3$data","errorMessage","validationErrors","err","path","msg","handlePhotoUpload","_response$data$photos","_error$response4","_error$response4$data","handleFileInputChange","dragActive","setDragActive","handleDrag","preventDefault","stopPropagation","handleDrop","dataTransfer","Array","from","handleDeletePhoto","photoId","window","confirm","handleEditPhoto","photo","_photo$artworkInfo","_photo$artworkInfo2","_photo$artworkInfo3","_photo$artworkInfo4","_photo$artworkInfo5","_photo$artworkInfo6","_photo$purchaseInfo","_photo$purchaseInfo2","_photo$purchaseInfo3","_photo$purchaseInfo4","_photo$purchaseInfo5","_photo$context","_photo$context2","handleSavePhotoMetadata","handleMetadataChange","field","parent","child","handleTogglePublish","newStatus","patch","className","children","to","onClick","disabled","div","initial","opacity","y","animate","transition","duration","label","icon","tab","htmlFor","onChange","placeholder","maxLength","onKeyPress","collection","rows","accept","src","alt","onDragEnter","onDragLeave","onDragOver","onDrop","multiple","style","width","filename","onCreateShare","onDeleteShare","galleryId","isInviteOnly","Math","round","min","max","step","originalFilename"],"sources":["C:/Users/USER/Desktop/Gallerypavilion/frontend/src/pages/GalleryPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, Link, useSearchParams } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport { useAuth } from '../contexts/AuthContext';\nimport axios from 'axios';\nimport {\n  ArrowLeftIcon,\n  PhotoIcon,\n  CloudArrowUpIcon,\n  XMarkIcon,\n  Cog6ToothIcon,\n  PencilIcon,\n  EyeIcon,\n  TrashIcon,\n  AdjustmentsHorizontalIcon,\n  ShareIcon,\n  UserGroupIcon\n} from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\nimport ShareLinkForm from '../components/ShareLinkForm';\nimport ShareLinksList from '../components/ShareLinksList';\nimport InviteManager from '../components/InviteManager';\n\nconst GalleryPage = () => {\n  const { id } = useParams();\n  const { isAuthenticated } = useAuth();\n  const [searchParams] = useSearchParams();\n  \n  const [activeTab, setActiveTab] = useState(searchParams.get('tab') || 'edit');\n  const [gallery, setGallery] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [photos, setPhotos] = useState([]);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    category: '',\n    collections: [],\n    settings: {\n      allowDownload: false,\n      showMetadata: true,\n      enableComments: false,\n      watermarkIntensity: 0.3,\n      requirePassword: false,\n      password: '',\n      inviteOnly: false,\n      sortOrder: 'newest'\n    },\n    isPublished: false\n  });\n  const [errors, setErrors] = useState({});\n  const [newCollection, setNewCollection] = useState('');\n  const [coverImage, setCoverImage] = useState(null);\n  const [coverImagePreview, setCoverImagePreview] = useState(null);\n  const [shareLinks, setShareLinks] = useState([]);\n  const [loadingShares, setLoadingShares] = useState(false);\n  \n  // Photo metadata editing\n  const [editingPhoto, setEditingPhoto] = useState(null);\n  const [photoMetadata, setPhotoMetadata] = useState({\n    title: '',\n    description: '',\n    tags: [],\n    artworkInfo: {\n      year: '',\n      series: '',\n      edition: '',\n      size: '',\n      materials: '',\n      signature: ''\n    },\n    purchaseInfo: {\n      price: '',\n      priceOnRequest: false,\n      availability: 'available',\n      shippingInfo: '',\n      returnPolicy: ''\n    },\n    context: {\n      artistStatement: '',\n      exhibitionHistory: ''\n    }\n  });\n\n  const categories = [\n    'Portrait', 'Wedding', 'Landscape', 'Wildlife', 'Street', \n    'Fashion', 'Commercial', 'Fine Art', 'Event', 'Documentary'\n  ];\n\n  const fetchGallery = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`/galleries/${id}`);\n      const galleryData = response.data;\n      setGallery(galleryData);\n      \n      // Normalize watermarkIntensity for UI slider if backend returns enum\n      const rawIntensity = galleryData.settings?.watermarkIntensity;\n      let intensityNumber;\n      if (typeof rawIntensity === 'number') {\n        intensityNumber = rawIntensity;\n      } else if (typeof rawIntensity === 'string') {\n        if (['light', 'medium', 'heavy'].includes(rawIntensity)) {\n          intensityNumber = rawIntensity === 'light' ? 0.2 : (rawIntensity === 'medium' ? 0.5 : 0.85);\n        } else {\n          const num = parseFloat(rawIntensity);\n          intensityNumber = Number.isFinite(num) ? num : 0.3;\n        }\n      } else {\n        intensityNumber = 0.3;\n      }\n      \n      // Populate form data\n      setFormData({\n        title: galleryData.title || '',\n        description: galleryData.description || '',\n        category: galleryData.category || '',\n        collections: galleryData.collections || [],\n        settings: {\n          allowDownload: galleryData.settings?.allowDownload || false,\n          showMetadata: galleryData.settings?.showMetadata || true,\n          enableComments: galleryData.settings?.enableComments || false,\n          watermarkIntensity: intensityNumber,\n          requirePassword: galleryData.settings?.requirePassword || false,\n          password: galleryData.settings?.password || '',\n          inviteOnly: galleryData.settings?.inviteOnly || false,\n          sortOrder: galleryData.settings?.sortOrder || 'newest'\n        },\n        isPublished: galleryData.isPublished || false\n      });\n\n      if (galleryData.coverImage) {\n        setCoverImagePreview(galleryData.coverImage.previewUrl || null);\n      }\n    } catch (error) {\n      console.error('Error fetching gallery:', error);\n      toast.error('Failed to load gallery');\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n\n  const fetchPhotos = useCallback(async () => {\n    try {\n      const response = await axios.get(`/galleries/${id}/photos`);\n      setPhotos(response.data.photos || []);\n    } catch (error) {\n      console.error('Error fetching photos:', error);\n    }\n  }, [id]);\n\n  // Fetch share links\n  const fetchShareLinks = useCallback(async () => {\n    try {\n      setLoadingShares(true);\n      const response = await axios.get(`/galleries/${id}/shares`);\n      setShareLinks(response.data.shares || []);\n    } catch (error) {\n      console.error('Error fetching share links:', error);\n      toast.error('Failed to fetch share links');\n    } finally {\n      setLoadingShares(false);\n    }\n  }, [id]);\n\n  // Create share link\n  const createShareLink = async (shareData) => {\n    try {\n      const response = await axios.post(`/galleries/${id}/shares`, shareData);\n      setShareLinks(prev => [...prev, response.data.share]);\n      toast.success('Share link created successfully');\n      return response.data.share;\n    } catch (error) {\n      console.error('Error creating share link:', error);\n      toast.error(error.response?.data?.message || 'Failed to create share link');\n      throw error;\n    }\n  };\n\n  // Delete share link\n  const deleteShareLink = async (shareId) => {\n    try {\n      await axios.delete(`/galleries/${id}/shares/${shareId}`);\n      setShareLinks(prev => prev.filter(share => share._id !== shareId));\n      toast.success('Share link deleted successfully');\n    } catch (error) {\n      console.error('Error deleting share link:', error);\n      toast.error('Failed to delete share link');\n    }\n  };\n\n  // Fetch gallery data\n  useEffect(() => {\n    if (id) {\n      fetchGallery();\n      fetchPhotos();\n      fetchShareLinks();\n    }\n  }, [id, fetchGallery, fetchPhotos, fetchShareLinks]);\n\n  // Handle form input changes\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    \n    if (name.startsWith('settings.')) {\n      const settingName = name.split('.')[1];\n      setFormData(prev => ({\n        ...prev,\n        settings: {\n          ...prev.settings,\n          [settingName]: type === 'checkbox' ? checked : (settingName === 'watermarkIntensity' ? parseFloat(value) : value)\n        }\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: type === 'checkbox' ? checked : value\n      }));\n    }\n    \n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: null }));\n    }\n  };\n\n  // Handle cover image upload\n  const handleCoverImageChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.size > 10 * 1024 * 1024) {\n        toast.error('Cover image must be less than 10MB');\n        return;\n      }\n      \n      if (!file.type.startsWith('image/')) {\n        toast.error('Please select a valid image file');\n        return;\n      }\n      \n      setCoverImage(file);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => setCoverImagePreview(e.target.result);\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // Remove cover image\n  const removeCoverImage = () => {\n    setCoverImage(null);\n    setCoverImagePreview(null);\n  };\n\n  // Add collection\n  const addCollection = () => {\n    if (newCollection.trim() && !formData.collections.includes(newCollection.trim())) {\n      setFormData(prev => ({\n        ...prev,\n        collections: [...prev.collections, newCollection.trim()]\n      }));\n      setNewCollection('');\n    }\n  };\n\n  // Remove collection\n  const removeCollection = (index) => {\n    setFormData(prev => ({\n      ...prev,\n      collections: prev.collections.filter((_, i) => i !== index)\n    }));\n  };\n\n  // Validate form\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!formData.title.trim()) {\n      newErrors.title = 'Gallery title is required';\n    } else if (formData.title.length > 100) {\n      newErrors.title = 'Title cannot exceed 100 characters';\n    }\n    \n    if (!formData.description.trim()) {\n      newErrors.description = 'Gallery description is required';\n    } else if (formData.description.length > 1000) {\n      newErrors.description = 'Description cannot exceed 1000 characters';\n    }\n    \n    if (!formData.category) {\n      newErrors.category = 'Please select a category';\n    }\n    \n    if (formData.settings.requirePassword && !formData.settings.password.trim()) {\n      newErrors['settings.password'] = 'Password is required when password protection is enabled';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Save gallery changes\n  const handleSave = async () => {\n    if (!validateForm()) {\n      toast.error('Please fix the errors in the form');\n      return;\n    }\n    \n    setSaving(true);\n    \n    try {\n      const submitData = new FormData();\n      \n      // Prepare settings strictly matching backend schema\n      const rawSettings = { ...formData.settings };\n      const numericIntensity = typeof rawSettings.watermarkIntensity === 'number'\n        ? rawSettings.watermarkIntensity\n        : parseFloat(rawSettings.watermarkIntensity || 0.5);\n      const watermarkEnum = Number.isFinite(numericIntensity)\n        ? (numericIntensity <= 0.33 ? 'light' : (numericIntensity <= 0.66 ? 'medium' : 'heavy'))\n        : 'medium';\n      const settingsPayload = {\n        allowDownload: !!rawSettings.allowDownload,\n        showMetadata: !!rawSettings.showMetadata,\n        enableComments: !!rawSettings.enableComments,\n        watermarkIntensity: watermarkEnum,\n        sortOrder: ['newest', 'oldest', 'custom'].includes(rawSettings.sortOrder) ? rawSettings.sortOrder : 'newest',\n        inviteOnly: !!rawSettings.inviteOnly\n      };\n      const collectionsProcessed = (formData.collections || []).map(c => (c || '').toString().trim()).filter(Boolean);\n      \n      // Add gallery data\n      Object.keys(formData).forEach(key => {\n        if (key === 'settings') {\n          submitData.append('settings', JSON.stringify(settingsPayload));\n        } else if (key === 'collections') {\n          submitData.append('collections', JSON.stringify(collectionsProcessed));\n        } else {\n          submitData.append(key, formData[key]);\n        }\n      });\n      \n      // Add cover image if selected\n      if (coverImage) {\n        submitData.append('coverImage', coverImage);\n      }\n      \n      const response = await axios.put(`/galleries/${id}`, submitData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      toast.success('Gallery updated successfully!');\n      setGallery(response.data);\n      \n    } catch (error) {\n      console.error('Error updating gallery:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to update gallery';\n      toast.error(errorMessage);\n      \n      // Handle validation errors\n      if (error.response?.data?.errors) {\n        const validationErrors = {};\n        error.response.data.errors.forEach(err => {\n          validationErrors[err.path] = err.msg;\n        });\n        setErrors(validationErrors);\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Upload photos\n  const handlePhotoUpload = async (files) => {\n    if (!files || files.length === 0) return;\n    \n    setUploading(true);\n    \n    try {\n      const formData = new FormData();\n      for (let i = 0; i < files.length; i++) {\n        formData.append('photos', files[i]);\n      }\n      \n      const response = await axios.post(`/galleries/${id}/photos`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      toast.success(`${response.data.photos?.length || 0} photos uploaded successfully!`);\n      fetchPhotos(); // Refresh photos list\n      \n    } catch (error) {\n      console.error('Error uploading photos:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to upload photos';\n      toast.error(errorMessage);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Handle file input change\n  const handleFileInputChange = (e) => {\n    handlePhotoUpload(e.target.files);\n  };\n\n  // Drag and drop handlers\n  const [dragActive, setDragActive] = useState(false);\n\n  const handleDrag = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const files = Array.from(e.dataTransfer.files).filter(file => \n        file.type.startsWith('image/')\n      );\n      if (files.length > 0) {\n        handlePhotoUpload(files);\n      } else {\n        toast.error('Please drop only image files');\n      }\n    }\n  };\n\n  // Delete photo\n  const handleDeletePhoto = async (photoId) => {\n    if (!window.confirm('Are you sure you want to delete this photo?')) return;\n    \n    try {\n      await axios.delete(`/photos/${photoId}`);\n      toast.success('Photo deleted successfully');\n      fetchPhotos(); // Refresh photos list\n    } catch (error) {\n      console.error('Error deleting photo:', error);\n      toast.error('Failed to delete photo');\n    }\n  };\n\n  // Edit photo metadata\n  const handleEditPhoto = (photo) => {\n    setEditingPhoto(photo);\n    setPhotoMetadata({\n      title: photo.title || '',\n      description: photo.description || '',\n      tags: photo.tags || [],\n      artworkInfo: {\n        year: photo.artworkInfo?.year || '',\n        series: photo.artworkInfo?.series || '',\n        edition: photo.artworkInfo?.edition || '',\n        size: photo.artworkInfo?.size || '',\n        materials: photo.artworkInfo?.materials || '',\n        signature: photo.artworkInfo?.signature || ''\n      },\n      purchaseInfo: {\n        price: photo.purchaseInfo?.price || '',\n        priceOnRequest: photo.purchaseInfo?.priceOnRequest || false,\n        availability: photo.purchaseInfo?.availability || 'available',\n        shippingInfo: photo.purchaseInfo?.shippingInfo || '',\n        returnPolicy: photo.purchaseInfo?.returnPolicy || ''\n      },\n      context: {\n        artistStatement: photo.context?.artistStatement || '',\n        exhibitionHistory: photo.context?.exhibitionHistory || ''\n      }\n    });\n  };\n\n  // Save photo metadata\n  const handleSavePhotoMetadata = async () => {\n    if (!editingPhoto) return;\n    \n    try {\n      await axios.put(`/photos/${editingPhoto._id}`, photoMetadata);\n      toast.success('Photo metadata updated successfully');\n      setEditingPhoto(null);\n      fetchPhotos(); // Refresh photos list\n    } catch (error) {\n      console.error('Error updating photo metadata:', error);\n      toast.error('Failed to update photo metadata');\n    }\n  };\n\n  // Handle metadata input change\n  const handleMetadataChange = (field, value) => {\n    if (field.includes('.')) {\n      const [parent, child] = field.split('.');\n      setPhotoMetadata(prev => ({\n        ...prev,\n        [parent]: {\n          ...prev[parent],\n          [child]: value\n        }\n      }));\n    } else {\n      setPhotoMetadata(prev => ({\n        ...prev,\n        [field]: value\n      }));\n    }\n  };\n\n  // Toggle publish status\n  const handleTogglePublish = async () => {\n    try {\n      const newStatus = !formData.isPublished;\n      await axios.patch(`/galleries/${id}/status`, {\n        isPublished: newStatus\n      });\n      \n      setFormData(prev => ({ ...prev, isPublished: newStatus }));\n      toast.success(newStatus ? 'Gallery published!' : 'Gallery unpublished');\n      \n    } catch (error) {\n      console.error('Error toggling publish status:', error);\n      toast.error('Failed to update gallery status');\n    }\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Authentication Required</h2>\n          <p className=\"text-gray-600 mb-6\">Please log in to edit galleries.</p>\n          <Link to=\"/login\" className=\"btn-primary\">\n            Log In\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  if (!gallery) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Gallery Not Found</h2>\n          <p className=\"text-gray-600 mb-6\">The requested gallery could not be found.</p>\n          <Link to=\"/dashboard\" className=\"btn-primary\">\n            Back to Dashboard\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center space-x-4\">\n              <Link to=\"/dashboard\" className=\"text-gray-600 hover:text-gray-900\">\n                <ArrowLeftIcon className=\"w-5 h-5\" />\n              </Link>\n              <Link to=\"/\" className=\"text-2xl font-serif font-bold gradient-text\">\n                Gallery Pavilion\n              </Link>\n              <span className=\"text-sm text-gray-500\">/ Editing: {gallery.title}</span>\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={handleTogglePublish}\n                className={`px-4 py-2 rounded-lg font-medium ${\n                  formData.isPublished \n                    ? 'bg-green-100 text-green-800 hover:bg-green-200' \n                    : 'bg-gray-100 text-gray-800 hover:bg-gray-200'\n                } transition-colors`}\n              >\n                {formData.isPublished ? 'Published' : 'Draft'}\n              </button>\n              \n              <button\n                onClick={handleSave}\n                disabled={saving}\n                className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\"\n              >\n                {saving && <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>}\n                <span>{saving ? 'Saving...' : 'Save Changes'}</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n        >\n          {/* Tab Navigation */}\n          <div className=\"mb-8 border-b border-gray-200\">\n            <nav className=\"flex space-x-8\">\n              {[\n                { id: 'edit', label: 'Edit Gallery', icon: PencilIcon },\n                { id: 'photos', label: 'Photos', icon: PhotoIcon },\n                { id: 'share', label: 'Share Links', icon: ShareIcon },\n                { id: 'invitations', label: 'Invitations', icon: UserGroupIcon },\n                { id: 'settings', label: 'Settings', icon: Cog6ToothIcon }\n              ].map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors ${\n                    activeTab === tab.id\n                      ? 'border-primary-500 text-primary-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <tab.icon className=\"w-5 h-5\" />\n                  <span>{tab.label}</span>\n                </button>\n              ))}\n            </nav>\n          </div>\n\n          {/* Edit Tab */}\n          {activeTab === 'edit' && (\n            <div className=\"space-y-8\">\n              {/* Basic Information */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Basic Information</h2>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  {/* Title */}\n                  <div className=\"md:col-span-2\">\n                    <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Gallery Title *\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"title\"\n                      name=\"title\"\n                      value={formData.title}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors.title ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter gallery title\"\n                      maxLength={100}\n                    />\n                    {errors.title && <p className=\"mt-1 text-sm text-red-600\">{errors.title}</p>}\n                    <p className=\"mt-1 text-sm text-gray-500\">{formData.title.length}/100 characters</p>\n                  </div>\n\n                  {/* Category */}\n                  <div>\n                    <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Category *\n                    </label>\n                    <select\n                      id=\"category\"\n                      name=\"category\"\n                      value={formData.category}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors.category ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                    >\n                      <option value=\"\">Select a category</option>\n                      {categories.map(category => (\n                        <option key={category} value={category}>{category}</option>\n                      ))}\n                    </select>\n                    {errors.category && <p className=\"mt-1 text-sm text-red-600\">{errors.category}</p>}\n                  </div>\n\n                  {/* Collections */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Collections\n                    </label>\n                    <div className=\"flex space-x-2\">\n                      <input\n                        type=\"text\"\n                        value={newCollection}\n                        onChange={(e) => setNewCollection(e.target.value)}\n                        onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addCollection())}\n                        className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        placeholder=\"Add collection tag\"\n                        maxLength={50}\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={addCollection}\n                        className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\n                      >\n                        Add\n                      </button>\n                    </div>\n                    {formData.collections.length > 0 && (\n                      <div className=\"mt-2 flex flex-wrap gap-2\">\n                        {formData.collections.map((collection, index) => (\n                          <span\n                            key={index}\n                            className=\"inline-flex items-center px-3 py-1 bg-primary-100 text-primary-800 text-sm rounded-full\"\n                          >\n                            {collection}\n                            <button\n                              type=\"button\"\n                              onClick={() => removeCollection(index)}\n                              className=\"ml-2 text-primary-600 hover:text-primary-800\"\n                            >\n                              <XMarkIcon className=\"w-4 h-4\" />\n                            </button>\n                          </span>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Description */}\n                  <div className=\"md:col-span-2\">\n                    <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Description *\n                    </label>\n                    <textarea\n                      id=\"description\"\n                      name=\"description\"\n                      value={formData.description}\n                      onChange={handleInputChange}\n                      rows={4}\n                      className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors.description ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Describe your gallery\"\n                      maxLength={1000}\n                    />\n                    {errors.description && <p className=\"mt-1 text-sm text-red-600\">{errors.description}</p>}\n                    <p className=\"mt-1 text-sm text-gray-500\">{formData.description.length}/1000 characters</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Cover Image */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Cover Image</h2>\n                \n                {!coverImagePreview ? (\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                    <CloudArrowUpIcon className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-gray-600 mb-4\">Upload a cover image for your gallery</p>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleCoverImageChange}\n                      className=\"hidden\"\n                      id=\"coverImage\"\n                    />\n                    <label\n                      htmlFor=\"coverImage\"\n                      className=\"btn-secondary cursor-pointer\"\n                    >\n                      Choose Image\n                    </label>\n                    <p className=\"text-sm text-gray-500 mt-2\">PNG, JPG, GIF up to 10MB</p>\n                  </div>\n                ) : (\n                  <div className=\"relative\">\n                    <img\n                      src={coverImagePreview}\n                      alt=\"Cover preview\"\n                      className=\"w-full h-64 object-cover rounded-lg\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={removeCoverImage}\n                      className=\"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors\"\n                    >\n                      <XMarkIcon className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Photos Tab */}\n          {activeTab === 'photos' && (\n            <div className=\"space-y-6\">\n              {/* Upload Section */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Upload Photos</h2>\n                \n                <div \n                  className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n                    dragActive \n                      ? 'border-primary-500 bg-primary-50' \n                      : 'border-gray-300 hover:border-gray-400'\n                  }`}\n                  onDragEnter={handleDrag}\n                  onDragLeave={handleDrag}\n                  onDragOver={handleDrag}\n                  onDrop={handleDrop}\n                >\n                  <CloudArrowUpIcon className={`w-12 h-12 mx-auto mb-4 ${\n                    dragActive ? 'text-primary-500' : 'text-gray-400'\n                  }`} />\n                  <p className={`mb-4 ${\n                    dragActive ? 'text-primary-600' : 'text-gray-600'\n                  }`}>\n                    {dragActive ? 'Drop photos here!' : 'Drag and drop photos here, or click to browse'}\n                  </p>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleFileInputChange}\n                    multiple\n                    className=\"hidden\"\n                    id=\"photoUpload\"\n                    disabled={uploading}\n                  />\n                  <label\n                    htmlFor=\"photoUpload\"\n                    className={`btn-secondary cursor-pointer ${\n                      uploading ? 'opacity-50 cursor-not-allowed' : ''\n                    }`}\n                  >\n                    {uploading ? 'Uploading...' : 'Select Photos'}\n                  </label>\n                  <p className=\"text-sm text-gray-500 mt-2\">\n                    Up to 20 photos at once, 10MB each • Supports JPG, PNG, WEBP\n                  </p>\n                  {uploading && (\n                    <div className=\"mt-4\">\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                        <div className=\"bg-primary-600 h-2 rounded-full animate-pulse\" style={{width: '60%'}}></div>\n                      </div>\n                      <p className=\"text-sm text-gray-500 mt-2\">Processing images and generating watermarks...</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Photos Grid */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">\n                  Photos ({photos.length})\n                </h2>\n                \n                {photos.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <PhotoIcon className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-gray-600\">No photos uploaded yet</p>\n                    <p className=\"text-sm text-gray-500 mt-2\">Upload photos to get started</p>\n                  </div>\n                ) : (\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4\">\n                    {photos.map((photo) => (\n                      <div key={photo._id} className=\"group relative\">\n                        <img\n                          src={photo.previewUrl || `/uploads/photos/${photo.filename}`}\n                          alt={photo.title}\n                          className=\"w-full h-48 object-cover rounded-lg\"\n                        />\n                        <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100\">\n                          <div className=\"flex space-x-2\">\n                            <button className=\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\">\n                              <EyeIcon className=\"w-4 h-4 text-white\" />\n                            </button>\n                            <button \n                              onClick={() => handleEditPhoto(photo)}\n                              className=\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\"\n                            >\n                              <AdjustmentsHorizontalIcon className=\"w-4 h-4 text-white\" />\n                            </button>\n                            <button \n                              onClick={() => handleDeletePhoto(photo._id)}\n                              className=\"p-2 bg-red-600 hover:bg-red-700 rounded-full transition-colors\"\n                            >\n                              <TrashIcon className=\"w-4 h-4 text-white\" />\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Share Tab */}\n          {activeTab === 'share' && (\n            <div className=\"space-y-6\">\n              {/* Create New Share Link */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Create Share Link</h2>\n                <ShareLinkForm onCreateShare={createShareLink} />\n              </div>\n\n              {/* Existing Share Links */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Existing Share Links</h2>\n                {loadingShares ? (\n                  <div className=\"flex justify-center py-8\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n                  </div>\n                ) : shareLinks.length === 0 ? (\n                  <div className=\"text-center py-8 text-gray-500\">\n                    <ShareIcon className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\n                    <p>No share links created yet</p>\n                    <p className=\"text-sm\">Create your first share link above</p>\n                  </div>\n                ) : (\n                  <ShareLinksList \n                    shareLinks={shareLinks} \n                    onDeleteShare={deleteShareLink}\n                    galleryId={id}\n                  />\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Invitations Tab */}\n          {activeTab === 'invitations' && (\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <InviteManager \n                galleryId={id} \n                isInviteOnly={formData.settings.inviteOnly} \n              />\n            </div>\n          )}\n\n          {/* Settings Tab */}\n          {activeTab === 'settings' && (\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Gallery Settings</h2>\n              \n              <div className=\"space-y-6\">\n                {/* Basic Settings */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"allowDownload\"\n                      name=\"settings.allowDownload\"\n                      checked={formData.settings.allowDownload}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"allowDownload\" className=\"ml-2 block text-sm text-gray-700\">\n                      Allow photo downloads\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"showMetadata\"\n                      name=\"settings.showMetadata\"\n                      checked={formData.settings.showMetadata}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"showMetadata\" className=\"ml-2 block text-sm text-gray-700\">\n                      Show photo metadata\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"enableComments\"\n                      name=\"settings.enableComments\"\n                      checked={formData.settings.enableComments}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"enableComments\" className=\"ml-2 block text-sm text-gray-700\">\n                      Enable comments\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"requirePassword\"\n                      name=\"settings.requirePassword\"\n                      checked={formData.settings.requirePassword}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"requirePassword\" className=\"ml-2 block text-sm text-gray-700\">\n                      Require password for access\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"inviteOnly\"\n                      name=\"settings.inviteOnly\"\n                      checked={formData.settings.inviteOnly}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"inviteOnly\" className=\"ml-2 block text-sm text-gray-700\">\n                      Invite-only access (requires invitation code)\n                    </label>\n                  </div>\n                </div>\n\n                {/* Password Field */}\n                {formData.settings.requirePassword && (\n                  <div>\n                    <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Gallery Password *\n                    </label>\n                    <input\n                      type=\"password\"\n                      id=\"password\"\n                      name=\"settings.password\"\n                      value={formData.settings.password}\n                      onChange={handleInputChange}\n                      className={`w-full max-w-md px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors['settings.password'] ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter gallery password\"\n                    />\n                    {errors['settings.password'] && (\n                      <p className=\"mt-1 text-sm text-red-600\">{errors['settings.password']}</p>\n                    )}\n                  </div>\n                )}\n\n                {/* Watermark Intensity */}\n                <div>\n                  <label htmlFor=\"watermarkIntensity\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Watermark Intensity: {Math.round(formData.settings.watermarkIntensity * 100)}%\n                  </label>\n                  <input\n                    type=\"range\"\n                    id=\"watermarkIntensity\"\n                    name=\"settings.watermarkIntensity\"\n                    min=\"0\"\n                    max=\"1\"\n                    step=\"0.1\"\n                    value={formData.settings.watermarkIntensity}\n                    onChange={handleInputChange}\n                    className=\"w-full max-w-md\"\n                  />\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    Controls the opacity of watermarks on preview images\n                  </p>\n                </div>\n\n                {/* Danger Zone */}\n                <div className=\"border-t border-gray-200 pt-6 mt-6\">\n                  <h3 className=\"text-lg font-semibold text-red-700 mb-4\">Danger Zone</h3>\n                  <div className=\"space-y-4\">\n                    <button\n                      onClick={() => {\n                        if (window.confirm('Are you sure you want to delete this gallery? This action cannot be undone.')) {\n                          // Handle delete\n                        }\n                      }}\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n                    >\n                      Delete Gallery\n                    </button>\n                    <p className=\"text-sm text-gray-600\">\n                      Once deleted, the gallery and all its photos cannot be recovered.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </motion.div>\n      </main>\n\n      {/* Photo Metadata Editing Modal */}\n      {editingPhoto && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-2xl font-semibold text-gray-900\">Edit Photo Metadata</h2>\n                <button\n                  onClick={() => setEditingPhoto(null)}\n                  className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n                >\n                  <XMarkIcon className=\"w-6 h-6 text-gray-500\" />\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                {/* Photo Preview */}\n                <div>\n                  <img\n                    src={editingPhoto.previewUrl || `/uploads/photos/${editingPhoto.filename}`}\n                    alt={editingPhoto.title}\n                    className=\"w-full h-64 object-cover rounded-lg mb-4\"\n                  />\n                  <p className=\"text-sm text-gray-500\">Original: {editingPhoto.originalFilename}</p>\n                </div>\n\n                {/* Metadata Form */}\n                <div className=\"space-y-6\">\n                  {/* Basic Info */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Basic Information</h3>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Title</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.title}\n                          onChange={(e) => handleMetadataChange('title', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                        <textarea\n                          value={photoMetadata.description}\n                          onChange={(e) => handleMetadataChange('description', e.target.value)}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Artwork Information */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Artwork Information</h3>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Year</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo.year}\n                          onChange={(e) => handleMetadataChange('artworkInfo.year', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Series</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo.series}\n                          onChange={(e) => handleMetadataChange('artworkInfo.series', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Edition</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo.edition}\n                          onChange={(e) => handleMetadataChange('artworkInfo.edition', e.target.value)}\n                          placeholder=\"e.g., 1/50\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Size</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo.size}\n                          onChange={(e) => handleMetadataChange('artworkInfo.size', e.target.value)}\n                          placeholder=\"e.g., 24x36 inches\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div className=\"col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Materials</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo.materials}\n                          onChange={(e) => handleMetadataChange('artworkInfo.materials', e.target.value)}\n                          placeholder=\"e.g., Archival pigment print on cotton paper\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Purchase Information */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Purchase Information</h3>\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"flex-1\">\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Price</label>\n                          <input\n                            type=\"text\"\n                            value={photoMetadata.purchaseInfo.price}\n                            onChange={(e) => handleMetadataChange('purchaseInfo.price', e.target.value)}\n                            placeholder=\"$2,500\"\n                            disabled={photoMetadata.purchaseInfo.priceOnRequest}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100\"\n                          />\n                        </div>\n                        <div className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            id=\"priceOnRequest\"\n                            checked={photoMetadata.purchaseInfo.priceOnRequest}\n                            onChange={(e) => handleMetadataChange('purchaseInfo.priceOnRequest', e.target.checked)}\n                            className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                          />\n                          <label htmlFor=\"priceOnRequest\" className=\"ml-2 text-sm text-gray-700\">\n                            Price on Request\n                          </label>\n                        </div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Availability</label>\n                        <select\n                          value={photoMetadata.purchaseInfo.availability}\n                          onChange={(e) => handleMetadataChange('purchaseInfo.availability', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        >\n                          <option value=\"available\">Available</option>\n                          <option value=\"sold\">Sold</option>\n                          <option value=\"reserved\">Reserved</option>\n                          <option value=\"not-for-sale\">Not for Sale</option>\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"flex justify-end space-x-4 mt-8 pt-6 border-t\">\n                <button\n                  onClick={() => setEditingPhoto(null)}\n                  className=\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSavePhotoMetadata}\n                  className=\"px-4 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded-lg transition-colors\"\n                >\n                  Save Changes\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GalleryPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}