{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/Desktop/Gallerypavilion/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useRef}from'react';import{useParams,useSearchParams}from'react-router-dom';import{motion,AnimatePresence}from'framer-motion';import{Eye,Download,Heart,Share2,X,ChevronLeft,ChevronRight,ZoomIn,ZoomOut,RotateCw,Info,Camera,Calendar,MapPin,Lock,Unlock,Mail}from'lucide-react';import{toast}from'react-hot-toast';import axios from'axios';import Masonry from'react-masonry-css';import{LazyLoadImage}from'react-lazy-load-image-component';import'react-lazy-load-image-component/src/effects/blur.css';import'./GalleryView.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const GalleryView=_ref=>{var _selectedPhoto$metada,_selectedPhoto$metada2,_selectedPhoto$metada3,_selectedPhoto$metada4,_selectedPhoto$metada5;let{galleryId:propGalleryId,isSharedView=false}=_ref;const{galleryId:paramGalleryId}=useParams();const[searchParams]=useSearchParams();const token=searchParams.get('token');const password=searchParams.get('password');// Use prop galleryId if provided, otherwise use URL param\nconst galleryId=propGalleryId||paramGalleryId;// For shared view, treat galleryId as token\nconst actualToken=isSharedView?galleryId:token;const[gallery,setGallery]=useState(null);const[photos,setPhotos]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedPhoto,setSelectedPhoto]=useState(null);const[lightboxIndex,setLightboxIndex]=useState(0);const[showLightbox,setShowLightbox]=useState(false);const[showInfo,setShowInfo]=useState(false);const[zoom,setZoom]=useState(1);const[rotation,setRotation]=useState(0);const[favorites,setFavorites]=useState(new Set());const[shareLink,setShareLink]=useState('');const[passwordRequired,setPasswordRequired]=useState(false);const[invitationRequired,setInvitationRequired]=useState(false);const[enteredPassword,setEnteredPassword]=useState('');const[enteredInvitation,setEnteredInvitation]=useState('');const[passwordError,setPasswordError]=useState(null);const[invitationError,setInvitationError]=useState(null);const[retryCount,setRetryCount]=useState(0);const[showPasswordModal,setShowPasswordModal]=useState(false);const[showInvitationModal,setShowInvitationModal]=useState(false);const lightboxRef=useRef(null);const imageRef=useRef(null);// Masonry breakpoints\nconst breakpointColumnsObj={default:4,1100:3,700:2,500:1};// Verify password for protected share links\nconst verifyPassword=useCallback(async passwordToVerify=>{try{const response=await axios.post(\"/share/\".concat(actualToken,\"/verify-password\"),{password:passwordToVerify});return response.data.verified;}catch(err){console.error('Password verification failed:',err);return false;}},[actualToken]);// Fetch gallery data\nconst fetchGallery=useCallback(async function(){let verifiedPassword=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;try{var _data$gallery,_data$gallery2,_data$gallery3;setLoading(true);setError(null);const url=actualToken?\"/share/\".concat(actualToken):\"/galleries/\".concat(galleryId,\"/public\");const params={};if(actualToken&&(verifiedPassword||password)){params.password=verifiedPassword||password;}const response=await axios.get(url,{params});const data=response.data;// Normalize photographer info so UI can consistently use gallery.photographer.name and .email\nconst respPhotographer=data.photographer||((_data$gallery=data.gallery)===null||_data$gallery===void 0?void 0:_data$gallery.photographer);const normalizedPhotographer=respPhotographer&&typeof respPhotographer==='object'?_objectSpread(_objectSpread({},respPhotographer),{},{name:respPhotographer.name||\"\".concat(respPhotographer.firstName||'',\" \").concat(respPhotographer.lastName||'').trim(),email:respPhotographer.email||respPhotographer.clientEmail||undefined}):respPhotographer||undefined;const normalizedGallery=_objectSpread(_objectSpread({},data.gallery),{},{photographer:normalizedPhotographer||(typeof((_data$gallery2=data.gallery)===null||_data$gallery2===void 0?void 0:_data$gallery2.photographer)==='object'?_objectSpread(_objectSpread({},data.gallery.photographer),{},{name:data.gallery.photographer.name||\"\".concat(data.gallery.photographer.firstName||'',\" \").concat(data.gallery.photographer.lastName||'').trim()}):(_data$gallery3=data.gallery)===null||_data$gallery3===void 0?void 0:_data$gallery3.photographer)});setGallery(normalizedGallery);setPhotos(data.photos||[]);setShareLink(data.shareLink||'');}catch(err){var _err$response,_err$response2,_err$response2$data,_err$response3,_err$response4,_err$response4$data,_err$response5,_err$response6,_err$response7,_err$response8,_err$response9,_err$response9$data;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401&&(_err$response2=err.response)!==null&&_err$response2!==void 0&&(_err$response2$data=_err$response2.data)!==null&&_err$response2$data!==void 0&&_err$response2$data.requiresPassword){setPasswordRequired(true);setShowPasswordModal(true);return;}if(((_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.status)===403&&(_err$response4=err.response)!==null&&_err$response4!==void 0&&(_err$response4$data=_err$response4.data)!==null&&_err$response4$data!==void 0&&_err$response4$data.requiresInvitation){setInvitationRequired(true);setShowInvitationModal(true);return;}console.error('Error fetching gallery:',err);// Provide specific error messages based on status code\nlet errorMessage='Failed to load gallery';if(((_err$response5=err.response)===null||_err$response5===void 0?void 0:_err$response5.status)===404){errorMessage='Gallery not found or no longer available';}else if(((_err$response6=err.response)===null||_err$response6===void 0?void 0:_err$response6.status)===403){errorMessage='You do not have permission to access this gallery';}else if(((_err$response7=err.response)===null||_err$response7===void 0?void 0:_err$response7.status)===410){errorMessage='This gallery link has expired';}else if(((_err$response8=err.response)===null||_err$response8===void 0?void 0:_err$response8.status)>=500){errorMessage='Server error. Please try again later';}else if((_err$response9=err.response)!==null&&_err$response9!==void 0&&(_err$response9$data=_err$response9.data)!==null&&_err$response9$data!==void 0&&_err$response9$data.message){errorMessage=err.response.data.message;}else if(err.message.includes('Network Error')){errorMessage='Network error. Please check your connection and try again';}setError(errorMessage);setRetryCount(prev=>prev+1);}finally{setLoading(false);}},[galleryId,actualToken,password]);useEffect(()=>{fetchGallery();},[fetchGallery]);// Handle password submission\nconst handlePasswordSubmit=async e=>{e.preventDefault();setLoading(true);setPasswordError(null);try{// First verify the password\nconst isValid=await verifyPassword(enteredPassword);if(!isValid){setPasswordError('Incorrect password. Please try again.');setLoading(false);return;}// If password is valid, fetch gallery data\nsetPasswordRequired(false);setShowPasswordModal(false);setError(null);await fetchGallery(enteredPassword);setEnteredPassword('');}catch(err){var _err$response0,_err$response1,_err$response10;console.error('Password submission error:',err);if(((_err$response0=err.response)===null||_err$response0===void 0?void 0:_err$response0.status)===401){setPasswordError('Incorrect password. Please try again.');}else if(((_err$response1=err.response)===null||_err$response1===void 0?void 0:_err$response1.status)===404){setPasswordError('Gallery not found or no longer available.');}else if(((_err$response10=err.response)===null||_err$response10===void 0?void 0:_err$response10.status)>=500){setPasswordError('Server error. Please try again later.');}else{setPasswordError('Failed to access gallery. Please try again.');}}finally{setLoading(false);}};// Handle invitation code submission\nconst handleInvitationSubmit=async e=>{e.preventDefault();setLoading(true);setInvitationError(null);try{var _data$gallery4,_data$gallery5,_data$gallery6;// Fetch gallery data with invitation code\nconst url=actualToken?\"/share/\".concat(actualToken):\"/galleries/\".concat(galleryId,\"/public\");const params={invite:enteredInvitation};if(actualToken&&password){params.password=password;}const response=await axios.get(url,{params});const data=response.data;// Normalize photographer info for consistency\nconst respPhotographer=data.photographer||((_data$gallery4=data.gallery)===null||_data$gallery4===void 0?void 0:_data$gallery4.photographer);const normalizedPhotographer=respPhotographer&&typeof respPhotographer==='object'?_objectSpread(_objectSpread({},respPhotographer),{},{name:respPhotographer.name||\"\".concat(respPhotographer.firstName||'',\" \").concat(respPhotographer.lastName||'').trim(),email:respPhotographer.email||respPhotographer.clientEmail||undefined}):respPhotographer||undefined;const normalizedGallery=_objectSpread(_objectSpread({},data.gallery),{},{photographer:normalizedPhotographer||(typeof((_data$gallery5=data.gallery)===null||_data$gallery5===void 0?void 0:_data$gallery5.photographer)==='object'?_objectSpread(_objectSpread({},data.gallery.photographer),{},{name:data.gallery.photographer.name||\"\".concat(data.gallery.photographer.firstName||'',\" \").concat(data.gallery.photographer.lastName||'').trim()}):(_data$gallery6=data.gallery)===null||_data$gallery6===void 0?void 0:_data$gallery6.photographer)});setGallery(normalizedGallery);setPhotos(data.photos||[]);setShareLink(data.shareLink||'');setInvitationRequired(false);setShowInvitationModal(false);setError(null);setEnteredInvitation('');}catch(err){var _err$response11,_err$response12,_err$response13;console.error('Invitation submission error:',err);if(((_err$response11=err.response)===null||_err$response11===void 0?void 0:_err$response11.status)===403){setInvitationError('Invalid or expired invitation code. Please try again.');}else if(((_err$response12=err.response)===null||_err$response12===void 0?void 0:_err$response12.status)===404){setInvitationError('Gallery not found or no longer available.');}else if(((_err$response13=err.response)===null||_err$response13===void 0?void 0:_err$response13.status)>=500){setInvitationError('Server error. Please try again later.');}else{setInvitationError('Failed to access gallery. Please try again.');}}finally{setLoading(false);}};// Open lightbox\nconst openLightbox=(photo,index)=>{setSelectedPhoto(photo);setLightboxIndex(index);setShowLightbox(true);setZoom(1);setRotation(0);document.body.style.overflow='hidden';};// Close lightbox\nconst closeLightbox=()=>{setShowLightbox(false);setSelectedPhoto(null);setShowInfo(false);setZoom(1);setRotation(0);document.body.style.overflow='auto';};// Navigate lightbox\nconst navigateLightbox=direction=>{const newIndex=direction==='next'?(lightboxIndex+1)%photos.length:(lightboxIndex-1+photos.length)%photos.length;setLightboxIndex(newIndex);setSelectedPhoto(photos[newIndex]);setZoom(1);setRotation(0);};// Handle keyboard navigation\nuseEffect(()=>{const handleKeyPress=e=>{if(!showLightbox)return;switch(e.key){case'Escape':closeLightbox();break;case'ArrowLeft':navigateLightbox('prev');break;case'ArrowRight':navigateLightbox('next');break;case'i':case'I':setShowInfo(!showInfo);break;default:break;}};window.addEventListener('keydown',handleKeyPress);return()=>window.removeEventListener('keydown',handleKeyPress);},[showLightbox,showInfo,lightboxIndex]);// Toggle favorite\nconst toggleFavorite=photoId=>{const newFavorites=new Set(favorites);if(newFavorites.has(photoId)){newFavorites.delete(photoId);}else{newFavorites.add(photoId);}setFavorites(newFavorites);};// Share gallery\nconst shareGallery=async()=>{try{if(navigator.share){await navigator.share({title:gallery.title,text:gallery.description,url:window.location.href});}else{await navigator.clipboard.writeText(window.location.href);toast.success('Gallery link copied to clipboard!');}}catch(err){console.error('Error sharing:',err);toast.error('Failed to share gallery');}};// Download photo\nconst downloadPhoto=async photo=>{try{const response=await axios.get(\"/photos/\".concat(photo._id,\"/download\"),{params:token?{token}:undefined,responseType:'blob'});const blob=response.data;const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=photo.filename||\"photo-\".concat(photo._id,\".jpg\");document.body.appendChild(a);a.click();window.URL.revokeObjectURL(url);document.body.removeChild(a);toast.success('Photo downloaded successfully!');}catch(err){console.error('Error downloading photo:',err);toast.error('Failed to download photo');}};// Handle inquiry about a photo\nconst handleInquiry=photo=>{var _photo$metadata,_photo$metadata2,_photo$metadata2$purc;const subject=\"Inquiry about \\\"\".concat(photo.title||'Artwork',\"\\\"\");const body=\"Hi,\\n\\nI'm interested in learning more about the artwork \\\"\".concat(photo.title||'this piece',\"\\\"\").concat((_photo$metadata=photo.metadata)!==null&&_photo$metadata!==void 0&&_photo$metadata.artworkInfo?\" (\".concat(photo.metadata.artworkInfo.medium).concat(photo.metadata.artworkInfo.year?\", \".concat(photo.metadata.artworkInfo.year):'',\")\"):'',\".\\n\\n\").concat((_photo$metadata2=photo.metadata)!==null&&_photo$metadata2!==void 0&&(_photo$metadata2$purc=_photo$metadata2.purchaseInfo)!==null&&_photo$metadata2$purc!==void 0&&_photo$metadata2$purc.price?\"Listed price: $\".concat(photo.metadata.purchaseInfo.price.toLocaleString(),\"\\n\\n\"):'',\"Please provide more information about:\\n- Availability\\n- Pricing details\\n- Shipping information\\n- Any additional details\\n\\nThank you!\");const recipient=gallery&&gallery.photographer&&gallery.photographer.email?gallery.photographer.email:'';const mailtoLink=\"mailto:\".concat(encodeURIComponent(recipient),\"?subject=\").concat(encodeURIComponent(subject),\"&body=\").concat(encodeURIComponent(body));window.open(mailtoLink,'_blank');};// Format date\nconst formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});};// Format camera settings\nconst formatCameraSettings=exif=>{if(!exif)return null;const settings=[];if(exif.fNumber)settings.push(\"f/\".concat(exif.fNumber));if(exif.exposureTime)settings.push(\"\".concat(exif.exposureTime,\"s\"));if(exif.iso)settings.push(\"ISO \".concat(exif.iso));if(exif.focalLength)settings.push(\"\".concat(exif.focalLength,\"mm\"));return settings.length>0?settings.join(' â€¢ '):null;};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"gallery-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading gallery...\"})]});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"gallery-error\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"error-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Unable to Load Gallery\"}),/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"error-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setError(null);setRetryCount(0);fetchGallery();},className:\"retry-button\",disabled:loading,children:loading?'Retrying...':'Try Again'}),retryCount>2&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/',className:\"home-button\",children:\"Go to Homepage\"})]}),retryCount>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-help\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Still having trouble? Try:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Checking your internet connection\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Refreshing the page\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Contacting the gallery owner\"})]})]})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"gallery-view\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:showPasswordModal&&/*#__PURE__*/_jsx(motion.div,{className:\"password-modal-overlay\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:/*#__PURE__*/_jsxs(motion.div,{className:\"password-modal\",initial:{scale:0.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0.9,opacity:0},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"password-modal-header\",children:[/*#__PURE__*/_jsx(Lock,{className:\"lock-icon\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Password Required\"}),/*#__PURE__*/_jsx(\"p\",{children:\"This gallery is password protected\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePasswordSubmit,className:\"password-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"password-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:enteredPassword,onChange:e=>{setEnteredPassword(e.target.value);setPasswordError(null);// Clear error when user types\n},placeholder:\"Enter password\",className:\"password-input \".concat(passwordError?'error':''),autoFocus:true,required:true,disabled:loading}),passwordError&&/*#__PURE__*/_jsxs(\"div\",{className:\"password-error\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"error-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:passwordError})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"password-submit\",disabled:loading||!enteredPassword.trim(),children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),\"Verifying...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Unlock,{className:\"unlock-icon\"}),\"Access Gallery\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"password-modal-footer\",children:/*#__PURE__*/_jsx(\"p\",{className:\"help-text\",children:\"Don't have the password? Contact the gallery owner.\"})})]})})}),/*#__PURE__*/_jsx(AnimatePresence,{children:showInvitationModal&&/*#__PURE__*/_jsx(motion.div,{className:\"password-modal-overlay\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:/*#__PURE__*/_jsxs(motion.div,{className:\"password-modal\",initial:{scale:0.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0.9,opacity:0},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"password-modal-header\",children:[/*#__PURE__*/_jsx(Lock,{className:\"lock-icon\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Invitation Required\"}),/*#__PURE__*/_jsx(\"p\",{children:\"This gallery is invite-only. Please enter your invitation code.\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleInvitationSubmit,className:\"password-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"password-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:enteredInvitation,onChange:e=>{setEnteredInvitation(e.target.value);setInvitationError(null);// Clear error when user types\n},placeholder:\"Enter invitation code\",className:\"password-input \".concat(invitationError?'error':''),autoFocus:true,required:true,disabled:loading}),invitationError&&/*#__PURE__*/_jsxs(\"div\",{className:\"password-error\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"error-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:invitationError})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"password-submit\",disabled:loading||!enteredInvitation.trim(),children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),\"Verifying...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Unlock,{className:\"unlock-icon\"}),\"Access Gallery\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"password-modal-footer\",children:/*#__PURE__*/_jsx(\"p\",{className:\"help-text\",children:\"Don't have an invitation code? Contact the gallery owner.\"})})]})})}),gallery&&/*#__PURE__*/_jsxs(\"div\",{className:\"gallery-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gallery-info\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"gallery-title\",children:gallery.title}),gallery.description&&/*#__PURE__*/_jsx(\"p\",{className:\"gallery-description\",children:gallery.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"gallery-meta\",children:[gallery.photographer&&/*#__PURE__*/_jsxs(\"div\",{className:\"photographer-info\",children:[/*#__PURE__*/_jsx(Camera,{className:\"meta-icon\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"by \",gallery.photographer.name]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"photo-count\",children:[/*#__PURE__*/_jsx(Eye,{className:\"meta-icon\"}),/*#__PURE__*/_jsxs(\"span\",{children:[photos.length,\" photos\"]})]}),gallery.createdAt&&/*#__PURE__*/_jsxs(\"div\",{className:\"gallery-date\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"meta-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(gallery.createdAt)})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery-actions\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:shareGallery,className:\"action-button\",children:[/*#__PURE__*/_jsx(Share2,{className:\"action-icon\"}),\"Share\"]})})]}),photos.length>0?/*#__PURE__*/_jsx(Masonry,{breakpointCols:breakpointColumnsObj,className:\"photo-masonry\",columnClassName:\"photo-masonry-column\",children:photos.map((photo,index)=>/*#__PURE__*/_jsx(motion.div,{className:\"photo-item\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:index*0.1},onClick:()=>openLightbox(photo,index),children:/*#__PURE__*/_jsxs(\"div\",{className:\"photo-container\",children:[/*#__PURE__*/_jsx(LazyLoadImage,{src:photo.previewUrl||photo.thumbnailUrl||photo.url,alt:photo.title||'Gallery photo',effect:\"blur\",className:\"photo-image\",placeholderSrc:photo.thumbnailUrl}),/*#__PURE__*/_jsxs(\"div\",{className:\"photo-overlay\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"photo-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"favorite-button \".concat(favorites.has(photo._id)?'active':''),onClick:e=>{e.stopPropagation();toggleFavorite(photo._id);},children:/*#__PURE__*/_jsx(Heart,{className:\"action-icon\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"download-button\",onClick:e=>{e.stopPropagation();downloadPhoto(photo);},children:/*#__PURE__*/_jsx(Download,{className:\"action-icon\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"photo-info\",children:[photo.title&&/*#__PURE__*/_jsx(\"div\",{className:\"photo-title\",children:photo.title}),photo.metadata&&/*#__PURE__*/_jsxs(\"div\",{className:\"photo-metadata\",children:[photo.metadata.description&&/*#__PURE__*/_jsx(\"p\",{className:\"photo-description\",children:photo.metadata.description}),photo.metadata.artworkInfo&&/*#__PURE__*/_jsxs(\"div\",{className:\"artwork-info\",children:[photo.metadata.artworkInfo.medium&&/*#__PURE__*/_jsx(\"span\",{className:\"artwork-medium\",children:photo.metadata.artworkInfo.medium}),photo.metadata.artworkInfo.dimensions&&/*#__PURE__*/_jsx(\"span\",{className:\"artwork-dimensions\",children:photo.metadata.artworkInfo.dimensions}),photo.metadata.artworkInfo.year&&/*#__PURE__*/_jsx(\"span\",{className:\"artwork-year\",children:photo.metadata.artworkInfo.year})]}),photo.metadata.purchaseInfo&&photo.metadata.purchaseInfo.price&&/*#__PURE__*/_jsxs(\"div\",{className:\"photo-price\",children:[\"$\",photo.metadata.purchaseInfo.price.toLocaleString()]}),photo.metadata.purchaseInfo&&photo.metadata.purchaseInfo.available&&/*#__PURE__*/_jsx(\"button\",{className:\"inquiry-button\",onClick:e=>{e.stopPropagation();handleInquiry(photo);},children:\"Inquire\"})]})]})]})]})},photo._id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-gallery\",children:[/*#__PURE__*/_jsx(Camera,{className:\"empty-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No photos in this gallery\"}),/*#__PURE__*/_jsx(\"p\",{children:\"This gallery doesn't contain any photos yet.\"})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:showLightbox&&selectedPhoto&&/*#__PURE__*/_jsx(motion.div,{className:\"lightbox-overlay\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:closeLightbox,ref:lightboxRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"lightbox-container\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lightbox-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lightbox-title\",children:selectedPhoto.title||\"Photo \".concat(lightboxIndex+1,\" of \").concat(photos.length)}),/*#__PURE__*/_jsxs(\"div\",{className:\"lightbox-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"lightbox-button\",onClick:()=>setShowInfo(!showInfo),title:\"Toggle Info\",children:/*#__PURE__*/_jsx(Info,{className:\"control-icon\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"lightbox-button\",onClick:()=>downloadPhoto(selectedPhoto),title:\"Download\",children:/*#__PURE__*/_jsx(Download,{className:\"control-icon\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"lightbox-button\",onClick:closeLightbox,title:\"Close\",children:/*#__PURE__*/_jsx(X,{className:\"control-icon\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lightbox-content\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"lightbox-nav lightbox-nav-prev\",onClick:()=>navigateLightbox('prev'),disabled:photos.length<=1,children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"nav-icon\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"lightbox-nav lightbox-nav-next\",onClick:()=>navigateLightbox('next'),disabled:photos.length<=1,children:/*#__PURE__*/_jsx(ChevronRight,{className:\"nav-icon\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"lightbox-image-container\",children:/*#__PURE__*/_jsx(\"img\",{ref:imageRef,src:selectedPhoto.url,alt:selectedPhoto.title||'Gallery photo',className:\"lightbox-image\",style:{transform:\"scale(\".concat(zoom,\") rotate(\").concat(rotation,\"deg)\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lightbox-zoom-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"zoom-button\",onClick:()=>setZoom(Math.max(0.5,zoom-0.25)),disabled:zoom<=0.5,children:/*#__PURE__*/_jsx(ZoomOut,{className:\"zoom-icon\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"zoom-level\",children:[Math.round(zoom*100),\"%\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"zoom-button\",onClick:()=>setZoom(Math.min(3,zoom+0.25)),disabled:zoom>=3,children:/*#__PURE__*/_jsx(ZoomIn,{className:\"zoom-icon\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"rotate-button\",onClick:()=>setRotation((rotation+90)%360),children:/*#__PURE__*/_jsx(RotateCw,{className:\"rotate-icon\"})})]})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:showInfo&&/*#__PURE__*/_jsxs(motion.div,{className:\"photo-info-panel\",initial:{x:'100%'},animate:{x:0},exit:{x:'100%'},transition:{type:'spring',damping:25,stiffness:200},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Photo Information\"}),/*#__PURE__*/_jsx(\"button\",{className:\"info-close\",onClick:()=>setShowInfo(false),children:/*#__PURE__*/_jsx(X,{className:\"close-icon\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-content\",children:[selectedPhoto.title&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedPhoto.title})]}),((_selectedPhoto$metada=selectedPhoto.metadata)===null||_selectedPhoto$metada===void 0?void 0:_selectedPhoto$metada.description)&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedPhoto.metadata.description})]}),((_selectedPhoto$metada2=selectedPhoto.metadata)===null||_selectedPhoto$metada2===void 0?void 0:_selectedPhoto$metada2.artworkInfo)&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-section\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"section-title\",children:\"Artwork Details\"}),selectedPhoto.metadata.artworkInfo.medium&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Medium\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedPhoto.metadata.artworkInfo.medium})]}),selectedPhoto.metadata.artworkInfo.dimensions&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Dimensions\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedPhoto.metadata.artworkInfo.dimensions})]}),selectedPhoto.metadata.artworkInfo.year&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Year\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedPhoto.metadata.artworkInfo.year})]}),selectedPhoto.metadata.artworkInfo.artist&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Artist\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedPhoto.metadata.artworkInfo.artist})]})]}),((_selectedPhoto$metada3=selectedPhoto.metadata)===null||_selectedPhoto$metada3===void 0?void 0:_selectedPhoto$metada3.purchaseInfo)&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-section\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"section-title\",children:\"Purchase Information\"}),selectedPhoto.metadata.purchaseInfo.price&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item price-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"price-value\",children:[\"$\",selectedPhoto.metadata.purchaseInfo.price.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Availability\"}),/*#__PURE__*/_jsx(\"span\",{className:\"availability \".concat(selectedPhoto.metadata.purchaseInfo.available?'available':'unavailable'),children:selectedPhoto.metadata.purchaseInfo.available?'Available':'Sold'})]}),selectedPhoto.metadata.purchaseInfo.edition&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Edition\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedPhoto.metadata.purchaseInfo.edition})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-section\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"section-title\",children:\"Technical Details\"}),selectedPhoto.dateTaken&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date Taken\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(selectedPhoto.dateTaken)})]}),selectedPhoto.location&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedPhoto.location})]}),selectedPhoto.exifData&&/*#__PURE__*/_jsxs(_Fragment,{children:[selectedPhoto.exifData.camera&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Camera\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedPhoto.exifData.camera})]}),selectedPhoto.exifData.lens&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Lens\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedPhoto.exifData.lens})]}),formatCameraSettings(selectedPhoto.exifData)&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Settings\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCameraSettings(selectedPhoto.exifData)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Dimensions\"}),/*#__PURE__*/_jsxs(\"span\",{children:[selectedPhoto.width,\" \\xD7 \",selectedPhoto.height]})]}),selectedPhoto.fileSize&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"File Size\"}),/*#__PURE__*/_jsxs(\"span\",{children:[(selectedPhoto.fileSize/1024/1024).toFixed(2),\" MB\"]})]})]}),((_selectedPhoto$metada4=selectedPhoto.metadata)===null||_selectedPhoto$metada4===void 0?void 0:(_selectedPhoto$metada5=_selectedPhoto$metada4.purchaseInfo)===null||_selectedPhoto$metada5===void 0?void 0:_selectedPhoto$metada5.available)&&/*#__PURE__*/_jsx(\"div\",{className:\"info-section inquiry-section\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"inquiry-button-large\",onClick:()=>handleInquiry(selectedPhoto),children:[/*#__PURE__*/_jsx(Mail,{className:\"inquiry-icon\"}),\"Inquire About This Artwork\"]})})]})]})})]})})})]});};export default GalleryView;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useParams","useSearchParams","motion","AnimatePresence","Eye","Download","Heart","Share2","X","ChevronLeft","ChevronRight","ZoomIn","ZoomOut","RotateCw","Info","Camera","Calendar","MapPin","Lock","Unlock","Mail","toast","axios","Masonry","LazyLoadImage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GalleryView","_ref","_selectedPhoto$metada","_selectedPhoto$metada2","_selectedPhoto$metada3","_selectedPhoto$metada4","_selectedPhoto$metada5","galleryId","propGalleryId","isSharedView","paramGalleryId","searchParams","token","get","password","actualToken","gallery","setGallery","photos","setPhotos","loading","setLoading","error","setError","selectedPhoto","setSelectedPhoto","lightboxIndex","setLightboxIndex","showLightbox","setShowLightbox","showInfo","setShowInfo","zoom","setZoom","rotation","setRotation","favorites","setFavorites","Set","shareLink","setShareLink","passwordRequired","setPasswordRequired","invitationRequired","setInvitationRequired","enteredPassword","setEnteredPassword","enteredInvitation","setEnteredInvitation","passwordError","setPasswordError","invitationError","setInvitationError","retryCount","setRetryCount","showPasswordModal","setShowPasswordModal","showInvitationModal","setShowInvitationModal","lightboxRef","imageRef","breakpointColumnsObj","default","verifyPassword","passwordToVerify","response","post","concat","data","verified","err","console","fetchGallery","verifiedPassword","arguments","length","undefined","_data$gallery","_data$gallery2","_data$gallery3","url","params","respPhotographer","photographer","normalizedPhotographer","_objectSpread","name","firstName","lastName","trim","email","clientEmail","normalizedGallery","_err$response","_err$response2","_err$response2$data","_err$response3","_err$response4","_err$response4$data","_err$response5","_err$response6","_err$response7","_err$response8","_err$response9","_err$response9$data","status","requiresPassword","requiresInvitation","errorMessage","message","includes","prev","handlePasswordSubmit","e","preventDefault","isValid","_err$response0","_err$response1","_err$response10","handleInvitationSubmit","_data$gallery4","_data$gallery5","_data$gallery6","invite","_err$response11","_err$response12","_err$response13","openLightbox","photo","index","document","body","style","overflow","closeLightbox","navigateLightbox","direction","newIndex","handleKeyPress","key","window","addEventListener","removeEventListener","toggleFavorite","photoId","newFavorites","has","delete","add","shareGallery","navigator","share","title","text","description","location","href","clipboard","writeText","success","downloadPhoto","_id","responseType","blob","URL","createObjectURL","a","createElement","download","filename","appendChild","click","revokeObjectURL","removeChild","handleInquiry","_photo$metadata","_photo$metadata2","_photo$metadata2$purc","subject","metadata","artworkInfo","medium","year","purchaseInfo","price","toLocaleString","recipient","mailtoLink","encodeURIComponent","open","formatDate","dateString","Date","toLocaleDateString","month","day","formatCameraSettings","exif","settings","fNumber","push","exposureTime","iso","focalLength","join","className","children","onClick","disabled","div","initial","opacity","animate","exit","scale","onSubmit","type","value","onChange","target","placeholder","autoFocus","required","createdAt","breakpointCols","columnClassName","map","y","transition","delay","src","previewUrl","thumbnailUrl","alt","effect","placeholderSrc","stopPropagation","dimensions","available","ref","transform","Math","max","round","min","x","damping","stiffness","artist","edition","dateTaken","exifData","camera","lens","width","height","fileSize","toFixed"],"sources":["C:/Users/USER/Desktop/Gallerypavilion/frontend/src/components/Gallery/GalleryView.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useParams, useSearchParams } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Eye, \n  Download, \n  Heart, \n  Share2, \n  X, \n  ChevronLeft, \n  ChevronRight,\n  ZoomIn,\n  ZoomOut,\n  RotateCw,\n  Info,\n  Camera,\n  Calendar,\n  MapPin,\n  Lock,\n  Unlock,\n  Mail\n} from 'lucide-react';\nimport { toast } from 'react-hot-toast';\nimport axios from 'axios';\nimport Masonry from 'react-masonry-css';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport 'react-lazy-load-image-component/src/effects/blur.css';\nimport './GalleryView.css';\n\nconst GalleryView = ({ galleryId: propGalleryId, isSharedView = false }) => {\n  const { galleryId: paramGalleryId } = useParams();\n  const [searchParams] = useSearchParams();\n  const token = searchParams.get('token');\n  const password = searchParams.get('password');\n  \n  // Use prop galleryId if provided, otherwise use URL param\n  const galleryId = propGalleryId || paramGalleryId;\n  // For shared view, treat galleryId as token\n  const actualToken = isSharedView ? galleryId : token;\n  \n  const [gallery, setGallery] = useState(null);\n  const [photos, setPhotos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedPhoto, setSelectedPhoto] = useState(null);\n  const [lightboxIndex, setLightboxIndex] = useState(0);\n  const [showLightbox, setShowLightbox] = useState(false);\n  const [showInfo, setShowInfo] = useState(false);\n  const [zoom, setZoom] = useState(1);\n  const [rotation, setRotation] = useState(0);\n  const [favorites, setFavorites] = useState(new Set());\n  const [shareLink, setShareLink] = useState('');\n  const [passwordRequired, setPasswordRequired] = useState(false);\n  const [invitationRequired, setInvitationRequired] = useState(false);\n  const [enteredPassword, setEnteredPassword] = useState('');\n  const [enteredInvitation, setEnteredInvitation] = useState('');\n  const [passwordError, setPasswordError] = useState(null);\n  const [invitationError, setInvitationError] = useState(null);\n  const [retryCount, setRetryCount] = useState(0);\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\n  const [showInvitationModal, setShowInvitationModal] = useState(false);\n  \n  const lightboxRef = useRef(null);\n  const imageRef = useRef(null);\n  \n  // Masonry breakpoints\n  const breakpointColumnsObj = {\n    default: 4,\n    1100: 3,\n    700: 2,\n    500: 1\n  };\n  \n  // Verify password for protected share links\n  const verifyPassword = useCallback(async (passwordToVerify) => {\n    try {\n      const response = await axios.post(`/share/${actualToken}/verify-password`, {\n        password: passwordToVerify\n      });\n      return response.data.verified;\n    } catch (err) {\n      console.error('Password verification failed:', err);\n      return false;\n    }\n  }, [actualToken]);\n\n  // Fetch gallery data\n  const fetchGallery = useCallback(async (verifiedPassword = null) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const url = actualToken\n        ? `/share/${actualToken}`\n        : `/galleries/${galleryId}/public`;\n\n      const params = {};\n      if (actualToken && (verifiedPassword || password)) {\n        params.password = verifiedPassword || password;\n      }\n\n      const response = await axios.get(url, { params });\n      const data = response.data;\n\n      // Normalize photographer info so UI can consistently use gallery.photographer.name and .email\n      const respPhotographer = data.photographer || data.gallery?.photographer;\n      const normalizedPhotographer = respPhotographer && typeof respPhotographer === 'object'\n        ? {\n            ...respPhotographer,\n            name: respPhotographer.name || `${respPhotographer.firstName || ''} ${respPhotographer.lastName || ''}`.trim(),\n            email: respPhotographer.email || respPhotographer.clientEmail || undefined,\n          }\n        : respPhotographer || undefined;\n      const normalizedGallery = {\n        ...data.gallery,\n        photographer: normalizedPhotographer || (typeof data.gallery?.photographer === 'object'\n          ? {\n              ...data.gallery.photographer,\n              name: data.gallery.photographer.name || `${data.gallery.photographer.firstName || ''} ${data.gallery.photographer.lastName || ''}`.trim(),\n            }\n          : data.gallery?.photographer),\n      };\n\n      setGallery(normalizedGallery);\n      setPhotos(data.photos || []);\n      setShareLink(data.shareLink || '');\n    } catch (err) {\n      if (err.response?.status === 401 && err.response?.data?.requiresPassword) {\n        setPasswordRequired(true);\n        setShowPasswordModal(true);\n        return;\n      }\n      \n      if (err.response?.status === 403 && err.response?.data?.requiresInvitation) {\n        setInvitationRequired(true);\n        setShowInvitationModal(true);\n        return;\n      }\n      console.error('Error fetching gallery:', err);\n      \n      // Provide specific error messages based on status code\n      let errorMessage = 'Failed to load gallery';\n      if (err.response?.status === 404) {\n        errorMessage = 'Gallery not found or no longer available';\n      } else if (err.response?.status === 403) {\n        errorMessage = 'You do not have permission to access this gallery';\n      } else if (err.response?.status === 410) {\n        errorMessage = 'This gallery link has expired';\n      } else if (err.response?.status >= 500) {\n        errorMessage = 'Server error. Please try again later';\n      } else if (err.response?.data?.message) {\n        errorMessage = err.response.data.message;\n      } else if (err.message.includes('Network Error')) {\n        errorMessage = 'Network error. Please check your connection and try again';\n      }\n      \n      setError(errorMessage);\n      setRetryCount(prev => prev + 1);\n    } finally {\n      setLoading(false);\n    }\n  }, [galleryId, actualToken, password]);\n  \n  useEffect(() => {\n    fetchGallery();\n  }, [fetchGallery]);\n  \n  // Handle password submission\n  const handlePasswordSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setPasswordError(null);\n    \n    try {\n      // First verify the password\n      const isValid = await verifyPassword(enteredPassword);\n      \n      if (!isValid) {\n        setPasswordError('Incorrect password. Please try again.');\n        setLoading(false);\n        return;\n      }\n      \n      // If password is valid, fetch gallery data\n      setPasswordRequired(false);\n      setShowPasswordModal(false);\n      setError(null);\n      await fetchGallery(enteredPassword);\n      setEnteredPassword('');\n    } catch (err) {\n      console.error('Password submission error:', err);\n      if (err.response?.status === 401) {\n        setPasswordError('Incorrect password. Please try again.');\n      } else if (err.response?.status === 404) {\n        setPasswordError('Gallery not found or no longer available.');\n      } else if (err.response?.status >= 500) {\n        setPasswordError('Server error. Please try again later.');\n      } else {\n        setPasswordError('Failed to access gallery. Please try again.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle invitation code submission\n  const handleInvitationSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setInvitationError(null);\n    \n    try {\n      // Fetch gallery data with invitation code\n      const url = actualToken\n        ? `/share/${actualToken}`\n        : `/galleries/${galleryId}/public`;\n\n      const params = { invite: enteredInvitation };\n      if (actualToken && password) {\n        params.password = password;\n      }\n\n      const response = await axios.get(url, { params });\n      const data = response.data;\n\n      // Normalize photographer info for consistency\n      const respPhotographer = data.photographer || data.gallery?.photographer;\n      const normalizedPhotographer = respPhotographer && typeof respPhotographer === 'object'\n        ? {\n            ...respPhotographer,\n            name: respPhotographer.name || `${respPhotographer.firstName || ''} ${respPhotographer.lastName || ''}`.trim(),\n            email: respPhotographer.email || respPhotographer.clientEmail || undefined,\n          }\n        : respPhotographer || undefined;\n      const normalizedGallery = {\n        ...data.gallery,\n        photographer: normalizedPhotographer || (typeof data.gallery?.photographer === 'object'\n          ? {\n              ...data.gallery.photographer,\n              name: data.gallery.photographer.name || `${data.gallery.photographer.firstName || ''} ${data.gallery.photographer.lastName || ''}`.trim(),\n            }\n          : data.gallery?.photographer),\n      };\n\n      setGallery(normalizedGallery);\n      setPhotos(data.photos || []);\n      setShareLink(data.shareLink || '');\n      setInvitationRequired(false);\n      setShowInvitationModal(false);\n      setError(null);\n      setEnteredInvitation('');\n    } catch (err) {\n      console.error('Invitation submission error:', err);\n      if (err.response?.status === 403) {\n        setInvitationError('Invalid or expired invitation code. Please try again.');\n      } else if (err.response?.status === 404) {\n        setInvitationError('Gallery not found or no longer available.');\n      } else if (err.response?.status >= 500) {\n        setInvitationError('Server error. Please try again later.');\n      } else {\n        setInvitationError('Failed to access gallery. Please try again.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  // Open lightbox\n  const openLightbox = (photo, index) => {\n    setSelectedPhoto(photo);\n    setLightboxIndex(index);\n    setShowLightbox(true);\n    setZoom(1);\n    setRotation(0);\n    document.body.style.overflow = 'hidden';\n  };\n  \n  // Close lightbox\n  const closeLightbox = () => {\n    setShowLightbox(false);\n    setSelectedPhoto(null);\n    setShowInfo(false);\n    setZoom(1);\n    setRotation(0);\n    document.body.style.overflow = 'auto';\n  };\n  \n  // Navigate lightbox\n  const navigateLightbox = (direction) => {\n    const newIndex = direction === 'next' \n      ? (lightboxIndex + 1) % photos.length\n      : (lightboxIndex - 1 + photos.length) % photos.length;\n    \n    setLightboxIndex(newIndex);\n    setSelectedPhoto(photos[newIndex]);\n    setZoom(1);\n    setRotation(0);\n  };\n  \n  // Handle keyboard navigation\n  useEffect(() => {\n    const handleKeyPress = (e) => {\n      if (!showLightbox) return;\n      \n      switch (e.key) {\n        case 'Escape':\n          closeLightbox();\n          break;\n        case 'ArrowLeft':\n          navigateLightbox('prev');\n          break;\n        case 'ArrowRight':\n          navigateLightbox('next');\n          break;\n        case 'i':\n        case 'I':\n          setShowInfo(!showInfo);\n          break;\n        default:\n          break;\n      }\n    };\n    \n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [showLightbox, showInfo, lightboxIndex]);\n  \n  // Toggle favorite\n  const toggleFavorite = (photoId) => {\n    const newFavorites = new Set(favorites);\n    if (newFavorites.has(photoId)) {\n      newFavorites.delete(photoId);\n    } else {\n      newFavorites.add(photoId);\n    }\n    setFavorites(newFavorites);\n  };\n  \n  // Share gallery\n  const shareGallery = async () => {\n    try {\n      if (navigator.share) {\n        await navigator.share({\n          title: gallery.title,\n          text: gallery.description,\n          url: window.location.href\n        });\n      } else {\n        await navigator.clipboard.writeText(window.location.href);\n        toast.success('Gallery link copied to clipboard!');\n      }\n    } catch (err) {\n      console.error('Error sharing:', err);\n      toast.error('Failed to share gallery');\n    }\n  };\n  \n  // Download photo\n  const downloadPhoto = async (photo) => {\n    try {\n      const response = await axios.get(`/photos/${photo._id}/download`, {\n        params: token ? { token } : undefined,\n        responseType: 'blob',\n      });\n      const blob = response.data;\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = photo.filename || `photo-${photo._id}.jpg`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n\n      toast.success('Photo downloaded successfully!');\n    } catch (err) {\n      console.error('Error downloading photo:', err);\n      toast.error('Failed to download photo');\n    }\n  };\n  \n  // Handle inquiry about a photo\n  const handleInquiry = (photo) => {\n    const subject = `Inquiry about \"${photo.title || 'Artwork'}\"`;\n    const body = `Hi,\\n\\nI'm interested in learning more about the artwork \"${photo.title || 'this piece'}\"${photo.metadata?.artworkInfo ? ` (${photo.metadata.artworkInfo.medium}${photo.metadata.artworkInfo.year ? `, ${photo.metadata.artworkInfo.year}` : ''})` : ''}.\\n\\n${photo.metadata?.purchaseInfo?.price ? `Listed price: $${photo.metadata.purchaseInfo.price.toLocaleString()}\\n\\n` : ''}Please provide more information about:\\n- Availability\\n- Pricing details\\n- Shipping information\\n- Any additional details\\n\\nThank you!`;\n    const recipient = (gallery && gallery.photographer && gallery.photographer.email) ? gallery.photographer.email : '';\n    const mailtoLink = `mailto:${encodeURIComponent(recipient)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n    window.open(mailtoLink, '_blank');\n  };\n  \n  // Format date\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n  \n  // Format camera settings\n  const formatCameraSettings = (exif) => {\n    if (!exif) return null;\n    \n    const settings = [];\n    if (exif.fNumber) settings.push(`f/${exif.fNumber}`);\n    if (exif.exposureTime) settings.push(`${exif.exposureTime}s`);\n    if (exif.iso) settings.push(`ISO ${exif.iso}`);\n    if (exif.focalLength) settings.push(`${exif.focalLength}mm`);\n    \n    return settings.length > 0 ? settings.join(' â€¢ ') : null;\n  };\n  \n\n  \n  if (loading) {\n    return (\n      <div className=\"gallery-loading\">\n        <div className=\"loading-spinner\"></div>\n        <p>Loading gallery...</p>\n      </div>\n    );\n  }\n  \n  if (error) {\n    return (\n      <div className=\"gallery-error\">\n        <div className=\"error-content\">\n          <div className=\"error-icon\">âš ï¸</div>\n          <h2>Unable to Load Gallery</h2>\n          <p className=\"error-message\">{error}</p>\n          \n          <div className=\"error-actions\">\n            <button \n              onClick={() => {\n                setError(null);\n                setRetryCount(0);\n                fetchGallery();\n              }} \n              className=\"retry-button\"\n              disabled={loading}\n            >\n              {loading ? 'Retrying...' : 'Try Again'}\n            </button>\n            \n            {retryCount > 2 && (\n              <button \n                onClick={() => window.location.href = '/'} \n                className=\"home-button\"\n              >\n                Go to Homepage\n              </button>\n            )}\n          </div>\n          \n          {retryCount > 1 && (\n            <div className=\"error-help\">\n              <p>Still having trouble? Try:</p>\n              <ul>\n                <li>Checking your internet connection</li>\n                <li>Refreshing the page</li>\n                <li>Contacting the gallery owner</li>\n              </ul>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"gallery-view\">\n      {/* Password Modal */}\n      <AnimatePresence>\n        {showPasswordModal && (\n          <motion.div \n            className=\"password-modal-overlay\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n          >\n            <motion.div \n              className=\"password-modal\"\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n            >\n              <div className=\"password-modal-header\">\n                <Lock className=\"lock-icon\" />\n                <h2>Password Required</h2>\n                <p>This gallery is password protected</p>\n              </div>\n              \n              <form onSubmit={handlePasswordSubmit} className=\"password-form\">\n                <div className=\"password-input-container\">\n                  <input\n                    type=\"password\"\n                    value={enteredPassword}\n                    onChange={(e) => {\n                      setEnteredPassword(e.target.value);\n                      setPasswordError(null); // Clear error when user types\n                    }}\n                    placeholder=\"Enter password\"\n                    className={`password-input ${passwordError ? 'error' : ''}`}\n                    autoFocus\n                    required\n                    disabled={loading}\n                  />\n                  {passwordError && (\n                    <div className=\"password-error\">\n                      <span className=\"error-icon\">âš ï¸</span>\n                      <span className=\"error-text\">{passwordError}</span>\n                    </div>\n                  )}\n                </div>\n                \n                <button \n                  type=\"submit\" \n                  className=\"password-submit\"\n                  disabled={loading || !enteredPassword.trim()}\n                >\n                  {loading ? (\n                    <>\n                      <div className=\"loading-spinner\"></div>\n                      Verifying...\n                    </>\n                  ) : (\n                    <>\n                      <Unlock className=\"unlock-icon\" />\n                      Access Gallery\n                    </>\n                  )}\n                </button>\n              </form>\n              \n              <div className=\"password-modal-footer\">\n                <p className=\"help-text\">\n                  Don't have the password? Contact the gallery owner.\n                </p>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Invitation Modal */}\n      <AnimatePresence>\n        {showInvitationModal && (\n          <motion.div \n            className=\"password-modal-overlay\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n          >\n            <motion.div \n              className=\"password-modal\"\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n            >\n              <div className=\"password-modal-header\">\n                <Lock className=\"lock-icon\" />\n                <h2>Invitation Required</h2>\n                <p>This gallery is invite-only. Please enter your invitation code.</p>\n              </div>\n              \n              <form onSubmit={handleInvitationSubmit} className=\"password-form\">\n                <div className=\"password-input-container\">\n                  <input\n                    type=\"text\"\n                    value={enteredInvitation}\n                    onChange={(e) => {\n                      setEnteredInvitation(e.target.value);\n                      setInvitationError(null); // Clear error when user types\n                    }}\n                    placeholder=\"Enter invitation code\"\n                    className={`password-input ${invitationError ? 'error' : ''}`}\n                    autoFocus\n                    required\n                    disabled={loading}\n                  />\n                  {invitationError && (\n                    <div className=\"password-error\">\n                      <span className=\"error-icon\">âš ï¸</span>\n                      <span className=\"error-text\">{invitationError}</span>\n                    </div>\n                  )}\n                </div>\n                \n                <button \n                  type=\"submit\" \n                  className=\"password-submit\"\n                  disabled={loading || !enteredInvitation.trim()}\n                >\n                  {loading ? (\n                    <>\n                      <div className=\"loading-spinner\"></div>\n                      Verifying...\n                    </>\n                  ) : (\n                    <>\n                      <Unlock className=\"unlock-icon\" />\n                      Access Gallery\n                    </>\n                  )}\n                </button>\n              </form>\n              \n              <div className=\"password-modal-footer\">\n                <p className=\"help-text\">\n                  Don't have an invitation code? Contact the gallery owner.\n                </p>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n      \n      {/* Gallery Header */}\n      {gallery && (\n        <div className=\"gallery-header\">\n          <div className=\"gallery-info\">\n            <h1 className=\"gallery-title\">{gallery.title}</h1>\n            {gallery.description && (\n              <p className=\"gallery-description\">{gallery.description}</p>\n            )}\n            \n            <div className=\"gallery-meta\">\n              {gallery.photographer && (\n                <div className=\"photographer-info\">\n                  <Camera className=\"meta-icon\" />\n                  <span>by {gallery.photographer.name}</span>\n                </div>\n              )}\n              \n              <div className=\"photo-count\">\n                <Eye className=\"meta-icon\" />\n                <span>{photos.length} photos</span>\n              </div>\n              \n              {gallery.createdAt && (\n                <div className=\"gallery-date\">\n                  <Calendar className=\"meta-icon\" />\n                  <span>{formatDate(gallery.createdAt)}</span>\n                </div>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"gallery-actions\">\n            <button onClick={shareGallery} className=\"action-button\">\n              <Share2 className=\"action-icon\" />\n              Share\n            </button>\n          </div>\n        </div>\n      )}\n      \n      {/* Photo Grid */}\n      {photos.length > 0 ? (\n        <Masonry\n          breakpointCols={breakpointColumnsObj}\n          className=\"photo-masonry\"\n          columnClassName=\"photo-masonry-column\"\n        >\n          {photos.map((photo, index) => (\n            <motion.div\n              key={photo._id}\n              className=\"photo-item\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.1 }}\n              onClick={() => openLightbox(photo, index)}\n            >\n              <div className=\"photo-container\">\n                <LazyLoadImage\n                  src={photo.previewUrl || photo.thumbnailUrl || photo.url}\n                  alt={photo.title || 'Gallery photo'}\n                  effect=\"blur\"\n                  className=\"photo-image\"\n                  placeholderSrc={photo.thumbnailUrl}\n                />\n                \n                <div className=\"photo-overlay\">\n                  <div className=\"photo-actions\">\n                    <button \n                      className={`favorite-button ${favorites.has(photo._id) ? 'active' : ''}`}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        toggleFavorite(photo._id);\n                      }}\n                    >\n                      <Heart className=\"action-icon\" />\n                    </button>\n                    \n                    <button \n                      className=\"download-button\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        downloadPhoto(photo);\n                      }}\n                    >\n                      <Download className=\"action-icon\" />\n                    </button>\n                  </div>\n                  \n                  <div className=\"photo-info\">\n                    {photo.title && (\n                      <div className=\"photo-title\">{photo.title}</div>\n                    )}\n                    \n                    {photo.metadata && (\n                      <div className=\"photo-metadata\">\n                        {photo.metadata.description && (\n                          <p className=\"photo-description\">{photo.metadata.description}</p>\n                        )}\n                        \n                        {photo.metadata.artworkInfo && (\n                          <div className=\"artwork-info\">\n                            {photo.metadata.artworkInfo.medium && (\n                              <span className=\"artwork-medium\">{photo.metadata.artworkInfo.medium}</span>\n                            )}\n                            {photo.metadata.artworkInfo.dimensions && (\n                              <span className=\"artwork-dimensions\">{photo.metadata.artworkInfo.dimensions}</span>\n                            )}\n                            {photo.metadata.artworkInfo.year && (\n                              <span className=\"artwork-year\">{photo.metadata.artworkInfo.year}</span>\n                            )}\n                          </div>\n                        )}\n                        \n                        {photo.metadata.purchaseInfo && photo.metadata.purchaseInfo.price && (\n                          <div className=\"photo-price\">\n                            ${photo.metadata.purchaseInfo.price.toLocaleString()}\n                          </div>\n                        )}\n                        \n                        {photo.metadata.purchaseInfo && photo.metadata.purchaseInfo.available && (\n                          <button \n                            className=\"inquiry-button\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleInquiry(photo);\n                            }}\n                          >\n                            Inquire\n                          </button>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </Masonry>\n      ) : (\n        <div className=\"empty-gallery\">\n          <Camera className=\"empty-icon\" />\n          <h3>No photos in this gallery</h3>\n          <p>This gallery doesn't contain any photos yet.</p>\n        </div>\n      )}\n      \n      {/* Lightbox */}\n      <AnimatePresence>\n        {showLightbox && selectedPhoto && (\n          <motion.div \n            className=\"lightbox-overlay\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={closeLightbox}\n            ref={lightboxRef}\n          >\n            <div className=\"lightbox-container\" onClick={(e) => e.stopPropagation()}>\n              {/* Lightbox Header */}\n              <div className=\"lightbox-header\">\n                <div className=\"lightbox-title\">\n                  {selectedPhoto.title || `Photo ${lightboxIndex + 1} of ${photos.length}`}\n                </div>\n                \n                <div className=\"lightbox-controls\">\n                  <button \n                    className=\"lightbox-button\"\n                    onClick={() => setShowInfo(!showInfo)}\n                    title=\"Toggle Info\"\n                  >\n                    <Info className=\"control-icon\" />\n                  </button>\n                  \n                  <button \n                    className=\"lightbox-button\"\n                    onClick={() => downloadPhoto(selectedPhoto)}\n                    title=\"Download\"\n                  >\n                    <Download className=\"control-icon\" />\n                  </button>\n                  \n                  <button \n                    className=\"lightbox-button\"\n                    onClick={closeLightbox}\n                    title=\"Close\"\n                  >\n                    <X className=\"control-icon\" />\n                  </button>\n                </div>\n              </div>\n              \n              {/* Lightbox Content */}\n              <div className=\"lightbox-content\">\n                {/* Navigation */}\n                <button \n                  className=\"lightbox-nav lightbox-nav-prev\"\n                  onClick={() => navigateLightbox('prev')}\n                  disabled={photos.length <= 1}\n                >\n                  <ChevronLeft className=\"nav-icon\" />\n                </button>\n                \n                <button \n                  className=\"lightbox-nav lightbox-nav-next\"\n                  onClick={() => navigateLightbox('next')}\n                  disabled={photos.length <= 1}\n                >\n                  <ChevronRight className=\"nav-icon\" />\n                </button>\n                \n                {/* Image */}\n                <div className=\"lightbox-image-container\">\n                  <img\n                    ref={imageRef}\n                    src={selectedPhoto.url}\n                    alt={selectedPhoto.title || 'Gallery photo'}\n                    className=\"lightbox-image\"\n                    style={{\n                      transform: `scale(${zoom}) rotate(${rotation}deg)`\n                    }}\n                  />\n                </div>\n                \n                {/* Zoom Controls */}\n                <div className=\"lightbox-zoom-controls\">\n                  <button \n                    className=\"zoom-button\"\n                    onClick={() => setZoom(Math.max(0.5, zoom - 0.25))}\n                    disabled={zoom <= 0.5}\n                  >\n                    <ZoomOut className=\"zoom-icon\" />\n                  </button>\n                  \n                  <span className=\"zoom-level\">{Math.round(zoom * 100)}%</span>\n                  \n                  <button \n                    className=\"zoom-button\"\n                    onClick={() => setZoom(Math.min(3, zoom + 0.25))}\n                    disabled={zoom >= 3}\n                  >\n                    <ZoomIn className=\"zoom-icon\" />\n                  </button>\n                  \n                  <button \n                    className=\"rotate-button\"\n                    onClick={() => setRotation((rotation + 90) % 360)}\n                  >\n                    <RotateCw className=\"rotate-icon\" />\n                  </button>\n                </div>\n              </div>\n              \n              {/* Photo Info Panel */}\n              <AnimatePresence>\n                {showInfo && (\n                  <motion.div \n                    className=\"photo-info-panel\"\n                    initial={{ x: '100%' }}\n                    animate={{ x: 0 }}\n                    exit={{ x: '100%' }}\n                    transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n                  >\n                    <div className=\"info-header\">\n                      <h3>Photo Information</h3>\n                      <button \n                        className=\"info-close\"\n                        onClick={() => setShowInfo(false)}\n                      >\n                        <X className=\"close-icon\" />\n                      </button>\n                    </div>\n                    \n                    <div className=\"info-content\">\n                      {selectedPhoto.title && (\n                        <div className=\"info-item\">\n                          <label>Title</label>\n                          <span>{selectedPhoto.title}</span>\n                        </div>\n                      )}\n                      \n                      {selectedPhoto.metadata?.description && (\n                        <div className=\"info-item\">\n                          <label>Description</label>\n                          <span>{selectedPhoto.metadata.description}</span>\n                        </div>\n                      )}\n                      \n                      {/* Artwork Information */}\n                      {selectedPhoto.metadata?.artworkInfo && (\n                        <div className=\"info-section\">\n                          <h4 className=\"section-title\">Artwork Details</h4>\n                          \n                          {selectedPhoto.metadata.artworkInfo.medium && (\n                            <div className=\"info-item\">\n                              <label>Medium</label>\n                              <span>{selectedPhoto.metadata.artworkInfo.medium}</span>\n                            </div>\n                          )}\n                          \n                          {selectedPhoto.metadata.artworkInfo.dimensions && (\n                            <div className=\"info-item\">\n                              <label>Dimensions</label>\n                              <span>{selectedPhoto.metadata.artworkInfo.dimensions}</span>\n                            </div>\n                          )}\n                          \n                          {selectedPhoto.metadata.artworkInfo.year && (\n                            <div className=\"info-item\">\n                              <label>Year</label>\n                              <span>{selectedPhoto.metadata.artworkInfo.year}</span>\n                            </div>\n                          )}\n                          \n                          {selectedPhoto.metadata.artworkInfo.artist && (\n                            <div className=\"info-item\">\n                              <label>Artist</label>\n                              <span>{selectedPhoto.metadata.artworkInfo.artist}</span>\n                            </div>\n                          )}\n                        </div>\n                      )}\n                      \n                      {/* Purchase Information */}\n                      {selectedPhoto.metadata?.purchaseInfo && (\n                        <div className=\"info-section\">\n                          <h4 className=\"section-title\">Purchase Information</h4>\n                          \n                          {selectedPhoto.metadata.purchaseInfo.price && (\n                            <div className=\"info-item price-item\">\n                              <label>Price</label>\n                              <span className=\"price-value\">${selectedPhoto.metadata.purchaseInfo.price.toLocaleString()}</span>\n                            </div>\n                          )}\n                          \n                          <div className=\"info-item\">\n                            <label>Availability</label>\n                            <span className={`availability ${selectedPhoto.metadata.purchaseInfo.available ? 'available' : 'unavailable'}`}>\n                              {selectedPhoto.metadata.purchaseInfo.available ? 'Available' : 'Sold'}\n                            </span>\n                          </div>\n                          \n                          {selectedPhoto.metadata.purchaseInfo.edition && (\n                            <div className=\"info-item\">\n                              <label>Edition</label>\n                              <span>{selectedPhoto.metadata.purchaseInfo.edition}</span>\n                            </div>\n                          )}\n                        </div>\n                      )}\n                      \n                      {/* Technical Information */}\n                      <div className=\"info-section\">\n                        <h4 className=\"section-title\">Technical Details</h4>\n                        \n                        {selectedPhoto.dateTaken && (\n                          <div className=\"info-item\">\n                            <label>Date Taken</label>\n                            <span>{formatDate(selectedPhoto.dateTaken)}</span>\n                          </div>\n                        )}\n                        \n                        {selectedPhoto.location && (\n                          <div className=\"info-item\">\n                            <label>Location</label>\n                            <span>{selectedPhoto.location}</span>\n                          </div>\n                        )}\n                        \n                        {selectedPhoto.exifData && (\n                          <>\n                            {selectedPhoto.exifData.camera && (\n                              <div className=\"info-item\">\n                                <label>Camera</label>\n                                <span>{selectedPhoto.exifData.camera}</span>\n                              </div>\n                            )}\n                            \n                            {selectedPhoto.exifData.lens && (\n                              <div className=\"info-item\">\n                                <label>Lens</label>\n                                <span>{selectedPhoto.exifData.lens}</span>\n                              </div>\n                            )}\n                            \n                            {formatCameraSettings(selectedPhoto.exifData) && (\n                              <div className=\"info-item\">\n                                <label>Settings</label>\n                                <span>{formatCameraSettings(selectedPhoto.exifData)}</span>\n                              </div>\n                            )}\n                          </>\n                        )}\n                        \n                        <div className=\"info-item\">\n                          <label>Dimensions</label>\n                          <span>{selectedPhoto.width} Ã— {selectedPhoto.height}</span>\n                        </div>\n                        \n                        {selectedPhoto.fileSize && (\n                          <div className=\"info-item\">\n                            <label>File Size</label>\n                            <span>{(selectedPhoto.fileSize / 1024 / 1024).toFixed(2)} MB</span>\n                          </div>\n                        )}\n                      </div>\n                      \n                      {/* Inquiry Section */}\n                      {selectedPhoto.metadata?.purchaseInfo?.available && (\n                        <div className=\"info-section inquiry-section\">\n                          <button \n                            className=\"inquiry-button-large\"\n                            onClick={() => handleInquiry(selectedPhoto)}\n                          >\n                            <Mail className=\"inquiry-icon\" />\n                            Inquire About This Artwork\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n             </div>\n           </motion.div>\n         )}\n       </AnimatePresence>\n     </div>\n   );\n };\n \n export default GalleryView;\n\n"],"mappings":"mIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,CAAEC,MAAM,KAAQ,OAAO,CACvE,OAASC,SAAS,CAAEC,eAAe,KAAQ,kBAAkB,CAC7D,OAASC,MAAM,CAAEC,eAAe,KAAQ,eAAe,CACvD,OACEC,GAAG,CACHC,QAAQ,CACRC,KAAK,CACLC,MAAM,CACNC,CAAC,CACDC,WAAW,CACXC,YAAY,CACZC,MAAM,CACNC,OAAO,CACPC,QAAQ,CACRC,IAAI,CACJC,MAAM,CACNC,QAAQ,CACRC,MAAM,CACNC,IAAI,CACJC,MAAM,CACNC,IAAI,KACC,cAAc,CACrB,OAASC,KAAK,KAAQ,iBAAiB,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,mBAAmB,CACvC,OAASC,aAAa,KAAQ,iCAAiC,CAC/D,MAAO,sDAAsD,CAC7D,MAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE3B,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAAwD,KAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,IAAvD,CAAEC,SAAS,CAAEC,aAAa,CAAEC,YAAY,CAAG,KAAM,CAAC,CAAAR,IAAA,CACrE,KAAM,CAAEM,SAAS,CAAEG,cAAe,CAAC,CAAGzC,SAAS,CAAC,CAAC,CACjD,KAAM,CAAC0C,YAAY,CAAC,CAAGzC,eAAe,CAAC,CAAC,CACxC,KAAM,CAAA0C,KAAK,CAAGD,YAAY,CAACE,GAAG,CAAC,OAAO,CAAC,CACvC,KAAM,CAAAC,QAAQ,CAAGH,YAAY,CAACE,GAAG,CAAC,UAAU,CAAC,CAE7C;AACA,KAAM,CAAAN,SAAS,CAAGC,aAAa,EAAIE,cAAc,CACjD;AACA,KAAM,CAAAK,WAAW,CAAGN,YAAY,CAAGF,SAAS,CAAGK,KAAK,CAEpD,KAAM,CAACI,OAAO,CAAEC,UAAU,CAAC,CAAGpD,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACqD,MAAM,CAAEC,SAAS,CAAC,CAAGtD,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACuD,OAAO,CAAEC,UAAU,CAAC,CAAGxD,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACyD,KAAK,CAAEC,QAAQ,CAAC,CAAG1D,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAC2D,aAAa,CAAEC,gBAAgB,CAAC,CAAG5D,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAAC6D,aAAa,CAAEC,gBAAgB,CAAC,CAAG9D,QAAQ,CAAC,CAAC,CAAC,CACrD,KAAM,CAAC+D,YAAY,CAAEC,eAAe,CAAC,CAAGhE,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACiE,QAAQ,CAAEC,WAAW,CAAC,CAAGlE,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACmE,IAAI,CAAEC,OAAO,CAAC,CAAGpE,QAAQ,CAAC,CAAC,CAAC,CACnC,KAAM,CAACqE,QAAQ,CAAEC,WAAW,CAAC,CAAGtE,QAAQ,CAAC,CAAC,CAAC,CAC3C,KAAM,CAACuE,SAAS,CAAEC,YAAY,CAAC,CAAGxE,QAAQ,CAAC,GAAI,CAAAyE,GAAG,CAAC,CAAC,CAAC,CACrD,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAG3E,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC4E,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG7E,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAAC8E,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG/E,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAACgF,eAAe,CAAEC,kBAAkB,CAAC,CAAGjF,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAACkF,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGnF,QAAQ,CAAC,EAAE,CAAC,CAC9D,KAAM,CAACoF,aAAa,CAAEC,gBAAgB,CAAC,CAAGrF,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACsF,eAAe,CAAEC,kBAAkB,CAAC,CAAGvF,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACwF,UAAU,CAAEC,aAAa,CAAC,CAAGzF,QAAQ,CAAC,CAAC,CAAC,CAC/C,KAAM,CAAC0F,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG3F,QAAQ,CAAC,KAAK,CAAC,CACjE,KAAM,CAAC4F,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG7F,QAAQ,CAAC,KAAK,CAAC,CAErE,KAAM,CAAA8F,WAAW,CAAG3F,MAAM,CAAC,IAAI,CAAC,CAChC,KAAM,CAAA4F,QAAQ,CAAG5F,MAAM,CAAC,IAAI,CAAC,CAE7B;AACA,KAAM,CAAA6F,oBAAoB,CAAG,CAC3BC,OAAO,CAAE,CAAC,CACV,IAAI,CAAE,CAAC,CACP,GAAG,CAAE,CAAC,CACN,GAAG,CAAE,CACP,CAAC,CAED;AACA,KAAM,CAAAC,cAAc,CAAGhG,WAAW,CAAC,KAAO,CAAAiG,gBAAgB,EAAK,CAC7D,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA1E,KAAK,CAAC2E,IAAI,WAAAC,MAAA,CAAWpD,WAAW,qBAAoB,CACzED,QAAQ,CAAEkD,gBACZ,CAAC,CAAC,CACF,MAAO,CAAAC,QAAQ,CAACG,IAAI,CAACC,QAAQ,CAC/B,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACjD,KAAK,CAAC,+BAA+B,CAAEgD,GAAG,CAAC,CACnD,MAAO,MAAK,CACd,CACF,CAAC,CAAE,CAACvD,WAAW,CAAC,CAAC,CAEjB;AACA,KAAM,CAAAyD,YAAY,CAAGzG,WAAW,CAAC,gBAAmC,IAA5B,CAAA0G,gBAAgB,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CAC7D,GAAI,KAAAG,aAAA,CAAAC,cAAA,CAAAC,cAAA,CACF1D,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,KAAM,CAAAyD,GAAG,CAAGjE,WAAW,WAAAoD,MAAA,CACTpD,WAAW,gBAAAoD,MAAA,CACP5D,SAAS,WAAS,CAEpC,KAAM,CAAA0E,MAAM,CAAG,CAAC,CAAC,CACjB,GAAIlE,WAAW,GAAK0D,gBAAgB,EAAI3D,QAAQ,CAAC,CAAE,CACjDmE,MAAM,CAACnE,QAAQ,CAAG2D,gBAAgB,EAAI3D,QAAQ,CAChD,CAEA,KAAM,CAAAmD,QAAQ,CAAG,KAAM,CAAA1E,KAAK,CAACsB,GAAG,CAACmE,GAAG,CAAE,CAAEC,MAAO,CAAC,CAAC,CACjD,KAAM,CAAAb,IAAI,CAAGH,QAAQ,CAACG,IAAI,CAE1B;AACA,KAAM,CAAAc,gBAAgB,CAAGd,IAAI,CAACe,YAAY,IAAAN,aAAA,CAAIT,IAAI,CAACpD,OAAO,UAAA6D,aAAA,iBAAZA,aAAA,CAAcM,YAAY,EACxE,KAAM,CAAAC,sBAAsB,CAAGF,gBAAgB,EAAI,MAAO,CAAAA,gBAAgB,GAAK,QAAQ,CAAAG,aAAA,CAAAA,aAAA,IAE9EH,gBAAgB,MACnBI,IAAI,CAAEJ,gBAAgB,CAACI,IAAI,EAAI,GAAAnB,MAAA,CAAGe,gBAAgB,CAACK,SAAS,EAAI,EAAE,MAAApB,MAAA,CAAIe,gBAAgB,CAACM,QAAQ,EAAI,EAAE,EAAGC,IAAI,CAAC,CAAC,CAC9GC,KAAK,CAAER,gBAAgB,CAACQ,KAAK,EAAIR,gBAAgB,CAACS,WAAW,EAAIf,SAAS,GAE5EM,gBAAgB,EAAIN,SAAS,CACjC,KAAM,CAAAgB,iBAAiB,CAAAP,aAAA,CAAAA,aAAA,IAClBjB,IAAI,CAACpD,OAAO,MACfmE,YAAY,CAAEC,sBAAsB,GAAK,QAAAN,cAAA,CAAOV,IAAI,CAACpD,OAAO,UAAA8D,cAAA,iBAAZA,cAAA,CAAcK,YAAY,IAAK,QAAQ,CAAAE,aAAA,CAAAA,aAAA,IAE9EjB,IAAI,CAACpD,OAAO,CAACmE,YAAY,MAC5BG,IAAI,CAAElB,IAAI,CAACpD,OAAO,CAACmE,YAAY,CAACG,IAAI,EAAI,GAAAnB,MAAA,CAAGC,IAAI,CAACpD,OAAO,CAACmE,YAAY,CAACI,SAAS,EAAI,EAAE,MAAApB,MAAA,CAAIC,IAAI,CAACpD,OAAO,CAACmE,YAAY,CAACK,QAAQ,EAAI,EAAE,EAAGC,IAAI,CAAC,CAAC,IAAAV,cAAA,CAE3IX,IAAI,CAACpD,OAAO,UAAA+D,cAAA,iBAAZA,cAAA,CAAcI,YAAY,CAAC,EAChC,CAEDlE,UAAU,CAAC2E,iBAAiB,CAAC,CAC7BzE,SAAS,CAACiD,IAAI,CAAClD,MAAM,EAAI,EAAE,CAAC,CAC5BsB,YAAY,CAAC4B,IAAI,CAAC7B,SAAS,EAAI,EAAE,CAAC,CACpC,CAAE,MAAO+B,GAAG,CAAE,KAAAuB,aAAA,CAAAC,cAAA,CAAAC,mBAAA,CAAAC,cAAA,CAAAC,cAAA,CAAAC,mBAAA,CAAAC,cAAA,CAAAC,cAAA,CAAAC,cAAA,CAAAC,cAAA,CAAAC,cAAA,CAAAC,mBAAA,CACZ,GAAI,EAAAX,aAAA,CAAAvB,GAAG,CAACL,QAAQ,UAAA4B,aAAA,iBAAZA,aAAA,CAAcY,MAAM,IAAK,GAAG,GAAAX,cAAA,CAAIxB,GAAG,CAACL,QAAQ,UAAA6B,cAAA,YAAAC,mBAAA,CAAZD,cAAA,CAAc1B,IAAI,UAAA2B,mBAAA,WAAlBA,mBAAA,CAAoBW,gBAAgB,CAAE,CACxEhE,mBAAmB,CAAC,IAAI,CAAC,CACzBc,oBAAoB,CAAC,IAAI,CAAC,CAC1B,OACF,CAEA,GAAI,EAAAwC,cAAA,CAAA1B,GAAG,CAACL,QAAQ,UAAA+B,cAAA,iBAAZA,cAAA,CAAcS,MAAM,IAAK,GAAG,GAAAR,cAAA,CAAI3B,GAAG,CAACL,QAAQ,UAAAgC,cAAA,YAAAC,mBAAA,CAAZD,cAAA,CAAc7B,IAAI,UAAA8B,mBAAA,WAAlBA,mBAAA,CAAoBS,kBAAkB,CAAE,CAC1E/D,qBAAqB,CAAC,IAAI,CAAC,CAC3Bc,sBAAsB,CAAC,IAAI,CAAC,CAC5B,OACF,CACAa,OAAO,CAACjD,KAAK,CAAC,yBAAyB,CAAEgD,GAAG,CAAC,CAE7C;AACA,GAAI,CAAAsC,YAAY,CAAG,wBAAwB,CAC3C,GAAI,EAAAT,cAAA,CAAA7B,GAAG,CAACL,QAAQ,UAAAkC,cAAA,iBAAZA,cAAA,CAAcM,MAAM,IAAK,GAAG,CAAE,CAChCG,YAAY,CAAG,0CAA0C,CAC3D,CAAC,IAAM,IAAI,EAAAR,cAAA,CAAA9B,GAAG,CAACL,QAAQ,UAAAmC,cAAA,iBAAZA,cAAA,CAAcK,MAAM,IAAK,GAAG,CAAE,CACvCG,YAAY,CAAG,mDAAmD,CACpE,CAAC,IAAM,IAAI,EAAAP,cAAA,CAAA/B,GAAG,CAACL,QAAQ,UAAAoC,cAAA,iBAAZA,cAAA,CAAcI,MAAM,IAAK,GAAG,CAAE,CACvCG,YAAY,CAAG,+BAA+B,CAChD,CAAC,IAAM,IAAI,EAAAN,cAAA,CAAAhC,GAAG,CAACL,QAAQ,UAAAqC,cAAA,iBAAZA,cAAA,CAAcG,MAAM,GAAI,GAAG,CAAE,CACtCG,YAAY,CAAG,sCAAsC,CACvD,CAAC,IAAM,KAAAL,cAAA,CAAIjC,GAAG,CAACL,QAAQ,UAAAsC,cAAA,YAAAC,mBAAA,CAAZD,cAAA,CAAcnC,IAAI,UAAAoC,mBAAA,WAAlBA,mBAAA,CAAoBK,OAAO,CAAE,CACtCD,YAAY,CAAGtC,GAAG,CAACL,QAAQ,CAACG,IAAI,CAACyC,OAAO,CAC1C,CAAC,IAAM,IAAIvC,GAAG,CAACuC,OAAO,CAACC,QAAQ,CAAC,eAAe,CAAC,CAAE,CAChDF,YAAY,CAAG,2DAA2D,CAC5E,CAEArF,QAAQ,CAACqF,YAAY,CAAC,CACtBtD,aAAa,CAACyD,IAAI,EAAIA,IAAI,CAAG,CAAC,CAAC,CACjC,CAAC,OAAS,CACR1F,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACd,SAAS,CAAEQ,WAAW,CAAED,QAAQ,CAAC,CAAC,CAEtChD,SAAS,CAAC,IAAM,CACd0G,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACA,YAAY,CAAC,CAAC,CAElB;AACA,KAAM,CAAAwC,oBAAoB,CAAG,KAAO,CAAAC,CAAC,EAAK,CACxCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB7F,UAAU,CAAC,IAAI,CAAC,CAChB6B,gBAAgB,CAAC,IAAI,CAAC,CAEtB,GAAI,CACF;AACA,KAAM,CAAAiE,OAAO,CAAG,KAAM,CAAApD,cAAc,CAAClB,eAAe,CAAC,CAErD,GAAI,CAACsE,OAAO,CAAE,CACZjE,gBAAgB,CAAC,uCAAuC,CAAC,CACzD7B,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA;AACAqB,mBAAmB,CAAC,KAAK,CAAC,CAC1Bc,oBAAoB,CAAC,KAAK,CAAC,CAC3BjC,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAiD,YAAY,CAAC3B,eAAe,CAAC,CACnCC,kBAAkB,CAAC,EAAE,CAAC,CACxB,CAAE,MAAOwB,GAAG,CAAE,KAAA8C,cAAA,CAAAC,cAAA,CAAAC,eAAA,CACZ/C,OAAO,CAACjD,KAAK,CAAC,4BAA4B,CAAEgD,GAAG,CAAC,CAChD,GAAI,EAAA8C,cAAA,CAAA9C,GAAG,CAACL,QAAQ,UAAAmD,cAAA,iBAAZA,cAAA,CAAcX,MAAM,IAAK,GAAG,CAAE,CAChCvD,gBAAgB,CAAC,uCAAuC,CAAC,CAC3D,CAAC,IAAM,IAAI,EAAAmE,cAAA,CAAA/C,GAAG,CAACL,QAAQ,UAAAoD,cAAA,iBAAZA,cAAA,CAAcZ,MAAM,IAAK,GAAG,CAAE,CACvCvD,gBAAgB,CAAC,2CAA2C,CAAC,CAC/D,CAAC,IAAM,IAAI,EAAAoE,eAAA,CAAAhD,GAAG,CAACL,QAAQ,UAAAqD,eAAA,iBAAZA,eAAA,CAAcb,MAAM,GAAI,GAAG,CAAE,CACtCvD,gBAAgB,CAAC,uCAAuC,CAAC,CAC3D,CAAC,IAAM,CACLA,gBAAgB,CAAC,6CAA6C,CAAC,CACjE,CACF,CAAC,OAAS,CACR7B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACA,KAAM,CAAAkG,sBAAsB,CAAG,KAAO,CAAAN,CAAC,EAAK,CAC1CA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB7F,UAAU,CAAC,IAAI,CAAC,CAChB+B,kBAAkB,CAAC,IAAI,CAAC,CAExB,GAAI,KAAAoE,cAAA,CAAAC,cAAA,CAAAC,cAAA,CACF;AACA,KAAM,CAAA1C,GAAG,CAAGjE,WAAW,WAAAoD,MAAA,CACTpD,WAAW,gBAAAoD,MAAA,CACP5D,SAAS,WAAS,CAEpC,KAAM,CAAA0E,MAAM,CAAG,CAAE0C,MAAM,CAAE5E,iBAAkB,CAAC,CAC5C,GAAIhC,WAAW,EAAID,QAAQ,CAAE,CAC3BmE,MAAM,CAACnE,QAAQ,CAAGA,QAAQ,CAC5B,CAEA,KAAM,CAAAmD,QAAQ,CAAG,KAAM,CAAA1E,KAAK,CAACsB,GAAG,CAACmE,GAAG,CAAE,CAAEC,MAAO,CAAC,CAAC,CACjD,KAAM,CAAAb,IAAI,CAAGH,QAAQ,CAACG,IAAI,CAE1B;AACA,KAAM,CAAAc,gBAAgB,CAAGd,IAAI,CAACe,YAAY,IAAAqC,cAAA,CAAIpD,IAAI,CAACpD,OAAO,UAAAwG,cAAA,iBAAZA,cAAA,CAAcrC,YAAY,EACxE,KAAM,CAAAC,sBAAsB,CAAGF,gBAAgB,EAAI,MAAO,CAAAA,gBAAgB,GAAK,QAAQ,CAAAG,aAAA,CAAAA,aAAA,IAE9EH,gBAAgB,MACnBI,IAAI,CAAEJ,gBAAgB,CAACI,IAAI,EAAI,GAAAnB,MAAA,CAAGe,gBAAgB,CAACK,SAAS,EAAI,EAAE,MAAApB,MAAA,CAAIe,gBAAgB,CAACM,QAAQ,EAAI,EAAE,EAAGC,IAAI,CAAC,CAAC,CAC9GC,KAAK,CAAER,gBAAgB,CAACQ,KAAK,EAAIR,gBAAgB,CAACS,WAAW,EAAIf,SAAS,GAE5EM,gBAAgB,EAAIN,SAAS,CACjC,KAAM,CAAAgB,iBAAiB,CAAAP,aAAA,CAAAA,aAAA,IAClBjB,IAAI,CAACpD,OAAO,MACfmE,YAAY,CAAEC,sBAAsB,GAAK,QAAAqC,cAAA,CAAOrD,IAAI,CAACpD,OAAO,UAAAyG,cAAA,iBAAZA,cAAA,CAActC,YAAY,IAAK,QAAQ,CAAAE,aAAA,CAAAA,aAAA,IAE9EjB,IAAI,CAACpD,OAAO,CAACmE,YAAY,MAC5BG,IAAI,CAAElB,IAAI,CAACpD,OAAO,CAACmE,YAAY,CAACG,IAAI,EAAI,GAAAnB,MAAA,CAAGC,IAAI,CAACpD,OAAO,CAACmE,YAAY,CAACI,SAAS,EAAI,EAAE,MAAApB,MAAA,CAAIC,IAAI,CAACpD,OAAO,CAACmE,YAAY,CAACK,QAAQ,EAAI,EAAE,EAAGC,IAAI,CAAC,CAAC,IAAAiC,cAAA,CAE3ItD,IAAI,CAACpD,OAAO,UAAA0G,cAAA,iBAAZA,cAAA,CAAcvC,YAAY,CAAC,EAChC,CAEDlE,UAAU,CAAC2E,iBAAiB,CAAC,CAC7BzE,SAAS,CAACiD,IAAI,CAAClD,MAAM,EAAI,EAAE,CAAC,CAC5BsB,YAAY,CAAC4B,IAAI,CAAC7B,SAAS,EAAI,EAAE,CAAC,CAClCK,qBAAqB,CAAC,KAAK,CAAC,CAC5Bc,sBAAsB,CAAC,KAAK,CAAC,CAC7BnC,QAAQ,CAAC,IAAI,CAAC,CACdyB,oBAAoB,CAAC,EAAE,CAAC,CAC1B,CAAE,MAAOsB,GAAG,CAAE,KAAAsD,eAAA,CAAAC,eAAA,CAAAC,eAAA,CACZvD,OAAO,CAACjD,KAAK,CAAC,8BAA8B,CAAEgD,GAAG,CAAC,CAClD,GAAI,EAAAsD,eAAA,CAAAtD,GAAG,CAACL,QAAQ,UAAA2D,eAAA,iBAAZA,eAAA,CAAcnB,MAAM,IAAK,GAAG,CAAE,CAChCrD,kBAAkB,CAAC,uDAAuD,CAAC,CAC7E,CAAC,IAAM,IAAI,EAAAyE,eAAA,CAAAvD,GAAG,CAACL,QAAQ,UAAA4D,eAAA,iBAAZA,eAAA,CAAcpB,MAAM,IAAK,GAAG,CAAE,CACvCrD,kBAAkB,CAAC,2CAA2C,CAAC,CACjE,CAAC,IAAM,IAAI,EAAA0E,eAAA,CAAAxD,GAAG,CAACL,QAAQ,UAAA6D,eAAA,iBAAZA,eAAA,CAAcrB,MAAM,GAAI,GAAG,CAAE,CACtCrD,kBAAkB,CAAC,uCAAuC,CAAC,CAC7D,CAAC,IAAM,CACLA,kBAAkB,CAAC,6CAA6C,CAAC,CACnE,CACF,CAAC,OAAS,CACR/B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACA,KAAM,CAAA0G,YAAY,CAAGA,CAACC,KAAK,CAAEC,KAAK,GAAK,CACrCxG,gBAAgB,CAACuG,KAAK,CAAC,CACvBrG,gBAAgB,CAACsG,KAAK,CAAC,CACvBpG,eAAe,CAAC,IAAI,CAAC,CACrBI,OAAO,CAAC,CAAC,CAAC,CACVE,WAAW,CAAC,CAAC,CAAC,CACd+F,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAAG,QAAQ,CACzC,CAAC,CAED;AACA,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1BzG,eAAe,CAAC,KAAK,CAAC,CACtBJ,gBAAgB,CAAC,IAAI,CAAC,CACtBM,WAAW,CAAC,KAAK,CAAC,CAClBE,OAAO,CAAC,CAAC,CAAC,CACVE,WAAW,CAAC,CAAC,CAAC,CACd+F,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAAG,MAAM,CACvC,CAAC,CAED;AACA,KAAM,CAAAE,gBAAgB,CAAIC,SAAS,EAAK,CACtC,KAAM,CAAAC,QAAQ,CAAGD,SAAS,GAAK,MAAM,CACjC,CAAC9G,aAAa,CAAG,CAAC,EAAIR,MAAM,CAACyD,MAAM,CACnC,CAACjD,aAAa,CAAG,CAAC,CAAGR,MAAM,CAACyD,MAAM,EAAIzD,MAAM,CAACyD,MAAM,CAEvDhD,gBAAgB,CAAC8G,QAAQ,CAAC,CAC1BhH,gBAAgB,CAACP,MAAM,CAACuH,QAAQ,CAAC,CAAC,CAClCxG,OAAO,CAAC,CAAC,CAAC,CACVE,WAAW,CAAC,CAAC,CAAC,CAChB,CAAC,CAED;AACArE,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4K,cAAc,CAAIzB,CAAC,EAAK,CAC5B,GAAI,CAACrF,YAAY,CAAE,OAEnB,OAAQqF,CAAC,CAAC0B,GAAG,EACX,IAAK,QAAQ,CACXL,aAAa,CAAC,CAAC,CACf,MACF,IAAK,WAAW,CACdC,gBAAgB,CAAC,MAAM,CAAC,CACxB,MACF,IAAK,YAAY,CACfA,gBAAgB,CAAC,MAAM,CAAC,CACxB,MACF,IAAK,GAAG,CACR,IAAK,GAAG,CACNxG,WAAW,CAAC,CAACD,QAAQ,CAAC,CACtB,MACF,QACE,MACJ,CACF,CAAC,CAED8G,MAAM,CAACC,gBAAgB,CAAC,SAAS,CAAEH,cAAc,CAAC,CAClD,MAAO,IAAME,MAAM,CAACE,mBAAmB,CAAC,SAAS,CAAEJ,cAAc,CAAC,CACpE,CAAC,CAAE,CAAC9G,YAAY,CAAEE,QAAQ,CAAEJ,aAAa,CAAC,CAAC,CAE3C;AACA,KAAM,CAAAqH,cAAc,CAAIC,OAAO,EAAK,CAClC,KAAM,CAAAC,YAAY,CAAG,GAAI,CAAA3G,GAAG,CAACF,SAAS,CAAC,CACvC,GAAI6G,YAAY,CAACC,GAAG,CAACF,OAAO,CAAC,CAAE,CAC7BC,YAAY,CAACE,MAAM,CAACH,OAAO,CAAC,CAC9B,CAAC,IAAM,CACLC,YAAY,CAACG,GAAG,CAACJ,OAAO,CAAC,CAC3B,CACA3G,YAAY,CAAC4G,YAAY,CAAC,CAC5B,CAAC,CAED;AACA,KAAM,CAAAI,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,GAAIC,SAAS,CAACC,KAAK,CAAE,CACnB,KAAM,CAAAD,SAAS,CAACC,KAAK,CAAC,CACpBC,KAAK,CAAExI,OAAO,CAACwI,KAAK,CACpBC,IAAI,CAAEzI,OAAO,CAAC0I,WAAW,CACzB1E,GAAG,CAAE4D,MAAM,CAACe,QAAQ,CAACC,IACvB,CAAC,CAAC,CACJ,CAAC,IAAM,CACL,KAAM,CAAAN,SAAS,CAACO,SAAS,CAACC,SAAS,CAAClB,MAAM,CAACe,QAAQ,CAACC,IAAI,CAAC,CACzDtK,KAAK,CAACyK,OAAO,CAAC,mCAAmC,CAAC,CACpD,CACF,CAAE,MAAOzF,GAAG,CAAE,CACZC,OAAO,CAACjD,KAAK,CAAC,gBAAgB,CAAEgD,GAAG,CAAC,CACpChF,KAAK,CAACgC,KAAK,CAAC,yBAAyB,CAAC,CACxC,CACF,CAAC,CAED;AACA,KAAM,CAAA0I,aAAa,CAAG,KAAO,CAAAhC,KAAK,EAAK,CACrC,GAAI,CACF,KAAM,CAAA/D,QAAQ,CAAG,KAAM,CAAA1E,KAAK,CAACsB,GAAG,YAAAsD,MAAA,CAAY6D,KAAK,CAACiC,GAAG,cAAa,CAChEhF,MAAM,CAAErE,KAAK,CAAG,CAAEA,KAAM,CAAC,CAAGgE,SAAS,CACrCsF,YAAY,CAAE,MAChB,CAAC,CAAC,CACF,KAAM,CAAAC,IAAI,CAAGlG,QAAQ,CAACG,IAAI,CAC1B,KAAM,CAAAY,GAAG,CAAG4D,MAAM,CAACwB,GAAG,CAACC,eAAe,CAACF,IAAI,CAAC,CAC5C,KAAM,CAAAG,CAAC,CAAGpC,QAAQ,CAACqC,aAAa,CAAC,GAAG,CAAC,CACrCD,CAAC,CAACV,IAAI,CAAG5E,GAAG,CACZsF,CAAC,CAACE,QAAQ,CAAGxC,KAAK,CAACyC,QAAQ,WAAAtG,MAAA,CAAa6D,KAAK,CAACiC,GAAG,QAAM,CACvD/B,QAAQ,CAACC,IAAI,CAACuC,WAAW,CAACJ,CAAC,CAAC,CAC5BA,CAAC,CAACK,KAAK,CAAC,CAAC,CACT/B,MAAM,CAACwB,GAAG,CAACQ,eAAe,CAAC5F,GAAG,CAAC,CAC/BkD,QAAQ,CAACC,IAAI,CAAC0C,WAAW,CAACP,CAAC,CAAC,CAE5BhL,KAAK,CAACyK,OAAO,CAAC,gCAAgC,CAAC,CACjD,CAAE,MAAOzF,GAAG,CAAE,CACZC,OAAO,CAACjD,KAAK,CAAC,0BAA0B,CAAEgD,GAAG,CAAC,CAC9ChF,KAAK,CAACgC,KAAK,CAAC,0BAA0B,CAAC,CACzC,CACF,CAAC,CAED;AACA,KAAM,CAAAwJ,aAAa,CAAI9C,KAAK,EAAK,KAAA+C,eAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAC/B,KAAM,CAAAC,OAAO,oBAAA/G,MAAA,CAAqB6D,KAAK,CAACwB,KAAK,EAAI,SAAS,MAAG,CAC7D,KAAM,CAAArB,IAAI,+DAAAhE,MAAA,CAAgE6D,KAAK,CAACwB,KAAK,EAAI,YAAY,OAAArF,MAAA,CAAI,CAAA4G,eAAA,CAAA/C,KAAK,CAACmD,QAAQ,UAAAJ,eAAA,WAAdA,eAAA,CAAgBK,WAAW,MAAAjH,MAAA,CAAQ6D,KAAK,CAACmD,QAAQ,CAACC,WAAW,CAACC,MAAM,EAAAlH,MAAA,CAAG6D,KAAK,CAACmD,QAAQ,CAACC,WAAW,CAACE,IAAI,MAAAnH,MAAA,CAAQ6D,KAAK,CAACmD,QAAQ,CAACC,WAAW,CAACE,IAAI,EAAK,EAAE,MAAM,EAAE,UAAAnH,MAAA,CAAQ,CAAA6G,gBAAA,CAAAhD,KAAK,CAACmD,QAAQ,UAAAH,gBAAA,YAAAC,qBAAA,CAAdD,gBAAA,CAAgBO,YAAY,UAAAN,qBAAA,WAA5BA,qBAAA,CAA8BO,KAAK,mBAAArH,MAAA,CAAqB6D,KAAK,CAACmD,QAAQ,CAACI,YAAY,CAACC,KAAK,CAACC,cAAc,CAAC,CAAC,SAAS,EAAE,6IAA2I,CAC7gB,KAAM,CAAAC,SAAS,CAAI1K,OAAO,EAAIA,OAAO,CAACmE,YAAY,EAAInE,OAAO,CAACmE,YAAY,CAACO,KAAK,CAAI1E,OAAO,CAACmE,YAAY,CAACO,KAAK,CAAG,EAAE,CACnH,KAAM,CAAAiG,UAAU,WAAAxH,MAAA,CAAayH,kBAAkB,CAACF,SAAS,CAAC,cAAAvH,MAAA,CAAYyH,kBAAkB,CAACV,OAAO,CAAC,WAAA/G,MAAA,CAASyH,kBAAkB,CAACzD,IAAI,CAAC,CAAE,CACpIS,MAAM,CAACiD,IAAI,CAACF,UAAU,CAAE,QAAQ,CAAC,CACnC,CAAC,CAED;AACA,KAAM,CAAAG,UAAU,CAAIC,UAAU,EAAK,CACjC,MAAO,IAAI,CAAAC,IAAI,CAACD,UAAU,CAAC,CAACE,kBAAkB,CAAC,OAAO,CAAE,CACtDX,IAAI,CAAE,SAAS,CACfY,KAAK,CAAE,MAAM,CACbC,GAAG,CAAE,SACP,CAAC,CAAC,CACJ,CAAC,CAED;AACA,KAAM,CAAAC,oBAAoB,CAAIC,IAAI,EAAK,CACrC,GAAI,CAACA,IAAI,CAAE,MAAO,KAAI,CAEtB,KAAM,CAAAC,QAAQ,CAAG,EAAE,CACnB,GAAID,IAAI,CAACE,OAAO,CAAED,QAAQ,CAACE,IAAI,MAAArI,MAAA,CAAMkI,IAAI,CAACE,OAAO,CAAE,CAAC,CACpD,GAAIF,IAAI,CAACI,YAAY,CAAEH,QAAQ,CAACE,IAAI,IAAArI,MAAA,CAAIkI,IAAI,CAACI,YAAY,KAAG,CAAC,CAC7D,GAAIJ,IAAI,CAACK,GAAG,CAAEJ,QAAQ,CAACE,IAAI,QAAArI,MAAA,CAAQkI,IAAI,CAACK,GAAG,CAAE,CAAC,CAC9C,GAAIL,IAAI,CAACM,WAAW,CAAEL,QAAQ,CAACE,IAAI,IAAArI,MAAA,CAAIkI,IAAI,CAACM,WAAW,MAAI,CAAC,CAE5D,MAAO,CAAAL,QAAQ,CAAC3H,MAAM,CAAG,CAAC,CAAG2H,QAAQ,CAACM,IAAI,CAAC,KAAK,CAAC,CAAG,IAAI,CAC1D,CAAC,CAID,GAAIxL,OAAO,CAAE,CACX,mBACEvB,KAAA,QAAKgN,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BnN,IAAA,QAAKkN,SAAS,CAAC,iBAAiB,CAAM,CAAC,cACvClN,IAAA,MAAAmN,QAAA,CAAG,oBAAkB,CAAG,CAAC,EACtB,CAAC,CAEV,CAEA,GAAIxL,KAAK,CAAE,CACT,mBACE3B,IAAA,QAAKkN,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BjN,KAAA,QAAKgN,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BnN,IAAA,QAAKkN,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACpCnN,IAAA,OAAAmN,QAAA,CAAI,wBAAsB,CAAI,CAAC,cAC/BnN,IAAA,MAAGkN,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAExL,KAAK,CAAI,CAAC,cAExCzB,KAAA,QAAKgN,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BnN,IAAA,WACEoN,OAAO,CAAEA,CAAA,GAAM,CACbxL,QAAQ,CAAC,IAAI,CAAC,CACd+B,aAAa,CAAC,CAAC,CAAC,CAChBkB,YAAY,CAAC,CAAC,CAChB,CAAE,CACFqI,SAAS,CAAC,cAAc,CACxBG,QAAQ,CAAE5L,OAAQ,CAAA0L,QAAA,CAEjB1L,OAAO,CAAG,aAAa,CAAG,WAAW,CAChC,CAAC,CAERiC,UAAU,CAAG,CAAC,eACb1D,IAAA,WACEoN,OAAO,CAAEA,CAAA,GAAMnE,MAAM,CAACe,QAAQ,CAACC,IAAI,CAAG,GAAI,CAC1CiD,SAAS,CAAC,aAAa,CAAAC,QAAA,CACxB,gBAED,CAAQ,CACT,EACE,CAAC,CAELzJ,UAAU,CAAG,CAAC,eACbxD,KAAA,QAAKgN,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnN,IAAA,MAAAmN,QAAA,CAAG,4BAA0B,CAAG,CAAC,cACjCjN,KAAA,OAAAiN,QAAA,eACEnN,IAAA,OAAAmN,QAAA,CAAI,mCAAiC,CAAI,CAAC,cAC1CnN,IAAA,OAAAmN,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BnN,IAAA,OAAAmN,QAAA,CAAI,8BAA4B,CAAI,CAAC,EACnC,CAAC,EACF,CACN,EACE,CAAC,CACH,CAAC,CAEV,CAEA,mBACEjN,KAAA,QAAKgN,SAAS,CAAC,cAAc,CAAAC,QAAA,eAE3BnN,IAAA,CAACvB,eAAe,EAAA0O,QAAA,CACbvJ,iBAAiB,eAChB5D,IAAA,CAACxB,MAAM,CAAC8O,GAAG,EACTJ,SAAS,CAAC,wBAAwB,CAClCK,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAE,CAAE,CACxBC,OAAO,CAAE,CAAED,OAAO,CAAE,CAAE,CAAE,CACxBE,IAAI,CAAE,CAAEF,OAAO,CAAE,CAAE,CAAE,CAAAL,QAAA,cAErBjN,KAAA,CAAC1B,MAAM,CAAC8O,GAAG,EACTJ,SAAS,CAAC,gBAAgB,CAC1BK,OAAO,CAAE,CAAEI,KAAK,CAAE,GAAG,CAAEH,OAAO,CAAE,CAAE,CAAE,CACpCC,OAAO,CAAE,CAAEE,KAAK,CAAE,CAAC,CAAEH,OAAO,CAAE,CAAE,CAAE,CAClCE,IAAI,CAAE,CAAEC,KAAK,CAAE,GAAG,CAAEH,OAAO,CAAE,CAAE,CAAE,CAAAL,QAAA,eAEjCjN,KAAA,QAAKgN,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCnN,IAAA,CAACR,IAAI,EAAC0N,SAAS,CAAC,WAAW,CAAE,CAAC,cAC9BlN,IAAA,OAAAmN,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BnN,IAAA,MAAAmN,QAAA,CAAG,oCAAkC,CAAG,CAAC,EACtC,CAAC,cAENjN,KAAA,SAAM0N,QAAQ,CAAEvG,oBAAqB,CAAC6F,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC7DjN,KAAA,QAAKgN,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCnN,IAAA,UACE6N,IAAI,CAAC,UAAU,CACfC,KAAK,CAAE5K,eAAgB,CACvB6K,QAAQ,CAAGzG,CAAC,EAAK,CACfnE,kBAAkB,CAACmE,CAAC,CAAC0G,MAAM,CAACF,KAAK,CAAC,CAClCvK,gBAAgB,CAAC,IAAI,CAAC,CAAE;AAC1B,CAAE,CACF0K,WAAW,CAAC,gBAAgB,CAC5Bf,SAAS,mBAAA1I,MAAA,CAAoBlB,aAAa,CAAG,OAAO,CAAG,EAAE,CAAG,CAC5D4K,SAAS,MACTC,QAAQ,MACRd,QAAQ,CAAE5L,OAAQ,CACnB,CAAC,CACD6B,aAAa,eACZpD,KAAA,QAAKgN,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnN,IAAA,SAAMkN,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,cAAE,CAAM,CAAC,cACtCnN,IAAA,SAAMkN,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAE7J,aAAa,CAAO,CAAC,EAChD,CACN,EACE,CAAC,cAENtD,IAAA,WACE6N,IAAI,CAAC,QAAQ,CACbX,SAAS,CAAC,iBAAiB,CAC3BG,QAAQ,CAAE5L,OAAO,EAAI,CAACyB,eAAe,CAAC4C,IAAI,CAAC,CAAE,CAAAqH,QAAA,CAE5C1L,OAAO,cACNvB,KAAA,CAAAE,SAAA,EAAA+M,QAAA,eACEnN,IAAA,QAAKkN,SAAS,CAAC,iBAAiB,CAAM,CAAC,eAEzC,EAAE,CAAC,cAEHhN,KAAA,CAAAE,SAAA,EAAA+M,QAAA,eACEnN,IAAA,CAACP,MAAM,EAACyN,SAAS,CAAC,aAAa,CAAE,CAAC,iBAEpC,EAAE,CACH,CACK,CAAC,EACL,CAAC,cAEPlN,IAAA,QAAKkN,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCnN,IAAA,MAAGkN,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,qDAEzB,CAAG,CAAC,CACD,CAAC,EACI,CAAC,CACH,CACb,CACc,CAAC,cAGlBnN,IAAA,CAACvB,eAAe,EAAA0O,QAAA,CACbrJ,mBAAmB,eAClB9D,IAAA,CAACxB,MAAM,CAAC8O,GAAG,EACTJ,SAAS,CAAC,wBAAwB,CAClCK,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAE,CAAE,CACxBC,OAAO,CAAE,CAAED,OAAO,CAAE,CAAE,CAAE,CACxBE,IAAI,CAAE,CAAEF,OAAO,CAAE,CAAE,CAAE,CAAAL,QAAA,cAErBjN,KAAA,CAAC1B,MAAM,CAAC8O,GAAG,EACTJ,SAAS,CAAC,gBAAgB,CAC1BK,OAAO,CAAE,CAAEI,KAAK,CAAE,GAAG,CAAEH,OAAO,CAAE,CAAE,CAAE,CACpCC,OAAO,CAAE,CAAEE,KAAK,CAAE,CAAC,CAAEH,OAAO,CAAE,CAAE,CAAE,CAClCE,IAAI,CAAE,CAAEC,KAAK,CAAE,GAAG,CAAEH,OAAO,CAAE,CAAE,CAAE,CAAAL,QAAA,eAEjCjN,KAAA,QAAKgN,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCnN,IAAA,CAACR,IAAI,EAAC0N,SAAS,CAAC,WAAW,CAAE,CAAC,cAC9BlN,IAAA,OAAAmN,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BnN,IAAA,MAAAmN,QAAA,CAAG,iEAA+D,CAAG,CAAC,EACnE,CAAC,cAENjN,KAAA,SAAM0N,QAAQ,CAAEhG,sBAAuB,CAACsF,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC/DjN,KAAA,QAAKgN,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCnN,IAAA,UACE6N,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE1K,iBAAkB,CACzB2K,QAAQ,CAAGzG,CAAC,EAAK,CACfjE,oBAAoB,CAACiE,CAAC,CAAC0G,MAAM,CAACF,KAAK,CAAC,CACpCrK,kBAAkB,CAAC,IAAI,CAAC,CAAE;AAC5B,CAAE,CACFwK,WAAW,CAAC,uBAAuB,CACnCf,SAAS,mBAAA1I,MAAA,CAAoBhB,eAAe,CAAG,OAAO,CAAG,EAAE,CAAG,CAC9D0K,SAAS,MACTC,QAAQ,MACRd,QAAQ,CAAE5L,OAAQ,CACnB,CAAC,CACD+B,eAAe,eACdtD,KAAA,QAAKgN,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnN,IAAA,SAAMkN,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,cAAE,CAAM,CAAC,cACtCnN,IAAA,SAAMkN,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAE3J,eAAe,CAAO,CAAC,EAClD,CACN,EACE,CAAC,cAENxD,IAAA,WACE6N,IAAI,CAAC,QAAQ,CACbX,SAAS,CAAC,iBAAiB,CAC3BG,QAAQ,CAAE5L,OAAO,EAAI,CAAC2B,iBAAiB,CAAC0C,IAAI,CAAC,CAAE,CAAAqH,QAAA,CAE9C1L,OAAO,cACNvB,KAAA,CAAAE,SAAA,EAAA+M,QAAA,eACEnN,IAAA,QAAKkN,SAAS,CAAC,iBAAiB,CAAM,CAAC,eAEzC,EAAE,CAAC,cAEHhN,KAAA,CAAAE,SAAA,EAAA+M,QAAA,eACEnN,IAAA,CAACP,MAAM,EAACyN,SAAS,CAAC,aAAa,CAAE,CAAC,iBAEpC,EAAE,CACH,CACK,CAAC,EACL,CAAC,cAEPlN,IAAA,QAAKkN,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCnN,IAAA,MAAGkN,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,2DAEzB,CAAG,CAAC,CACD,CAAC,EACI,CAAC,CACH,CACb,CACc,CAAC,CAGjB9L,OAAO,eACNnB,KAAA,QAAKgN,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjN,KAAA,QAAKgN,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BnN,IAAA,OAAIkN,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAE9L,OAAO,CAACwI,KAAK,CAAK,CAAC,CACjDxI,OAAO,CAAC0I,WAAW,eAClB/J,IAAA,MAAGkN,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAE9L,OAAO,CAAC0I,WAAW,CAAI,CAC5D,cAED7J,KAAA,QAAKgN,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1B9L,OAAO,CAACmE,YAAY,eACnBtF,KAAA,QAAKgN,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCnN,IAAA,CAACX,MAAM,EAAC6N,SAAS,CAAC,WAAW,CAAE,CAAC,cAChChN,KAAA,SAAAiN,QAAA,EAAM,KAAG,CAAC9L,OAAO,CAACmE,YAAY,CAACG,IAAI,EAAO,CAAC,EACxC,CACN,cAEDzF,KAAA,QAAKgN,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BnN,IAAA,CAACtB,GAAG,EAACwO,SAAS,CAAC,WAAW,CAAE,CAAC,cAC7BhN,KAAA,SAAAiN,QAAA,EAAO5L,MAAM,CAACyD,MAAM,CAAC,SAAO,EAAM,CAAC,EAChC,CAAC,CAEL3D,OAAO,CAAC+M,SAAS,eAChBlO,KAAA,QAAKgN,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BnN,IAAA,CAACV,QAAQ,EAAC4N,SAAS,CAAC,WAAW,CAAE,CAAC,cAClClN,IAAA,SAAAmN,QAAA,CAAOhB,UAAU,CAAC9K,OAAO,CAAC+M,SAAS,CAAC,CAAO,CAAC,EACzC,CACN,EACE,CAAC,EACH,CAAC,cAENpO,IAAA,QAAKkN,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9BjN,KAAA,WAAQkN,OAAO,CAAE1D,YAAa,CAACwD,SAAS,CAAC,eAAe,CAAAC,QAAA,eACtDnN,IAAA,CAACnB,MAAM,EAACqO,SAAS,CAAC,aAAa,CAAE,CAAC,QAEpC,EAAQ,CAAC,CACN,CAAC,EACH,CACN,CAGA3L,MAAM,CAACyD,MAAM,CAAG,CAAC,cAChBhF,IAAA,CAACH,OAAO,EACNwO,cAAc,CAAEnK,oBAAqB,CACrCgJ,SAAS,CAAC,eAAe,CACzBoB,eAAe,CAAC,sBAAsB,CAAAnB,QAAA,CAErC5L,MAAM,CAACgN,GAAG,CAAC,CAAClG,KAAK,CAAEC,KAAK,gBACvBtI,IAAA,CAACxB,MAAM,CAAC8O,GAAG,EAETJ,SAAS,CAAC,YAAY,CACtBK,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEgB,CAAC,CAAE,EAAG,CAAE,CAC/Bf,OAAO,CAAE,CAAED,OAAO,CAAE,CAAC,CAAEgB,CAAC,CAAE,CAAE,CAAE,CAC9BC,UAAU,CAAE,CAAEC,KAAK,CAAEpG,KAAK,CAAG,GAAI,CAAE,CACnC8E,OAAO,CAAEA,CAAA,GAAMhF,YAAY,CAACC,KAAK,CAAEC,KAAK,CAAE,CAAA6E,QAAA,cAE1CjN,KAAA,QAAKgN,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BnN,IAAA,CAACF,aAAa,EACZ6O,GAAG,CAAEtG,KAAK,CAACuG,UAAU,EAAIvG,KAAK,CAACwG,YAAY,EAAIxG,KAAK,CAAChD,GAAI,CACzDyJ,GAAG,CAAEzG,KAAK,CAACwB,KAAK,EAAI,eAAgB,CACpCkF,MAAM,CAAC,MAAM,CACb7B,SAAS,CAAC,aAAa,CACvB8B,cAAc,CAAE3G,KAAK,CAACwG,YAAa,CACpC,CAAC,cAEF3O,KAAA,QAAKgN,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BjN,KAAA,QAAKgN,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BnN,IAAA,WACEkN,SAAS,oBAAA1I,MAAA,CAAqB/B,SAAS,CAAC8G,GAAG,CAAClB,KAAK,CAACiC,GAAG,CAAC,CAAG,QAAQ,CAAG,EAAE,CAAG,CACzE8C,OAAO,CAAG9F,CAAC,EAAK,CACdA,CAAC,CAAC2H,eAAe,CAAC,CAAC,CACnB7F,cAAc,CAACf,KAAK,CAACiC,GAAG,CAAC,CAC3B,CAAE,CAAA6C,QAAA,cAEFnN,IAAA,CAACpB,KAAK,EAACsO,SAAS,CAAC,aAAa,CAAE,CAAC,CAC3B,CAAC,cAETlN,IAAA,WACEkN,SAAS,CAAC,iBAAiB,CAC3BE,OAAO,CAAG9F,CAAC,EAAK,CACdA,CAAC,CAAC2H,eAAe,CAAC,CAAC,CACnB5E,aAAa,CAAChC,KAAK,CAAC,CACtB,CAAE,CAAA8E,QAAA,cAEFnN,IAAA,CAACrB,QAAQ,EAACuO,SAAS,CAAC,aAAa,CAAE,CAAC,CAC9B,CAAC,EACN,CAAC,cAENhN,KAAA,QAAKgN,SAAS,CAAC,YAAY,CAAAC,QAAA,EACxB9E,KAAK,CAACwB,KAAK,eACV7J,IAAA,QAAKkN,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE9E,KAAK,CAACwB,KAAK,CAAM,CAChD,CAEAxB,KAAK,CAACmD,QAAQ,eACbtL,KAAA,QAAKgN,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC5B9E,KAAK,CAACmD,QAAQ,CAACzB,WAAW,eACzB/J,IAAA,MAAGkN,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAE9E,KAAK,CAACmD,QAAQ,CAACzB,WAAW,CAAI,CACjE,CAEA1B,KAAK,CAACmD,QAAQ,CAACC,WAAW,eACzBvL,KAAA,QAAKgN,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1B9E,KAAK,CAACmD,QAAQ,CAACC,WAAW,CAACC,MAAM,eAChC1L,IAAA,SAAMkN,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAE9E,KAAK,CAACmD,QAAQ,CAACC,WAAW,CAACC,MAAM,CAAO,CAC3E,CACArD,KAAK,CAACmD,QAAQ,CAACC,WAAW,CAACyD,UAAU,eACpClP,IAAA,SAAMkN,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAE9E,KAAK,CAACmD,QAAQ,CAACC,WAAW,CAACyD,UAAU,CAAO,CACnF,CACA7G,KAAK,CAACmD,QAAQ,CAACC,WAAW,CAACE,IAAI,eAC9B3L,IAAA,SAAMkN,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAE9E,KAAK,CAACmD,QAAQ,CAACC,WAAW,CAACE,IAAI,CAAO,CACvE,EACE,CACN,CAEAtD,KAAK,CAACmD,QAAQ,CAACI,YAAY,EAAIvD,KAAK,CAACmD,QAAQ,CAACI,YAAY,CAACC,KAAK,eAC/D3L,KAAA,QAAKgN,SAAS,CAAC,aAAa,CAAAC,QAAA,EAAC,GAC1B,CAAC9E,KAAK,CAACmD,QAAQ,CAACI,YAAY,CAACC,KAAK,CAACC,cAAc,CAAC,CAAC,EACjD,CACN,CAEAzD,KAAK,CAACmD,QAAQ,CAACI,YAAY,EAAIvD,KAAK,CAACmD,QAAQ,CAACI,YAAY,CAACuD,SAAS,eACnEnP,IAAA,WACEkN,SAAS,CAAC,gBAAgB,CAC1BE,OAAO,CAAG9F,CAAC,EAAK,CACdA,CAAC,CAAC2H,eAAe,CAAC,CAAC,CACnB9D,aAAa,CAAC9C,KAAK,CAAC,CACtB,CAAE,CAAA8E,QAAA,CACH,SAED,CAAQ,CACT,EACE,CACN,EACE,CAAC,EACH,CAAC,EACH,CAAC,EArFD9E,KAAK,CAACiC,GAsFD,CACb,CAAC,CACK,CAAC,cAEVpK,KAAA,QAAKgN,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BnN,IAAA,CAACX,MAAM,EAAC6N,SAAS,CAAC,YAAY,CAAE,CAAC,cACjClN,IAAA,OAAAmN,QAAA,CAAI,2BAAyB,CAAI,CAAC,cAClCnN,IAAA,MAAAmN,QAAA,CAAG,8CAA4C,CAAG,CAAC,EAChD,CACN,cAGDnN,IAAA,CAACvB,eAAe,EAAA0O,QAAA,CACblL,YAAY,EAAIJ,aAAa,eAC5B7B,IAAA,CAACxB,MAAM,CAAC8O,GAAG,EACTJ,SAAS,CAAC,kBAAkB,CAC5BK,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAE,CAAE,CACxBC,OAAO,CAAE,CAAED,OAAO,CAAE,CAAE,CAAE,CACxBE,IAAI,CAAE,CAAEF,OAAO,CAAE,CAAE,CAAE,CACrBJ,OAAO,CAAEzE,aAAc,CACvByG,GAAG,CAAEpL,WAAY,CAAAmJ,QAAA,cAEjBjN,KAAA,QAAKgN,SAAS,CAAC,oBAAoB,CAACE,OAAO,CAAG9F,CAAC,EAAKA,CAAC,CAAC2H,eAAe,CAAC,CAAE,CAAA9B,QAAA,eAEtEjN,KAAA,QAAKgN,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BnN,IAAA,QAAKkN,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BtL,aAAa,CAACgI,KAAK,WAAArF,MAAA,CAAazC,aAAa,CAAG,CAAC,SAAAyC,MAAA,CAAOjD,MAAM,CAACyD,MAAM,CAAE,CACrE,CAAC,cAEN9E,KAAA,QAAKgN,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCnN,IAAA,WACEkN,SAAS,CAAC,iBAAiB,CAC3BE,OAAO,CAAEA,CAAA,GAAMhL,WAAW,CAAC,CAACD,QAAQ,CAAE,CACtC0H,KAAK,CAAC,aAAa,CAAAsD,QAAA,cAEnBnN,IAAA,CAACZ,IAAI,EAAC8N,SAAS,CAAC,cAAc,CAAE,CAAC,CAC3B,CAAC,cAETlN,IAAA,WACEkN,SAAS,CAAC,iBAAiB,CAC3BE,OAAO,CAAEA,CAAA,GAAM/C,aAAa,CAACxI,aAAa,CAAE,CAC5CgI,KAAK,CAAC,UAAU,CAAAsD,QAAA,cAEhBnN,IAAA,CAACrB,QAAQ,EAACuO,SAAS,CAAC,cAAc,CAAE,CAAC,CAC/B,CAAC,cAETlN,IAAA,WACEkN,SAAS,CAAC,iBAAiB,CAC3BE,OAAO,CAAEzE,aAAc,CACvBkB,KAAK,CAAC,OAAO,CAAAsD,QAAA,cAEbnN,IAAA,CAAClB,CAAC,EAACoO,SAAS,CAAC,cAAc,CAAE,CAAC,CACxB,CAAC,EACN,CAAC,EACH,CAAC,cAGNhN,KAAA,QAAKgN,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAE/BnN,IAAA,WACEkN,SAAS,CAAC,gCAAgC,CAC1CE,OAAO,CAAEA,CAAA,GAAMxE,gBAAgB,CAAC,MAAM,CAAE,CACxCyE,QAAQ,CAAE9L,MAAM,CAACyD,MAAM,EAAI,CAAE,CAAAmI,QAAA,cAE7BnN,IAAA,CAACjB,WAAW,EAACmO,SAAS,CAAC,UAAU,CAAE,CAAC,CAC9B,CAAC,cAETlN,IAAA,WACEkN,SAAS,CAAC,gCAAgC,CAC1CE,OAAO,CAAEA,CAAA,GAAMxE,gBAAgB,CAAC,MAAM,CAAE,CACxCyE,QAAQ,CAAE9L,MAAM,CAACyD,MAAM,EAAI,CAAE,CAAAmI,QAAA,cAE7BnN,IAAA,CAAChB,YAAY,EAACkO,SAAS,CAAC,UAAU,CAAE,CAAC,CAC/B,CAAC,cAGTlN,IAAA,QAAKkN,SAAS,CAAC,0BAA0B,CAAAC,QAAA,cACvCnN,IAAA,QACEoP,GAAG,CAAEnL,QAAS,CACd0K,GAAG,CAAE9M,aAAa,CAACwD,GAAI,CACvByJ,GAAG,CAAEjN,aAAa,CAACgI,KAAK,EAAI,eAAgB,CAC5CqD,SAAS,CAAC,gBAAgB,CAC1BzE,KAAK,CAAE,CACL4G,SAAS,UAAA7K,MAAA,CAAWnC,IAAI,cAAAmC,MAAA,CAAYjC,QAAQ,QAC9C,CAAE,CACH,CAAC,CACC,CAAC,cAGNrC,KAAA,QAAKgN,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCnN,IAAA,WACEkN,SAAS,CAAC,aAAa,CACvBE,OAAO,CAAEA,CAAA,GAAM9K,OAAO,CAACgN,IAAI,CAACC,GAAG,CAAC,GAAG,CAAElN,IAAI,CAAG,IAAI,CAAC,CAAE,CACnDgL,QAAQ,CAAEhL,IAAI,EAAI,GAAI,CAAA8K,QAAA,cAEtBnN,IAAA,CAACd,OAAO,EAACgO,SAAS,CAAC,WAAW,CAAE,CAAC,CAC3B,CAAC,cAEThN,KAAA,SAAMgN,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAEmC,IAAI,CAACE,KAAK,CAACnN,IAAI,CAAG,GAAG,CAAC,CAAC,GAAC,EAAM,CAAC,cAE7DrC,IAAA,WACEkN,SAAS,CAAC,aAAa,CACvBE,OAAO,CAAEA,CAAA,GAAM9K,OAAO,CAACgN,IAAI,CAACG,GAAG,CAAC,CAAC,CAAEpN,IAAI,CAAG,IAAI,CAAC,CAAE,CACjDgL,QAAQ,CAAEhL,IAAI,EAAI,CAAE,CAAA8K,QAAA,cAEpBnN,IAAA,CAACf,MAAM,EAACiO,SAAS,CAAC,WAAW,CAAE,CAAC,CAC1B,CAAC,cAETlN,IAAA,WACEkN,SAAS,CAAC,eAAe,CACzBE,OAAO,CAAEA,CAAA,GAAM5K,WAAW,CAAC,CAACD,QAAQ,CAAG,EAAE,EAAI,GAAG,CAAE,CAAA4K,QAAA,cAElDnN,IAAA,CAACb,QAAQ,EAAC+N,SAAS,CAAC,aAAa,CAAE,CAAC,CAC9B,CAAC,EACN,CAAC,EACH,CAAC,cAGNlN,IAAA,CAACvB,eAAe,EAAA0O,QAAA,CACbhL,QAAQ,eACPjC,KAAA,CAAC1B,MAAM,CAAC8O,GAAG,EACTJ,SAAS,CAAC,kBAAkB,CAC5BK,OAAO,CAAE,CAAEmC,CAAC,CAAE,MAAO,CAAE,CACvBjC,OAAO,CAAE,CAAEiC,CAAC,CAAE,CAAE,CAAE,CAClBhC,IAAI,CAAE,CAAEgC,CAAC,CAAE,MAAO,CAAE,CACpBjB,UAAU,CAAE,CAAEZ,IAAI,CAAE,QAAQ,CAAE8B,OAAO,CAAE,EAAE,CAAEC,SAAS,CAAE,GAAI,CAAE,CAAAzC,QAAA,eAE5DjN,KAAA,QAAKgN,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BnN,IAAA,OAAAmN,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BnN,IAAA,WACEkN,SAAS,CAAC,YAAY,CACtBE,OAAO,CAAEA,CAAA,GAAMhL,WAAW,CAAC,KAAK,CAAE,CAAA+K,QAAA,cAElCnN,IAAA,CAAClB,CAAC,EAACoO,SAAS,CAAC,YAAY,CAAE,CAAC,CACtB,CAAC,EACN,CAAC,cAENhN,KAAA,QAAKgN,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1BtL,aAAa,CAACgI,KAAK,eAClB3J,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,OAAK,CAAO,CAAC,cACpBnN,IAAA,SAAAmN,QAAA,CAAOtL,aAAa,CAACgI,KAAK,CAAO,CAAC,EAC/B,CACN,CAEA,EAAAtJ,qBAAA,CAAAsB,aAAa,CAAC2J,QAAQ,UAAAjL,qBAAA,iBAAtBA,qBAAA,CAAwBwJ,WAAW,gBAClC7J,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BnN,IAAA,SAAAmN,QAAA,CAAOtL,aAAa,CAAC2J,QAAQ,CAACzB,WAAW,CAAO,CAAC,EAC9C,CACN,CAGA,EAAAvJ,sBAAA,CAAAqB,aAAa,CAAC2J,QAAQ,UAAAhL,sBAAA,iBAAtBA,sBAAA,CAAwBiL,WAAW,gBAClCvL,KAAA,QAAKgN,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BnN,IAAA,OAAIkN,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,CAEjDtL,aAAa,CAAC2J,QAAQ,CAACC,WAAW,CAACC,MAAM,eACxCxL,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,QAAM,CAAO,CAAC,cACrBnN,IAAA,SAAAmN,QAAA,CAAOtL,aAAa,CAAC2J,QAAQ,CAACC,WAAW,CAACC,MAAM,CAAO,CAAC,EACrD,CACN,CAEA7J,aAAa,CAAC2J,QAAQ,CAACC,WAAW,CAACyD,UAAU,eAC5ChP,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,YAAU,CAAO,CAAC,cACzBnN,IAAA,SAAAmN,QAAA,CAAOtL,aAAa,CAAC2J,QAAQ,CAACC,WAAW,CAACyD,UAAU,CAAO,CAAC,EACzD,CACN,CAEArN,aAAa,CAAC2J,QAAQ,CAACC,WAAW,CAACE,IAAI,eACtCzL,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,MAAI,CAAO,CAAC,cACnBnN,IAAA,SAAAmN,QAAA,CAAOtL,aAAa,CAAC2J,QAAQ,CAACC,WAAW,CAACE,IAAI,CAAO,CAAC,EACnD,CACN,CAEA9J,aAAa,CAAC2J,QAAQ,CAACC,WAAW,CAACoE,MAAM,eACxC3P,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,QAAM,CAAO,CAAC,cACrBnN,IAAA,SAAAmN,QAAA,CAAOtL,aAAa,CAAC2J,QAAQ,CAACC,WAAW,CAACoE,MAAM,CAAO,CAAC,EACrD,CACN,EACE,CACN,CAGA,EAAApP,sBAAA,CAAAoB,aAAa,CAAC2J,QAAQ,UAAA/K,sBAAA,iBAAtBA,sBAAA,CAAwBmL,YAAY,gBACnC1L,KAAA,QAAKgN,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BnN,IAAA,OAAIkN,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,sBAAoB,CAAI,CAAC,CAEtDtL,aAAa,CAAC2J,QAAQ,CAACI,YAAY,CAACC,KAAK,eACxC3L,KAAA,QAAKgN,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCnN,IAAA,UAAAmN,QAAA,CAAO,OAAK,CAAO,CAAC,cACpBjN,KAAA,SAAMgN,SAAS,CAAC,aAAa,CAAAC,QAAA,EAAC,GAAC,CAACtL,aAAa,CAAC2J,QAAQ,CAACI,YAAY,CAACC,KAAK,CAACC,cAAc,CAAC,CAAC,EAAO,CAAC,EAC/F,CACN,cAED5L,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,cAAY,CAAO,CAAC,cAC3BnN,IAAA,SAAMkN,SAAS,iBAAA1I,MAAA,CAAkB3C,aAAa,CAAC2J,QAAQ,CAACI,YAAY,CAACuD,SAAS,CAAG,WAAW,CAAG,aAAa,CAAG,CAAAhC,QAAA,CAC5GtL,aAAa,CAAC2J,QAAQ,CAACI,YAAY,CAACuD,SAAS,CAAG,WAAW,CAAG,MAAM,CACjE,CAAC,EACJ,CAAC,CAELtN,aAAa,CAAC2J,QAAQ,CAACI,YAAY,CAACkE,OAAO,eAC1C5P,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,SAAO,CAAO,CAAC,cACtBnN,IAAA,SAAAmN,QAAA,CAAOtL,aAAa,CAAC2J,QAAQ,CAACI,YAAY,CAACkE,OAAO,CAAO,CAAC,EACvD,CACN,EACE,CACN,cAGD5P,KAAA,QAAKgN,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BnN,IAAA,OAAIkN,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,mBAAiB,CAAI,CAAC,CAEnDtL,aAAa,CAACkO,SAAS,eACtB7P,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,YAAU,CAAO,CAAC,cACzBnN,IAAA,SAAAmN,QAAA,CAAOhB,UAAU,CAACtK,aAAa,CAACkO,SAAS,CAAC,CAAO,CAAC,EAC/C,CACN,CAEAlO,aAAa,CAACmI,QAAQ,eACrB9J,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,UAAQ,CAAO,CAAC,cACvBnN,IAAA,SAAAmN,QAAA,CAAOtL,aAAa,CAACmI,QAAQ,CAAO,CAAC,EAClC,CACN,CAEAnI,aAAa,CAACmO,QAAQ,eACrB9P,KAAA,CAAAE,SAAA,EAAA+M,QAAA,EACGtL,aAAa,CAACmO,QAAQ,CAACC,MAAM,eAC5B/P,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,QAAM,CAAO,CAAC,cACrBnN,IAAA,SAAAmN,QAAA,CAAOtL,aAAa,CAACmO,QAAQ,CAACC,MAAM,CAAO,CAAC,EACzC,CACN,CAEApO,aAAa,CAACmO,QAAQ,CAACE,IAAI,eAC1BhQ,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,MAAI,CAAO,CAAC,cACnBnN,IAAA,SAAAmN,QAAA,CAAOtL,aAAa,CAACmO,QAAQ,CAACE,IAAI,CAAO,CAAC,EACvC,CACN,CAEAzD,oBAAoB,CAAC5K,aAAa,CAACmO,QAAQ,CAAC,eAC3C9P,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,UAAQ,CAAO,CAAC,cACvBnN,IAAA,SAAAmN,QAAA,CAAOV,oBAAoB,CAAC5K,aAAa,CAACmO,QAAQ,CAAC,CAAO,CAAC,EACxD,CACN,EACD,CACH,cAED9P,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,YAAU,CAAO,CAAC,cACzBjN,KAAA,SAAAiN,QAAA,EAAOtL,aAAa,CAACsO,KAAK,CAAC,QAAG,CAACtO,aAAa,CAACuO,MAAM,EAAO,CAAC,EACxD,CAAC,CAELvO,aAAa,CAACwO,QAAQ,eACrBnQ,KAAA,QAAKgN,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnN,IAAA,UAAAmN,QAAA,CAAO,WAAS,CAAO,CAAC,cACxBjN,KAAA,SAAAiN,QAAA,EAAO,CAACtL,aAAa,CAACwO,QAAQ,CAAG,IAAI,CAAG,IAAI,EAAEC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAG,EAAM,CAAC,EAChE,CACN,EACE,CAAC,CAGL,EAAA5P,sBAAA,CAAAmB,aAAa,CAAC2J,QAAQ,UAAA9K,sBAAA,kBAAAC,sBAAA,CAAtBD,sBAAA,CAAwBkL,YAAY,UAAAjL,sBAAA,iBAApCA,sBAAA,CAAsCwO,SAAS,gBAC9CnP,IAAA,QAAKkN,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3CjN,KAAA,WACEgN,SAAS,CAAC,sBAAsB,CAChCE,OAAO,CAAEA,CAAA,GAAMjC,aAAa,CAACtJ,aAAa,CAAE,CAAAsL,QAAA,eAE5CnN,IAAA,CAACN,IAAI,EAACwN,SAAS,CAAC,cAAc,CAAE,CAAC,6BAEnC,EAAQ,CAAC,CACN,CACN,EACE,CAAC,EACI,CACb,CACc,CAAC,EACd,CAAC,CACI,CACb,CACc,CAAC,EACf,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7M,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}