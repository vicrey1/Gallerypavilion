{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/Desktop/Gallerypavilion/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{motion}from'framer-motion';import{useAuth}from'../contexts/AuthContext';import axios from'axios';import{PhotoIcon,CloudArrowUpIcon,XMarkIcon}from'@heroicons/react/24/outline';import{toast}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateGalleryPage=()=>{const{user,isAuthenticated}=useAuth();const navigate=useNavigate();const[loading,setLoading]=useState(false);const[formData,setFormData]=useState({title:'',description:'',category:'',collections:[],settings:{allowDownload:false,showMetadata:true,enableComments:false,watermarkIntensity:0.3,requirePassword:false,password:'',isPublished:true,expirationDate:'',allowInquiries:true,inviteOnly:false}});const[coverImage,setCoverImage]=useState(null);const[coverImagePreview,setCoverImagePreview]=useState(null);const[newCollection,setNewCollection]=useState('');const[errors,setErrors]=useState({});const categories=['Portrait','Wedding','Landscape','Wildlife','Street','Fashion','Commercial','Fine Art','Event','Documentary'];// Handle form input changes\nconst handleInputChange=e=>{const{name,value,type,checked}=e.target;if(name.startsWith('settings.')){const settingName=name.split('.')[1];setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{settings:_objectSpread(_objectSpread({},prev.settings),{},{[settingName]:type==='checkbox'?checked:settingName==='watermarkIntensity'?parseFloat(value):value})}));}else{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));}// Clear error when user starts typing (supports nested settings fields)\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:null}));}};// Handle cover image upload\nconst handleCoverImageChange=e=>{const file=e.target.files[0];if(file){if(file.size>10*1024*1024){// 10MB limit\ntoast.error('Cover image must be less than 10MB');return;}if(!file.type.startsWith('image/')){toast.error('Please select a valid image file');return;}setCoverImage(file);// Create preview\nconst reader=new FileReader();reader.onload=e=>setCoverImagePreview(e.target.result);reader.readAsDataURL(file);}};// Remove cover image\nconst removeCoverImage=()=>{setCoverImage(null);setCoverImagePreview(null);};// Add collection\nconst addCollection=()=>{if(newCollection.trim()&&!formData.collections.includes(newCollection.trim())){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{collections:[...prev.collections,newCollection.trim()]}));setNewCollection('');}};// Remove collection\nconst removeCollection=index=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{collections:prev.collections.filter((_,i)=>i!==index)}));};// Validate form\nconst validateForm=()=>{const newErrors={};if(!formData.title.trim()){newErrors.title='Gallery title is required';}else if(formData.title.length>100){newErrors.title='Title cannot exceed 100 characters';}if(!formData.description.trim()){newErrors.description='Gallery description is required';}else if(formData.description.length>1000){newErrors.description='Description cannot exceed 1000 characters';}if(!formData.category){newErrors.category='Please select a category';}if(formData.settings.requirePassword&&!formData.settings.password.trim()){newErrors['settings.password']='Password is required when password protection is enabled';}setErrors(newErrors);return Object.keys(newErrors).length===0;};// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();if(!validateForm()){toast.error('Please fix the errors in the form');return;}setLoading(true);try{// Create FormData for file upload\nconst submitData=new FormData();// Prepare settings strictly matching backend schema\nconst rawSettings=_objectSpread({},formData.settings);// Map numeric intensity (0..1) to enum: 'light' | 'medium' | 'heavy'\nconst numericIntensity=typeof rawSettings.watermarkIntensity==='number'?rawSettings.watermarkIntensity:parseFloat(rawSettings.watermarkIntensity||0.5);const watermarkEnum=Number.isFinite(numericIntensity)?numericIntensity<=0.33?'light':numericIntensity<=0.66?'medium':'heavy':'medium';const settingsPayload={allowDownload:!!rawSettings.allowDownload,showMetadata:!!rawSettings.showMetadata,enableComments:!!rawSettings.enableComments,watermarkIntensity:watermarkEnum,sortOrder:rawSettings.sortOrder||'newest',inviteOnly:!!rawSettings.inviteOnly};// Add gallery data - ensure proper formatting and trimming\nsubmitData.append('title',(formData.title||'').trim());submitData.append('description',(formData.description||'').trim());submitData.append('category',formData.category);submitData.append('collections',JSON.stringify((formData.collections||[]).map(c=>c.trim()).filter(Boolean)));submitData.append('settings',JSON.stringify(settingsPayload));// Add cover image if selected\nif(coverImage){submitData.append('coverImage',coverImage);}// Debug: Log what's being sent\nconsole.log('Submitting gallery data:',{title:formData.title,description:formData.description,category:formData.category,collections:formData.collections,settings:settingsPayload});const response=await axios.post('/galleries',submitData,{headers:{'Content-Type':'multipart/form-data'}});if(response.data.success){toast.success('Gallery created successfully!');navigate(\"/gallery/\".concat(response.data.gallery._id,\"/edit\"));}else{throw new Error(response.data.message||'Failed to create gallery');}}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;console.error('Error creating gallery:',err);// Log detailed error information\nif(err.response){console.error('Response data:',err.response.data);console.error('Response status:',err.response.status);console.error('Response headers:',err.response.headers);}const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to create gallery';toast.error(errorMessage);// Handle validation errors\nif((_err$response2=err.response)!==null&&_err$response2!==void 0&&(_err$response2$data=_err$response2.data)!==null&&_err$response2$data!==void 0&&_err$response2$data.errors){const validationErrors={};err.response.data.errors.forEach(error=>{const key=error.path||error.param||error.field;if(key){validationErrors[key]=error.msg||error.message||'Invalid value';}});const firstError=Object.values(validationErrors)[0];if(firstError){toast.error(firstError);}setErrors(validationErrors);}}finally{setLoading(false);}};if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Authentication Required\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Please log in to create a gallery.\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn-primary\",children:\"Log In\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center h-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/galleries\",className:\"text-gray-600 hover:text-gray-900\",children:\"\\u2190 Back to Galleries\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-2xl font-serif font-bold gradient-text\",children:\"Gallery Pavilion\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[\"Welcome, \",user===null||user===void 0?void 0:user.firstName]})})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-serif font-bold text-gray-900 mb-2\",children:\"Create New Gallery\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Set up a new photo gallery for your clients. You can add photos after creating the gallery.\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Gallery Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:formData.title,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.title?'border-red-300':'border-gray-300'),placeholder:\"Enter gallery title\",maxLength:100}),errors.title&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[formData.title.length,\"/100 characters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",name:\"category\",value:formData.category,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.category?'border-red-300':'border-gray-300'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a category\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))]}),errors.category&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.category})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Collections\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCollection,onChange:e=>setNewCollection(e.target.value),onKeyPress:e=>e.key==='Enter'&&(e.preventDefault(),addCollection()),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",placeholder:\"Add collection tag\",maxLength:50}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addCollection,className:\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\",children:\"Add\"})]}),formData.collections.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 flex flex-wrap gap-2\",children:formData.collections.map((collection,index)=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-3 py-1 bg-primary-100 text-primary-800 text-sm rounded-full\",children:[collection,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeCollection(index),className:\"ml-2 text-primary-600 hover:text-primary-800\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-4 h-4\"})})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",value:formData.description,onChange:handleInputChange,rows:4,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.description?'border-red-300':'border-gray-300'),placeholder:\"Describe your gallery\",maxLength:1000}),errors.description&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[formData.description.length,\"/1000 characters\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Cover Image\"}),!coverImagePreview?/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\",children:[/*#__PURE__*/_jsx(CloudArrowUpIcon,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Upload a cover image for your gallery\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleCoverImageChange,className:\"hidden\",id:\"coverImage\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"coverImage\",className:\"btn-secondary cursor-pointer\",children:\"Choose Image\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"PNG, JPG, GIF up to 10MB\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:coverImagePreview,alt:\"Cover preview\",className:\"w-full h-64 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:removeCoverImage,className:\"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-4 h-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Gallery Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"allowDownload\",name:\"settings.allowDownload\",checked:formData.settings.allowDownload,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"allowDownload\",className:\"ml-2 block text-sm text-gray-700\",children:\"Allow photo downloads\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"showMetadata\",name:\"settings.showMetadata\",checked:formData.settings.showMetadata,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"showMetadata\",className:\"ml-2 block text-sm text-gray-700\",children:\"Show photo metadata\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"enableComments\",name:\"settings.enableComments\",checked:formData.settings.enableComments,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"enableComments\",className:\"ml-2 block text-sm text-gray-700\",children:\"Enable comments\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"requirePassword\",name:\"settings.requirePassword\",checked:formData.settings.requirePassword,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"requirePassword\",className:\"ml-2 block text-sm text-gray-700\",children:\"Require password for access\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"isPublished\",name:\"settings.isPublished\",checked:formData.settings.isPublished,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"isPublished\",className:\"ml-2 block text-sm text-gray-700\",children:\"Publish gallery (make visible to clients)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"allowInquiries\",name:\"settings.allowInquiries\",checked:formData.settings.allowInquiries,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"allowInquiries\",className:\"ml-2 block text-sm text-gray-700\",children:\"Allow client inquiries\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"inviteOnly\",name:\"settings.inviteOnly\",checked:formData.settings.inviteOnly,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inviteOnly\",className:\"ml-2 block text-sm text-gray-700\",children:\"Invite-only access (requires invitation code)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sortOrder\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Default photo sort order\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"sortOrder\",name:\"settings.sortOrder\",value:formData.settings.sortOrder||'newest',onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent border-gray-300\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"Newest first\"}),/*#__PURE__*/_jsx(\"option\",{value:\"oldest\",children:\"Oldest first\"}),/*#__PURE__*/_jsx(\"option\",{value:\"custom\",children:\"Custom (manual)\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Controls how photos are ordered for viewers.\"})]})]}),formData.settings.requirePassword&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Gallery Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"settings.password\",value:formData.settings.password,onChange:handleInputChange,className:\"w-full max-w-md px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors['settings.password']?'border-red-300':'border-gray-300'),placeholder:\"Enter gallery password\"}),errors['settings.password']&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors['settings.password']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"expirationDate\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Gallery Expiration Date (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",id:\"expirationDate\",name:\"settings.expirationDate\",value:formData.settings.expirationDate,onChange:handleInputChange,className:\"w-full max-w-md px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Gallery will automatically become inaccessible after this date\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"watermarkIntensity\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Watermark Intensity: \",Math.round(formData.settings.watermarkIntensity*100),\"%\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",id:\"watermarkIntensity\",name:\"settings.watermarkIntensity\",min:\"0\",max:\"1\",step:\"0.1\",value:formData.settings.watermarkIntensity,onChange:handleInputChange,className:\"w-full max-w-md\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Controls the opacity of watermarks on preview images\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/galleries\",className:\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:loading,className:\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:loading?'Creating...':'Create Gallery'})]})]})]})]})})]});};export default CreateGalleryPage;","map":{"version":3,"names":["React","useState","Link","useNavigate","motion","useAuth","axios","PhotoIcon","CloudArrowUpIcon","XMarkIcon","toast","jsx","_jsx","jsxs","_jsxs","CreateGalleryPage","user","isAuthenticated","navigate","loading","setLoading","formData","setFormData","title","description","category","collections","settings","allowDownload","showMetadata","enableComments","watermarkIntensity","requirePassword","password","isPublished","expirationDate","allowInquiries","inviteOnly","coverImage","setCoverImage","coverImagePreview","setCoverImagePreview","newCollection","setNewCollection","errors","setErrors","categories","handleInputChange","e","name","value","type","checked","target","startsWith","settingName","split","prev","_objectSpread","parseFloat","handleCoverImageChange","file","files","size","error","reader","FileReader","onload","result","readAsDataURL","removeCoverImage","addCollection","trim","includes","removeCollection","index","filter","_","i","validateForm","newErrors","length","Object","keys","handleSubmit","preventDefault","submitData","FormData","rawSettings","numericIntensity","watermarkEnum","Number","isFinite","settingsPayload","sortOrder","append","JSON","stringify","map","c","Boolean","console","log","response","post","headers","data","success","concat","gallery","_id","Error","message","err","_err$response","_err$response$data","_err$response2","_err$response2$data","status","errorMessage","validationErrors","forEach","key","path","param","field","msg","firstError","values","className","children","to","firstName","div","initial","opacity","y","animate","transition","duration","onSubmit","htmlFor","id","onChange","placeholder","maxLength","onKeyPress","onClick","collection","rows","accept","src","alt","Math","round","min","max","step","disabled"],"sources":["C:/Users/USER/Desktop/Gallerypavilion/frontend/src/pages/CreateGalleryPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport { useAuth } from '../contexts/AuthContext';\nimport axios from 'axios';\nimport {\n  PhotoIcon,\n  CloudArrowUpIcon,\n  XMarkIcon\n} from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\n\nconst CreateGalleryPage = () => {\n  const { user, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    category: '',\n    collections: [],\n    settings: {\n      allowDownload: false,\n      showMetadata: true,\n      enableComments: false,\n      watermarkIntensity: 0.3,\n      requirePassword: false,\n      password: '',\n      isPublished: true,\n      expirationDate: '',\n      allowInquiries: true,\n      inviteOnly: false\n    }\n  });\n  const [coverImage, setCoverImage] = useState(null);\n  const [coverImagePreview, setCoverImagePreview] = useState(null);\n  const [newCollection, setNewCollection] = useState('');\n  const [errors, setErrors] = useState({});\n\n  const categories = [\n    'Portrait', 'Wedding', 'Landscape', 'Wildlife', 'Street',\n    'Fashion', 'Commercial', 'Fine Art', 'Event', 'Documentary'\n  ];\n\n  // Handle form input changes\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    \n    if (name.startsWith('settings.')) {\n      const settingName = name.split('.')[1];\n      setFormData(prev => ({\n        ...prev,\n        settings: {\n          ...prev.settings,\n          [settingName]: type === 'checkbox'\n            ? checked\n            : (settingName === 'watermarkIntensity' ? parseFloat(value) : value)\n        }\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: type === 'checkbox' ? checked : value\n      }));\n    }\n    \n    // Clear error when user starts typing (supports nested settings fields)\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: null }));\n    }\n  };\n\n  // Handle cover image upload\n  const handleCoverImageChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.size > 10 * 1024 * 1024) { // 10MB limit\n        toast.error('Cover image must be less than 10MB');\n        return;\n      }\n      \n      if (!file.type.startsWith('image/')) {\n        toast.error('Please select a valid image file');\n        return;\n      }\n      \n      setCoverImage(file);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => setCoverImagePreview(e.target.result);\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // Remove cover image\n  const removeCoverImage = () => {\n    setCoverImage(null);\n    setCoverImagePreview(null);\n  };\n\n  // Add collection\n  const addCollection = () => {\n    if (newCollection.trim() && !formData.collections.includes(newCollection.trim())) {\n      setFormData(prev => ({\n        ...prev,\n        collections: [...prev.collections, newCollection.trim()]\n      }));\n      setNewCollection('');\n    }\n  };\n\n  // Remove collection\n  const removeCollection = (index) => {\n    setFormData(prev => ({\n      ...prev,\n      collections: prev.collections.filter((_, i) => i !== index)\n    }));\n  };\n\n  // Validate form\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!formData.title.trim()) {\n      newErrors.title = 'Gallery title is required';\n    } else if (formData.title.length > 100) {\n      newErrors.title = 'Title cannot exceed 100 characters';\n    }\n    \n    if (!formData.description.trim()) {\n      newErrors.description = 'Gallery description is required';\n    } else if (formData.description.length > 1000) {\n      newErrors.description = 'Description cannot exceed 1000 characters';\n    }\n    \n    if (!formData.category) {\n      newErrors.category = 'Please select a category';\n    }\n    \n    if (formData.settings.requirePassword && !formData.settings.password.trim()) {\n      newErrors['settings.password'] = 'Password is required when password protection is enabled';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      toast.error('Please fix the errors in the form');\n      return;\n    }\n    \n    setLoading(true);\n    \n    try {\n      // Create FormData for file upload\n      const submitData = new FormData();\n\n      // Prepare settings strictly matching backend schema\n      const rawSettings = { ...formData.settings };\n\n      // Map numeric intensity (0..1) to enum: 'light' | 'medium' | 'heavy'\n      const numericIntensity = typeof rawSettings.watermarkIntensity === 'number'\n        ? rawSettings.watermarkIntensity\n        : parseFloat(rawSettings.watermarkIntensity || 0.5);\n      const watermarkEnum = Number.isFinite(numericIntensity)\n        ? (numericIntensity <= 0.33 ? 'light' : (numericIntensity <= 0.66 ? 'medium' : 'heavy'))\n        : 'medium';\n\n      const settingsPayload = {\n        allowDownload: !!rawSettings.allowDownload,\n        showMetadata: !!rawSettings.showMetadata,\n        enableComments: !!rawSettings.enableComments,\n        watermarkIntensity: watermarkEnum,\n        sortOrder: rawSettings.sortOrder || 'newest',\n        inviteOnly: !!rawSettings.inviteOnly\n      };\n\n      // Add gallery data - ensure proper formatting and trimming\n      submitData.append('title', (formData.title || '').trim());\n      submitData.append('description', (formData.description || '').trim());\n      submitData.append('category', formData.category);\n      submitData.append('collections', JSON.stringify((formData.collections || []).map(c => c.trim()).filter(Boolean)));\n      submitData.append('settings', JSON.stringify(settingsPayload));\n      \n      // Add cover image if selected\n      if (coverImage) {\n        submitData.append('coverImage', coverImage);\n      }\n      \n      // Debug: Log what's being sent\n      console.log('Submitting gallery data:', {\n        title: formData.title,\n        description: formData.description,\n        category: formData.category,\n        collections: formData.collections,\n        settings: settingsPayload\n      });\n      \n      const response = await axios.post('/galleries', submitData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      if (response.data.success) {\n        toast.success('Gallery created successfully!');\n        navigate(`/gallery/${response.data.gallery._id}/edit`);\n      } else {\n        throw new Error(response.data.message || 'Failed to create gallery');\n      }\n      \n    } catch (err) {\n      console.error('Error creating gallery:', err);\n      \n      // Log detailed error information\n      if (err.response) {\n        console.error('Response data:', err.response.data);\n        console.error('Response status:', err.response.status);\n        console.error('Response headers:', err.response.headers);\n      }\n      \n      const errorMessage = err.response?.data?.message || 'Failed to create gallery';\n      toast.error(errorMessage);\n      \n      // Handle validation errors\n      if (err.response?.data?.errors) {\n        const validationErrors = {};\n        err.response.data.errors.forEach(error => {\n          const key = error.path || error.param || error.field;\n          if (key) {\n            validationErrors[key] = error.msg || error.message || 'Invalid value';\n          }\n        });\n        const firstError = Object.values(validationErrors)[0];\n        if (firstError) {\n          toast.error(firstError);\n        }\n        setErrors(validationErrors);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Authentication Required</h2>\n          <p className=\"text-gray-600 mb-6\">Please log in to create a gallery.</p>\n          <Link to=\"/login\" className=\"btn-primary\">\n            Log In\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center space-x-4\">\n              <Link to=\"/galleries\" className=\"text-gray-600 hover:text-gray-900\">\n                ‚Üê Back to Galleries\n              </Link>\n              <Link to=\"/\" className=\"text-2xl font-serif font-bold gradient-text\">\n                Gallery Pavilion\n              </Link>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <span className=\"text-sm text-gray-600\">Welcome, {user?.firstName}</span>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n        >\n          {/* Page Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-serif font-bold text-gray-900 mb-2\">\n              Create New Gallery\n            </h1>\n            <p className=\"text-gray-600\">\n              Set up a new photo gallery for your clients. You can add photos after creating the gallery.\n            </p>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-8\">\n            {/* Basic Information */}\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Basic Information</h2>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {/* Title */}\n                <div className=\"md:col-span-2\">\n                  <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Gallery Title *\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"title\"\n                    name=\"title\"\n                    value={formData.title}\n                    onChange={handleInputChange}\n                    className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                      errors.title ? 'border-red-300' : 'border-gray-300'\n                    }`}\n                    placeholder=\"Enter gallery title\"\n                    maxLength={100}\n                  />\n                  {errors.title && <p className=\"mt-1 text-sm text-red-600\">{errors.title}</p>}\n                  <p className=\"mt-1 text-sm text-gray-500\">{formData.title.length}/100 characters</p>\n                </div>\n\n                {/* Category */}\n                <div>\n                  <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Category *\n                  </label>\n                  <select\n                    id=\"category\"\n                    name=\"category\"\n                    value={formData.category}\n                    onChange={handleInputChange}\n                    className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                      errors.category ? 'border-red-300' : 'border-gray-300'\n                    }`}\n                  >\n                    <option value=\"\">Select a category</option>\n                    {categories.map(category => (\n                      <option key={category} value={category}>{category}</option>\n                    ))}\n                  </select>\n                  {errors.category && <p className=\"mt-1 text-sm text-red-600\">{errors.category}</p>}\n                </div>\n\n                {/* Collections */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Collections\n                  </label>\n                  <div className=\"flex space-x-2\">\n                    <input\n                      type=\"text\"\n                      value={newCollection}\n                      onChange={(e) => setNewCollection(e.target.value)}\n                      onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addCollection())}\n                      className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                      placeholder=\"Add collection tag\"\n                      maxLength={50}\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={addCollection}\n                      className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\n                    >\n                      Add\n                    </button>\n                  </div>\n                  {formData.collections.length > 0 && (\n                    <div className=\"mt-2 flex flex-wrap gap-2\">\n                      {formData.collections.map((collection, index) => (\n                        <span\n                          key={index}\n                          className=\"inline-flex items-center px-3 py-1 bg-primary-100 text-primary-800 text-sm rounded-full\"\n                        >\n                          {collection}\n                          <button\n                            type=\"button\"\n                            onClick={() => removeCollection(index)}\n                            className=\"ml-2 text-primary-600 hover:text-primary-800\"\n                          >\n                            <XMarkIcon className=\"w-4 h-4\" />\n                          </button>\n                        </span>\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                {/* Description */}\n                <div className=\"md:col-span-2\">\n                  <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Description *\n                  </label>\n                  <textarea\n                    id=\"description\"\n                    name=\"description\"\n                    value={formData.description}\n                    onChange={handleInputChange}\n                    rows={4}\n                    className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                      errors.description ? 'border-red-300' : 'border-gray-300'\n                    }`}\n                    placeholder=\"Describe your gallery\"\n                    maxLength={1000}\n                  />\n                  {errors.description && <p className=\"mt-1 text-sm text-red-600\">{errors.description}</p>}\n                  <p className=\"mt-1 text-sm text-gray-500\">{formData.description.length}/1000 characters</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Cover Image */}\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Cover Image</h2>\n              \n              {!coverImagePreview ? (\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                  <CloudArrowUpIcon className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                  <p className=\"text-gray-600 mb-4\">Upload a cover image for your gallery</p>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleCoverImageChange}\n                    className=\"hidden\"\n                    id=\"coverImage\"\n                  />\n                  <label\n                    htmlFor=\"coverImage\"\n                    className=\"btn-secondary cursor-pointer\"\n                  >\n                    Choose Image\n                  </label>\n                  <p className=\"text-sm text-gray-500 mt-2\">PNG, JPG, GIF up to 10MB</p>\n                </div>\n              ) : (\n                <div className=\"relative\">\n                  <img\n                    src={coverImagePreview}\n                    alt=\"Cover preview\"\n                    className=\"w-full h-64 object-cover rounded-lg\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={removeCoverImage}\n                    className=\"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors\"\n                  >\n                    <XMarkIcon className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* Gallery Settings */}\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Gallery Settings</h2>\n              \n              <div className=\"space-y-6\">\n                {/* Basic Settings */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"allowDownload\"\n                      name=\"settings.allowDownload\"\n                      checked={formData.settings.allowDownload}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"allowDownload\" className=\"ml-2 block text-sm text-gray-700\">\n                      Allow photo downloads\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"showMetadata\"\n                      name=\"settings.showMetadata\"\n                      checked={formData.settings.showMetadata}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"showMetadata\" className=\"ml-2 block text-sm text-gray-700\">\n                      Show photo metadata\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"enableComments\"\n                      name=\"settings.enableComments\"\n                      checked={formData.settings.enableComments}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"enableComments\" className=\"ml-2 block text-sm text-gray-700\">\n                      Enable comments\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"requirePassword\"\n                      name=\"settings.requirePassword\"\n                      checked={formData.settings.requirePassword}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"requirePassword\" className=\"ml-2 block text-sm text-gray-700\">\n                      Require password for access\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"isPublished\"\n                      name=\"settings.isPublished\"\n                      checked={formData.settings.isPublished}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"isPublished\" className=\"ml-2 block text-sm text-gray-700\">\n                      Publish gallery (make visible to clients)\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"allowInquiries\"\n                      name=\"settings.allowInquiries\"\n                      checked={formData.settings.allowInquiries}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"allowInquiries\" className=\"ml-2 block text-sm text-gray-700\">\n                      Allow client inquiries\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"inviteOnly\"\n                      name=\"settings.inviteOnly\"\n                      checked={formData.settings.inviteOnly}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"inviteOnly\" className=\"ml-2 block text-sm text-gray-700\">\n                      Invite-only access (requires invitation code)\n                    </label>\n                  </div>\n\n                  {/* Default Sort Order */}\n                  <div>\n                    <label htmlFor=\"sortOrder\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Default photo sort order\n                    </label>\n                    <select\n                      id=\"sortOrder\"\n                      name=\"settings.sortOrder\"\n                      value={formData.settings.sortOrder || 'newest'}\n                      onChange={handleInputChange}\n                      className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent border-gray-300\"\n                    >\n                      <option value=\"newest\">Newest first</option>\n                      <option value=\"oldest\">Oldest first</option>\n                      <option value=\"custom\">Custom (manual)</option>\n                    </select>\n                    <p className=\"text-sm text-gray-500 mt-1\">Controls how photos are ordered for viewers.</p>\n                  </div>\n                </div>\n\n                {/* Password Field */}\n                {formData.settings.requirePassword && (\n                  <div>\n                    <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Gallery Password *\n                    </label>\n                    <input\n                      type=\"password\"\n                      id=\"password\"\n                      name=\"settings.password\"\n                      value={formData.settings.password}\n                      onChange={handleInputChange}\n                      className={`w-full max-w-md px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors['settings.password'] ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter gallery password\"\n                    />\n                    {errors['settings.password'] && (\n                      <p className=\"mt-1 text-sm text-red-600\">{errors['settings.password']}</p>\n                    )}\n                  </div>\n                )}\n                \n                {/* Expiration Date */}\n                <div>\n                  <label htmlFor=\"expirationDate\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Gallery Expiration Date (Optional)\n                  </label>\n                  <input\n                    type=\"datetime-local\"\n                    id=\"expirationDate\"\n                    name=\"settings.expirationDate\"\n                    value={formData.settings.expirationDate}\n                    onChange={handleInputChange}\n                    className=\"w-full max-w-md px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                  />\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    Gallery will automatically become inaccessible after this date\n                  </p>\n                </div>\n\n                {/* Watermark Intensity */}\n                <div>\n                  <label htmlFor=\"watermarkIntensity\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Watermark Intensity: {Math.round(formData.settings.watermarkIntensity * 100)}%\n                  </label>\n                  <input\n                    type=\"range\"\n                    id=\"watermarkIntensity\"\n                    name=\"settings.watermarkIntensity\"\n                    min=\"0\"\n                    max=\"1\"\n                    step=\"0.1\"\n                    value={formData.settings.watermarkIntensity}\n                    onChange={handleInputChange}\n                    className=\"w-full max-w-md\"\n                  />\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    Controls the opacity of watermarks on preview images\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Submit Buttons */}\n            <div className=\"flex justify-end space-x-4\">\n              <Link\n                to=\"/galleries\"\n                className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                Cancel\n              </Link>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\"\n              >\n                {loading && (\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                )}\n                <span>{loading ? 'Creating...' : 'Create Gallery'}</span>\n              </button>\n            </div>\n          </form>\n        </motion.div>\n      </main>\n    </div>\n  );\n};\n\nexport default CreateGalleryPage;"],"mappings":"mIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,MAAM,KAAQ,eAAe,CACtC,OAASC,OAAO,KAAQ,yBAAyB,CACjD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OACEC,SAAS,CACTC,gBAAgB,CAChBC,SAAS,KACJ,6BAA6B,CACpC,OAASC,KAAK,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAEC,IAAI,CAAEC,eAAgB,CAAC,CAAGZ,OAAO,CAAC,CAAC,CAC3C,KAAM,CAAAa,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACoB,QAAQ,CAAEC,WAAW,CAAC,CAAGrB,QAAQ,CAAC,CACvCsB,KAAK,CAAE,EAAE,CACTC,WAAW,CAAE,EAAE,CACfC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,QAAQ,CAAE,CACRC,aAAa,CAAE,KAAK,CACpBC,YAAY,CAAE,IAAI,CAClBC,cAAc,CAAE,KAAK,CACrBC,kBAAkB,CAAE,GAAG,CACvBC,eAAe,CAAE,KAAK,CACtBC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,IAAI,CACjBC,cAAc,CAAE,EAAE,CAClBC,cAAc,CAAE,IAAI,CACpBC,UAAU,CAAE,KACd,CACF,CAAC,CAAC,CACF,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGtC,QAAQ,CAAC,IAAI,CAAC,CAClD,KAAM,CAACuC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGxC,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAACyC,aAAa,CAAEC,gBAAgB,CAAC,CAAG1C,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAC2C,MAAM,CAAEC,SAAS,CAAC,CAAG5C,QAAQ,CAAC,CAAC,CAAC,CAAC,CAExC,KAAM,CAAA6C,UAAU,CAAG,CACjB,UAAU,CAAE,SAAS,CAAE,WAAW,CAAE,UAAU,CAAE,QAAQ,CACxD,SAAS,CAAE,YAAY,CAAE,UAAU,CAAE,OAAO,CAAE,aAAa,CAC5D,CAED;AACA,KAAM,CAAAC,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAEC,IAAI,CAAEC,KAAK,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAGJ,CAAC,CAACK,MAAM,CAE/C,GAAIJ,IAAI,CAACK,UAAU,CAAC,WAAW,CAAC,CAAE,CAChC,KAAM,CAAAC,WAAW,CAAGN,IAAI,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACtClC,WAAW,CAACmC,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACXD,IAAI,MACP9B,QAAQ,CAAA+B,aAAA,CAAAA,aAAA,IACHD,IAAI,CAAC9B,QAAQ,MAChB,CAAC4B,WAAW,EAAGJ,IAAI,GAAK,UAAU,CAC9BC,OAAO,CACNG,WAAW,GAAK,oBAAoB,CAAGI,UAAU,CAACT,KAAK,CAAC,CAAGA,KAAM,EACvE,EACD,CAAC,CACL,CAAC,IAAM,CACL5B,WAAW,CAACmC,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACXD,IAAI,MACP,CAACR,IAAI,EAAGE,IAAI,GAAK,UAAU,CAAGC,OAAO,CAAGF,KAAK,EAC7C,CAAC,CACL,CAEA;AACA,GAAIN,MAAM,CAACK,IAAI,CAAC,CAAE,CAChBJ,SAAS,CAACY,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAE,CAACR,IAAI,EAAG,IAAI,EAAG,CAAC,CAChD,CACF,CAAC,CAED;AACA,KAAM,CAAAW,sBAAsB,CAAIZ,CAAC,EAAK,CACpC,KAAM,CAAAa,IAAI,CAAGb,CAAC,CAACK,MAAM,CAACS,KAAK,CAAC,CAAC,CAAC,CAC9B,GAAID,IAAI,CAAE,CACR,GAAIA,IAAI,CAACE,IAAI,CAAG,EAAE,CAAG,IAAI,CAAG,IAAI,CAAE,CAAE;AAClCrD,KAAK,CAACsD,KAAK,CAAC,oCAAoC,CAAC,CACjD,OACF,CAEA,GAAI,CAACH,IAAI,CAACV,IAAI,CAACG,UAAU,CAAC,QAAQ,CAAC,CAAE,CACnC5C,KAAK,CAACsD,KAAK,CAAC,kCAAkC,CAAC,CAC/C,OACF,CAEAzB,aAAa,CAACsB,IAAI,CAAC,CAEnB;AACA,KAAM,CAAAI,MAAM,CAAG,GAAI,CAAAC,UAAU,CAAC,CAAC,CAC/BD,MAAM,CAACE,MAAM,CAAInB,CAAC,EAAKP,oBAAoB,CAACO,CAAC,CAACK,MAAM,CAACe,MAAM,CAAC,CAC5DH,MAAM,CAACI,aAAa,CAACR,IAAI,CAAC,CAC5B,CACF,CAAC,CAED;AACA,KAAM,CAAAS,gBAAgB,CAAGA,CAAA,GAAM,CAC7B/B,aAAa,CAAC,IAAI,CAAC,CACnBE,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAED;AACA,KAAM,CAAA8B,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAI7B,aAAa,CAAC8B,IAAI,CAAC,CAAC,EAAI,CAACnD,QAAQ,CAACK,WAAW,CAAC+C,QAAQ,CAAC/B,aAAa,CAAC8B,IAAI,CAAC,CAAC,CAAC,CAAE,CAChFlD,WAAW,CAACmC,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACXD,IAAI,MACP/B,WAAW,CAAE,CAAC,GAAG+B,IAAI,CAAC/B,WAAW,CAAEgB,aAAa,CAAC8B,IAAI,CAAC,CAAC,CAAC,EACxD,CAAC,CACH7B,gBAAgB,CAAC,EAAE,CAAC,CACtB,CACF,CAAC,CAED;AACA,KAAM,CAAA+B,gBAAgB,CAAIC,KAAK,EAAK,CAClCrD,WAAW,CAACmC,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACXD,IAAI,MACP/B,WAAW,CAAE+B,IAAI,CAAC/B,WAAW,CAACkD,MAAM,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,GAAKH,KAAK,CAAC,EAC3D,CAAC,CACL,CAAC,CAED;AACA,KAAM,CAAAI,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAAC,SAAS,CAAG,CAAC,CAAC,CAEpB,GAAI,CAAC3D,QAAQ,CAACE,KAAK,CAACiD,IAAI,CAAC,CAAC,CAAE,CAC1BQ,SAAS,CAACzD,KAAK,CAAG,2BAA2B,CAC/C,CAAC,IAAM,IAAIF,QAAQ,CAACE,KAAK,CAAC0D,MAAM,CAAG,GAAG,CAAE,CACtCD,SAAS,CAACzD,KAAK,CAAG,oCAAoC,CACxD,CAEA,GAAI,CAACF,QAAQ,CAACG,WAAW,CAACgD,IAAI,CAAC,CAAC,CAAE,CAChCQ,SAAS,CAACxD,WAAW,CAAG,iCAAiC,CAC3D,CAAC,IAAM,IAAIH,QAAQ,CAACG,WAAW,CAACyD,MAAM,CAAG,IAAI,CAAE,CAC7CD,SAAS,CAACxD,WAAW,CAAG,2CAA2C,CACrE,CAEA,GAAI,CAACH,QAAQ,CAACI,QAAQ,CAAE,CACtBuD,SAAS,CAACvD,QAAQ,CAAG,0BAA0B,CACjD,CAEA,GAAIJ,QAAQ,CAACM,QAAQ,CAACK,eAAe,EAAI,CAACX,QAAQ,CAACM,QAAQ,CAACM,QAAQ,CAACuC,IAAI,CAAC,CAAC,CAAE,CAC3EQ,SAAS,CAAC,mBAAmB,CAAC,CAAG,0DAA0D,CAC7F,CAEAnC,SAAS,CAACmC,SAAS,CAAC,CACpB,MAAO,CAAAE,MAAM,CAACC,IAAI,CAACH,SAAS,CAAC,CAACC,MAAM,GAAK,CAAC,CAC5C,CAAC,CAED;AACA,KAAM,CAAAG,YAAY,CAAG,KAAO,CAAApC,CAAC,EAAK,CAChCA,CAAC,CAACqC,cAAc,CAAC,CAAC,CAElB,GAAI,CAACN,YAAY,CAAC,CAAC,CAAE,CACnBrE,KAAK,CAACsD,KAAK,CAAC,mCAAmC,CAAC,CAChD,OACF,CAEA5C,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACF;AACA,KAAM,CAAAkE,UAAU,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAEjC;AACA,KAAM,CAAAC,WAAW,CAAA9B,aAAA,IAAQrC,QAAQ,CAACM,QAAQ,CAAE,CAE5C;AACA,KAAM,CAAA8D,gBAAgB,CAAG,MAAO,CAAAD,WAAW,CAACzD,kBAAkB,GAAK,QAAQ,CACvEyD,WAAW,CAACzD,kBAAkB,CAC9B4B,UAAU,CAAC6B,WAAW,CAACzD,kBAAkB,EAAI,GAAG,CAAC,CACrD,KAAM,CAAA2D,aAAa,CAAGC,MAAM,CAACC,QAAQ,CAACH,gBAAgB,CAAC,CAClDA,gBAAgB,EAAI,IAAI,CAAG,OAAO,CAAIA,gBAAgB,EAAI,IAAI,CAAG,QAAQ,CAAG,OAAQ,CACrF,QAAQ,CAEZ,KAAM,CAAAI,eAAe,CAAG,CACtBjE,aAAa,CAAE,CAAC,CAAC4D,WAAW,CAAC5D,aAAa,CAC1CC,YAAY,CAAE,CAAC,CAAC2D,WAAW,CAAC3D,YAAY,CACxCC,cAAc,CAAE,CAAC,CAAC0D,WAAW,CAAC1D,cAAc,CAC5CC,kBAAkB,CAAE2D,aAAa,CACjCI,SAAS,CAAEN,WAAW,CAACM,SAAS,EAAI,QAAQ,CAC5CzD,UAAU,CAAE,CAAC,CAACmD,WAAW,CAACnD,UAC5B,CAAC,CAED;AACAiD,UAAU,CAACS,MAAM,CAAC,OAAO,CAAE,CAAC1E,QAAQ,CAACE,KAAK,EAAI,EAAE,EAAEiD,IAAI,CAAC,CAAC,CAAC,CACzDc,UAAU,CAACS,MAAM,CAAC,aAAa,CAAE,CAAC1E,QAAQ,CAACG,WAAW,EAAI,EAAE,EAAEgD,IAAI,CAAC,CAAC,CAAC,CACrEc,UAAU,CAACS,MAAM,CAAC,UAAU,CAAE1E,QAAQ,CAACI,QAAQ,CAAC,CAChD6D,UAAU,CAACS,MAAM,CAAC,aAAa,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAC5E,QAAQ,CAACK,WAAW,EAAI,EAAE,EAAEwE,GAAG,CAACC,CAAC,EAAIA,CAAC,CAAC3B,IAAI,CAAC,CAAC,CAAC,CAACI,MAAM,CAACwB,OAAO,CAAC,CAAC,CAAC,CACjHd,UAAU,CAACS,MAAM,CAAC,UAAU,CAAEC,IAAI,CAACC,SAAS,CAACJ,eAAe,CAAC,CAAC,CAE9D;AACA,GAAIvD,UAAU,CAAE,CACdgD,UAAU,CAACS,MAAM,CAAC,YAAY,CAAEzD,UAAU,CAAC,CAC7C,CAEA;AACA+D,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAE,CACtC/E,KAAK,CAAEF,QAAQ,CAACE,KAAK,CACrBC,WAAW,CAAEH,QAAQ,CAACG,WAAW,CACjCC,QAAQ,CAAEJ,QAAQ,CAACI,QAAQ,CAC3BC,WAAW,CAAEL,QAAQ,CAACK,WAAW,CACjCC,QAAQ,CAAEkE,eACZ,CAAC,CAAC,CAEF,KAAM,CAAAU,QAAQ,CAAG,KAAM,CAAAjG,KAAK,CAACkG,IAAI,CAAC,YAAY,CAAElB,UAAU,CAAE,CAC1DmB,OAAO,CAAE,CACP,cAAc,CAAE,qBAClB,CACF,CAAC,CAAC,CAEF,GAAIF,QAAQ,CAACG,IAAI,CAACC,OAAO,CAAE,CACzBjG,KAAK,CAACiG,OAAO,CAAC,+BAA+B,CAAC,CAC9CzF,QAAQ,aAAA0F,MAAA,CAAaL,QAAQ,CAACG,IAAI,CAACG,OAAO,CAACC,GAAG,SAAO,CAAC,CACxD,CAAC,IAAM,CACL,KAAM,IAAI,CAAAC,KAAK,CAACR,QAAQ,CAACG,IAAI,CAACM,OAAO,EAAI,0BAA0B,CAAC,CACtE,CAEF,CAAE,MAAOC,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CAAAC,cAAA,CAAAC,mBAAA,CACZhB,OAAO,CAACrC,KAAK,CAAC,yBAAyB,CAAEiD,GAAG,CAAC,CAE7C;AACA,GAAIA,GAAG,CAACV,QAAQ,CAAE,CAChBF,OAAO,CAACrC,KAAK,CAAC,gBAAgB,CAAEiD,GAAG,CAACV,QAAQ,CAACG,IAAI,CAAC,CAClDL,OAAO,CAACrC,KAAK,CAAC,kBAAkB,CAAEiD,GAAG,CAACV,QAAQ,CAACe,MAAM,CAAC,CACtDjB,OAAO,CAACrC,KAAK,CAAC,mBAAmB,CAAEiD,GAAG,CAACV,QAAQ,CAACE,OAAO,CAAC,CAC1D,CAEA,KAAM,CAAAc,YAAY,CAAG,EAAAL,aAAA,CAAAD,GAAG,CAACV,QAAQ,UAAAW,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcR,IAAI,UAAAS,kBAAA,iBAAlBA,kBAAA,CAAoBH,OAAO,GAAI,0BAA0B,CAC9EtG,KAAK,CAACsD,KAAK,CAACuD,YAAY,CAAC,CAEzB;AACA,IAAAH,cAAA,CAAIH,GAAG,CAACV,QAAQ,UAAAa,cAAA,YAAAC,mBAAA,CAAZD,cAAA,CAAcV,IAAI,UAAAW,mBAAA,WAAlBA,mBAAA,CAAoBzE,MAAM,CAAE,CAC9B,KAAM,CAAA4E,gBAAgB,CAAG,CAAC,CAAC,CAC3BP,GAAG,CAACV,QAAQ,CAACG,IAAI,CAAC9D,MAAM,CAAC6E,OAAO,CAACzD,KAAK,EAAI,CACxC,KAAM,CAAA0D,GAAG,CAAG1D,KAAK,CAAC2D,IAAI,EAAI3D,KAAK,CAAC4D,KAAK,EAAI5D,KAAK,CAAC6D,KAAK,CACpD,GAAIH,GAAG,CAAE,CACPF,gBAAgB,CAACE,GAAG,CAAC,CAAG1D,KAAK,CAAC8D,GAAG,EAAI9D,KAAK,CAACgD,OAAO,EAAI,eAAe,CACvE,CACF,CAAC,CAAC,CACF,KAAM,CAAAe,UAAU,CAAG7C,MAAM,CAAC8C,MAAM,CAACR,gBAAgB,CAAC,CAAC,CAAC,CAAC,CACrD,GAAIO,UAAU,CAAE,CACdrH,KAAK,CAACsD,KAAK,CAAC+D,UAAU,CAAC,CACzB,CACAlF,SAAS,CAAC2E,gBAAgB,CAAC,CAC7B,CACF,CAAC,OAAS,CACRpG,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAI,CAACH,eAAe,CAAE,CACpB,mBACEL,IAAA,QAAKqH,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvEpH,KAAA,QAAKmH,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BtH,IAAA,OAAIqH,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,yBAAuB,CAAI,CAAC,cAClFtH,IAAA,MAAGqH,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,oCAAkC,CAAG,CAAC,cACxEtH,IAAA,CAACV,IAAI,EAACiI,EAAE,CAAC,QAAQ,CAACF,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,QAE1C,CAAM,CAAC,EACJ,CAAC,CACH,CAAC,CAEV,CAEA,mBACEpH,KAAA,QAAKmH,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eAEtCtH,IAAA,WAAQqH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC7CtH,IAAA,QAAKqH,SAAS,CAAC,wCAAwC,CAAAC,QAAA,cACrDpH,KAAA,QAAKmH,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDpH,KAAA,QAAKmH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CtH,IAAA,CAACV,IAAI,EAACiI,EAAE,CAAC,YAAY,CAACF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,0BAEpE,CAAM,CAAC,cACPtH,IAAA,CAACV,IAAI,EAACiI,EAAE,CAAC,GAAG,CAACF,SAAS,CAAC,6CAA6C,CAAAC,QAAA,CAAC,kBAErE,CAAM,CAAC,EACJ,CAAC,cACNtH,IAAA,QAAKqH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1CpH,KAAA,SAAMmH,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,WAAS,CAAClH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoH,SAAS,EAAO,CAAC,CACtE,CAAC,EACH,CAAC,CACH,CAAC,CACA,CAAC,cAGTxH,IAAA,SAAMqH,SAAS,CAAC,6CAA6C,CAAAC,QAAA,cAC3DpH,KAAA,CAACV,MAAM,CAACiI,GAAG,EACTC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,EAAG,CAAE,CAC/BC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,UAAU,CAAE,CAAEC,QAAQ,CAAE,GAAI,CAAE,CAAAT,QAAA,eAG9BpH,KAAA,QAAKmH,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBtH,IAAA,OAAIqH,SAAS,CAAC,kDAAkD,CAAAC,QAAA,CAAC,oBAEjE,CAAI,CAAC,cACLtH,IAAA,MAAGqH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,6FAE7B,CAAG,CAAC,EACD,CAAC,cAGNpH,KAAA,SAAM8H,QAAQ,CAAExD,YAAa,CAAC6C,SAAS,CAAC,WAAW,CAAAC,QAAA,eAEjDpH,KAAA,QAAKmH,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eACvDtH,IAAA,OAAIqH,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAE/EpH,KAAA,QAAKmH,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eAEpDpH,KAAA,QAAKmH,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BtH,IAAA,UAAOiI,OAAO,CAAC,OAAO,CAACZ,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,iBAEhF,CAAO,CAAC,cACRtH,IAAA,UACEuC,IAAI,CAAC,MAAM,CACX2F,EAAE,CAAC,OAAO,CACV7F,IAAI,CAAC,OAAO,CACZC,KAAK,CAAE7B,QAAQ,CAACE,KAAM,CACtBwH,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,oGAAArB,MAAA,CACPhE,MAAM,CAACrB,KAAK,CAAG,gBAAgB,CAAG,iBAAiB,CAClD,CACHyH,WAAW,CAAC,qBAAqB,CACjCC,SAAS,CAAE,GAAI,CAChB,CAAC,CACDrG,MAAM,CAACrB,KAAK,eAAIX,IAAA,MAAGqH,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEtF,MAAM,CAACrB,KAAK,CAAI,CAAC,cAC5ET,KAAA,MAAGmH,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAE7G,QAAQ,CAACE,KAAK,CAAC0D,MAAM,CAAC,iBAAe,EAAG,CAAC,EACjF,CAAC,cAGNnE,KAAA,QAAAoH,QAAA,eACEtH,IAAA,UAAOiI,OAAO,CAAC,UAAU,CAACZ,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,YAEnF,CAAO,CAAC,cACRpH,KAAA,WACEgI,EAAE,CAAC,UAAU,CACb7F,IAAI,CAAC,UAAU,CACfC,KAAK,CAAE7B,QAAQ,CAACI,QAAS,CACzBsH,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,oGAAArB,MAAA,CACPhE,MAAM,CAACnB,QAAQ,CAAG,gBAAgB,CAAG,iBAAiB,CACrD,CAAAyG,QAAA,eAEHtH,IAAA,WAAQsC,KAAK,CAAC,EAAE,CAAAgF,QAAA,CAAC,mBAAiB,CAAQ,CAAC,CAC1CpF,UAAU,CAACoD,GAAG,CAACzE,QAAQ,eACtBb,IAAA,WAAuBsC,KAAK,CAAEzB,QAAS,CAAAyG,QAAA,CAAEzG,QAAQ,EAApCA,QAA6C,CAC3D,CAAC,EACI,CAAC,CACRmB,MAAM,CAACnB,QAAQ,eAAIb,IAAA,MAAGqH,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEtF,MAAM,CAACnB,QAAQ,CAAI,CAAC,EAC/E,CAAC,cAGNX,KAAA,QAAAoH,QAAA,eACEtH,IAAA,UAAOqH,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,aAEhE,CAAO,CAAC,cACRpH,KAAA,QAAKmH,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BtH,IAAA,UACEuC,IAAI,CAAC,MAAM,CACXD,KAAK,CAAER,aAAc,CACrBqG,QAAQ,CAAG/F,CAAC,EAAKL,gBAAgB,CAACK,CAAC,CAACK,MAAM,CAACH,KAAK,CAAE,CAClDgG,UAAU,CAAGlG,CAAC,EAAKA,CAAC,CAAC0E,GAAG,GAAK,OAAO,GAAK1E,CAAC,CAACqC,cAAc,CAAC,CAAC,CAAEd,aAAa,CAAC,CAAC,CAAE,CAC9E0D,SAAS,CAAC,iHAAiH,CAC3He,WAAW,CAAC,oBAAoB,CAChCC,SAAS,CAAE,EAAG,CACf,CAAC,cACFrI,IAAA,WACEuC,IAAI,CAAC,QAAQ,CACbgG,OAAO,CAAE5E,aAAc,CACvB0D,SAAS,CAAC,uFAAuF,CAAAC,QAAA,CAClG,KAED,CAAQ,CAAC,EACN,CAAC,CACL7G,QAAQ,CAACK,WAAW,CAACuD,MAAM,CAAG,CAAC,eAC9BrE,IAAA,QAAKqH,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACvC7G,QAAQ,CAACK,WAAW,CAACwE,GAAG,CAAC,CAACkD,UAAU,CAAEzE,KAAK,gBAC1C7D,KAAA,SAEEmH,SAAS,CAAC,yFAAyF,CAAAC,QAAA,EAElGkB,UAAU,cACXxI,IAAA,WACEuC,IAAI,CAAC,QAAQ,CACbgG,OAAO,CAAEA,CAAA,GAAMzE,gBAAgB,CAACC,KAAK,CAAE,CACvCsD,SAAS,CAAC,8CAA8C,CAAAC,QAAA,cAExDtH,IAAA,CAACH,SAAS,EAACwH,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,GAVJtD,KAWD,CACP,CAAC,CACC,CACN,EACE,CAAC,cAGN7D,KAAA,QAAKmH,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BtH,IAAA,UAAOiI,OAAO,CAAC,aAAa,CAACZ,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,eAEtF,CAAO,CAAC,cACRtH,IAAA,aACEkI,EAAE,CAAC,aAAa,CAChB7F,IAAI,CAAC,aAAa,CAClBC,KAAK,CAAE7B,QAAQ,CAACG,WAAY,CAC5BuH,QAAQ,CAAEhG,iBAAkB,CAC5BsG,IAAI,CAAE,CAAE,CACRpB,SAAS,oGAAArB,MAAA,CACPhE,MAAM,CAACpB,WAAW,CAAG,gBAAgB,CAAG,iBAAiB,CACxD,CACHwH,WAAW,CAAC,uBAAuB,CACnCC,SAAS,CAAE,IAAK,CACjB,CAAC,CACDrG,MAAM,CAACpB,WAAW,eAAIZ,IAAA,MAAGqH,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEtF,MAAM,CAACpB,WAAW,CAAI,CAAC,cACxFV,KAAA,MAAGmH,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAE7G,QAAQ,CAACG,WAAW,CAACyD,MAAM,CAAC,kBAAgB,EAAG,CAAC,EACxF,CAAC,EACH,CAAC,EACH,CAAC,cAGNnE,KAAA,QAAKmH,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eACvDtH,IAAA,OAAIqH,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,CAExE,CAAC1F,iBAAiB,cACjB1B,KAAA,QAAKmH,SAAS,CAAC,mEAAmE,CAAAC,QAAA,eAChFtH,IAAA,CAACJ,gBAAgB,EAACyH,SAAS,CAAC,sCAAsC,CAAE,CAAC,cACrErH,IAAA,MAAGqH,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,uCAAqC,CAAG,CAAC,cAC3EtH,IAAA,UACEuC,IAAI,CAAC,MAAM,CACXmG,MAAM,CAAC,SAAS,CAChBP,QAAQ,CAAEnF,sBAAuB,CACjCqE,SAAS,CAAC,QAAQ,CAClBa,EAAE,CAAC,YAAY,CAChB,CAAC,cACFlI,IAAA,UACEiI,OAAO,CAAC,YAAY,CACpBZ,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CACzC,cAED,CAAO,CAAC,cACRtH,IAAA,MAAGqH,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,0BAAwB,CAAG,CAAC,EACnE,CAAC,cAENpH,KAAA,QAAKmH,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBtH,IAAA,QACE2I,GAAG,CAAE/G,iBAAkB,CACvBgH,GAAG,CAAC,eAAe,CACnBvB,SAAS,CAAC,qCAAqC,CAChD,CAAC,cACFrH,IAAA,WACEuC,IAAI,CAAC,QAAQ,CACbgG,OAAO,CAAE7E,gBAAiB,CAC1B2D,SAAS,CAAC,kGAAkG,CAAAC,QAAA,cAE5GtH,IAAA,CAACH,SAAS,EAACwH,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,EACN,CACN,EACE,CAAC,cAGNnH,KAAA,QAAKmH,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eACvDtH,IAAA,OAAIqH,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cAE9EpH,KAAA,QAAKmH,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBpH,KAAA,QAAKmH,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDpH,KAAA,QAAKmH,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCtH,IAAA,UACEuC,IAAI,CAAC,UAAU,CACf2F,EAAE,CAAC,eAAe,CAClB7F,IAAI,CAAC,wBAAwB,CAC7BG,OAAO,CAAE/B,QAAQ,CAACM,QAAQ,CAACC,aAAc,CACzCmH,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,CAAC,yEAAyE,CACpF,CAAC,cACFrH,IAAA,UAAOiI,OAAO,CAAC,eAAe,CAACZ,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,uBAE5E,CAAO,CAAC,EACL,CAAC,cAENpH,KAAA,QAAKmH,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCtH,IAAA,UACEuC,IAAI,CAAC,UAAU,CACf2F,EAAE,CAAC,cAAc,CACjB7F,IAAI,CAAC,uBAAuB,CAC5BG,OAAO,CAAE/B,QAAQ,CAACM,QAAQ,CAACE,YAAa,CACxCkH,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,CAAC,yEAAyE,CACpF,CAAC,cACFrH,IAAA,UAAOiI,OAAO,CAAC,cAAc,CAACZ,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,qBAE3E,CAAO,CAAC,EACL,CAAC,cAENpH,KAAA,QAAKmH,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCtH,IAAA,UACEuC,IAAI,CAAC,UAAU,CACf2F,EAAE,CAAC,gBAAgB,CACnB7F,IAAI,CAAC,yBAAyB,CAC9BG,OAAO,CAAE/B,QAAQ,CAACM,QAAQ,CAACG,cAAe,CAC1CiH,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,CAAC,yEAAyE,CACpF,CAAC,cACFrH,IAAA,UAAOiI,OAAO,CAAC,gBAAgB,CAACZ,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,iBAE7E,CAAO,CAAC,EACL,CAAC,cAENpH,KAAA,QAAKmH,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCtH,IAAA,UACEuC,IAAI,CAAC,UAAU,CACf2F,EAAE,CAAC,iBAAiB,CACpB7F,IAAI,CAAC,0BAA0B,CAC/BG,OAAO,CAAE/B,QAAQ,CAACM,QAAQ,CAACK,eAAgB,CAC3C+G,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,CAAC,yEAAyE,CACpF,CAAC,cACFrH,IAAA,UAAOiI,OAAO,CAAC,iBAAiB,CAACZ,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,6BAE9E,CAAO,CAAC,EACL,CAAC,cAENpH,KAAA,QAAKmH,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCtH,IAAA,UACEuC,IAAI,CAAC,UAAU,CACf2F,EAAE,CAAC,aAAa,CAChB7F,IAAI,CAAC,sBAAsB,CAC3BG,OAAO,CAAE/B,QAAQ,CAACM,QAAQ,CAACO,WAAY,CACvC6G,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,CAAC,yEAAyE,CACpF,CAAC,cACFrH,IAAA,UAAOiI,OAAO,CAAC,aAAa,CAACZ,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,2CAE1E,CAAO,CAAC,EACL,CAAC,cAENpH,KAAA,QAAKmH,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCtH,IAAA,UACEuC,IAAI,CAAC,UAAU,CACf2F,EAAE,CAAC,gBAAgB,CACnB7F,IAAI,CAAC,yBAAyB,CAC9BG,OAAO,CAAE/B,QAAQ,CAACM,QAAQ,CAACS,cAAe,CAC1C2G,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,CAAC,yEAAyE,CACpF,CAAC,cACFrH,IAAA,UAAOiI,OAAO,CAAC,gBAAgB,CAACZ,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,wBAE7E,CAAO,CAAC,EACL,CAAC,cAENpH,KAAA,QAAKmH,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCtH,IAAA,UACEuC,IAAI,CAAC,UAAU,CACf2F,EAAE,CAAC,YAAY,CACf7F,IAAI,CAAC,qBAAqB,CAC1BG,OAAO,CAAE/B,QAAQ,CAACM,QAAQ,CAACU,UAAW,CACtC0G,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,CAAC,yEAAyE,CACpF,CAAC,cACFrH,IAAA,UAAOiI,OAAO,CAAC,YAAY,CAACZ,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,+CAEzE,CAAO,CAAC,EACL,CAAC,cAGNpH,KAAA,QAAAoH,QAAA,eACEtH,IAAA,UAAOiI,OAAO,CAAC,WAAW,CAACZ,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,0BAEpF,CAAO,CAAC,cACRpH,KAAA,WACEgI,EAAE,CAAC,WAAW,CACd7F,IAAI,CAAC,oBAAoB,CACzBC,KAAK,CAAE7B,QAAQ,CAACM,QAAQ,CAACmE,SAAS,EAAI,QAAS,CAC/CiD,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,CAAC,iHAAiH,CAAAC,QAAA,eAE3HtH,IAAA,WAAQsC,KAAK,CAAC,QAAQ,CAAAgF,QAAA,CAAC,cAAY,CAAQ,CAAC,cAC5CtH,IAAA,WAAQsC,KAAK,CAAC,QAAQ,CAAAgF,QAAA,CAAC,cAAY,CAAQ,CAAC,cAC5CtH,IAAA,WAAQsC,KAAK,CAAC,QAAQ,CAAAgF,QAAA,CAAC,iBAAe,CAAQ,CAAC,EACzC,CAAC,cACTtH,IAAA,MAAGqH,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,8CAA4C,CAAG,CAAC,EACvF,CAAC,EACH,CAAC,CAGL7G,QAAQ,CAACM,QAAQ,CAACK,eAAe,eAChClB,KAAA,QAAAoH,QAAA,eACEtH,IAAA,UAAOiI,OAAO,CAAC,UAAU,CAACZ,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,oBAEnF,CAAO,CAAC,cACRtH,IAAA,UACEuC,IAAI,CAAC,UAAU,CACf2F,EAAE,CAAC,UAAU,CACb7F,IAAI,CAAC,mBAAmB,CACxBC,KAAK,CAAE7B,QAAQ,CAACM,QAAQ,CAACM,QAAS,CAClC8G,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,6GAAArB,MAAA,CACPhE,MAAM,CAAC,mBAAmB,CAAC,CAAG,gBAAgB,CAAG,iBAAiB,CACjE,CACHoG,WAAW,CAAC,wBAAwB,CACrC,CAAC,CACDpG,MAAM,CAAC,mBAAmB,CAAC,eAC1BhC,IAAA,MAAGqH,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEtF,MAAM,CAAC,mBAAmB,CAAC,CAAI,CAC1E,EACE,CACN,cAGD9B,KAAA,QAAAoH,QAAA,eACEtH,IAAA,UAAOiI,OAAO,CAAC,gBAAgB,CAACZ,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,oCAEzF,CAAO,CAAC,cACRtH,IAAA,UACEuC,IAAI,CAAC,gBAAgB,CACrB2F,EAAE,CAAC,gBAAgB,CACnB7F,IAAI,CAAC,yBAAyB,CAC9BC,KAAK,CAAE7B,QAAQ,CAACM,QAAQ,CAACQ,cAAe,CACxC4G,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,CAAC,0HAA0H,CACrI,CAAC,cACFrH,IAAA,MAAGqH,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,gEAE1C,CAAG,CAAC,EACD,CAAC,cAGNpH,KAAA,QAAAoH,QAAA,eACEpH,KAAA,UAAO+H,OAAO,CAAC,oBAAoB,CAACZ,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,uBACtE,CAACuB,IAAI,CAACC,KAAK,CAACrI,QAAQ,CAACM,QAAQ,CAACI,kBAAkB,CAAG,GAAG,CAAC,CAAC,GAC/E,EAAO,CAAC,cACRnB,IAAA,UACEuC,IAAI,CAAC,OAAO,CACZ2F,EAAE,CAAC,oBAAoB,CACvB7F,IAAI,CAAC,6BAA6B,CAClC0G,GAAG,CAAC,GAAG,CACPC,GAAG,CAAC,GAAG,CACPC,IAAI,CAAC,KAAK,CACV3G,KAAK,CAAE7B,QAAQ,CAACM,QAAQ,CAACI,kBAAmB,CAC5CgH,QAAQ,CAAEhG,iBAAkB,CAC5BkF,SAAS,CAAC,iBAAiB,CAC5B,CAAC,cACFrH,IAAA,MAAGqH,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,sDAE1C,CAAG,CAAC,EACD,CAAC,EACH,CAAC,EACH,CAAC,cAGNpH,KAAA,QAAKmH,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzCtH,IAAA,CAACV,IAAI,EACHiI,EAAE,CAAC,YAAY,CACfF,SAAS,CAAC,8FAA8F,CAAAC,QAAA,CACzG,QAED,CAAM,CAAC,cACPpH,KAAA,WACEqC,IAAI,CAAC,QAAQ,CACb2G,QAAQ,CAAE3I,OAAQ,CAClB8G,SAAS,CAAC,mKAAmK,CAAAC,QAAA,EAE5K/G,OAAO,eACNP,IAAA,QAAKqH,SAAS,CAAC,2DAA2D,CAAM,CACjF,cACDrH,IAAA,SAAAsH,QAAA,CAAO/G,OAAO,CAAG,aAAa,CAAG,gBAAgB,CAAO,CAAC,EACnD,CAAC,EACN,CAAC,EACF,CAAC,EACG,CAAC,CACT,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAJ,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}