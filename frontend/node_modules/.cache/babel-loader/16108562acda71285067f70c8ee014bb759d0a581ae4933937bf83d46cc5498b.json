{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/Desktop/Gallerypavilion/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useParams,Link,useSearchParams}from'react-router-dom';import{motion}from'framer-motion';import{useAuth}from'../contexts/AuthContext';import axios from'axios';import{ArrowLeftIcon,PhotoIcon,CloudArrowUpIcon,XMarkIcon,Cog6ToothIcon,PencilIcon,EyeIcon,TrashIcon,AdjustmentsHorizontalIcon,ShareIcon,UserGroupIcon}from'@heroicons/react/24/outline';import{toast}from'react-hot-toast';import ShareLinkForm from'../components/ShareLinkForm';import ShareLinksList from'../components/ShareLinksList';import InviteManager from'../components/InviteManager';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GalleryPage=()=>{var _photoMetadata$artwor1,_photoMetadata$artwor10,_photoMetadata$artwor11,_photoMetadata$artwor12,_photoMetadata$artwor13,_photoMetadata$artwor14,_photoMetadata$artwor15,_photoMetadata$artwor16,_photoMetadata$artwor17,_photoMetadata$artwor18,_photoMetadata$artist7,_photoMetadata$artist8,_photoMetadata$artist9,_photoMetadata$artist11;const{id}=useParams();const{isAuthenticated}=useAuth();const[searchParams]=useSearchParams();const[activeTab,setActiveTab]=useState(searchParams.get('tab')||'edit');const[gallery,setGallery]=useState(null);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[uploading,setUploading]=useState(false);const[photos,setPhotos]=useState([]);const[formData,setFormData]=useState({title:'',description:'',category:'',collections:[],settings:{allowDownload:false,showMetadata:true,enableComments:false,watermarkIntensity:0.3,requirePassword:false,password:'',inviteOnly:false,sortOrder:'newest'},isPublished:false});const[errors,setErrors]=useState({});const[newCollection,setNewCollection]=useState('');const[coverImage,setCoverImage]=useState(null);const[coverImagePreview,setCoverImagePreview]=useState(null);const[shareLinks,setShareLinks]=useState([]);const[loadingShares,setLoadingShares]=useState(false);// Photo metadata editing\nconst[editingPhoto,setEditingPhoto]=useState(null);const[photoMetadata,setPhotoMetadata]=useState({title:'',description:'',tags:[],artworkInfo:{year:'',series:'',edition:'',size:'',materials:''},artwork:{medium:'',condition:'excellent',rarity:'common',signature:'',provenance:''},artist:{biography:'',achievements:'',museums:[],exhibitions:[]},purchaseInfo:{price:'',priceOnRequest:false,availability:'available',shippingInfo:'',returnPolicy:''},context:{artistStatement:'',exhibitionHistory:''}});const categories=['Portrait','Wedding','Landscape','Wildlife','Street','Fashion','Commercial','Fine Art','Event','Documentary'];const fetchGallery=useCallback(async()=>{try{var _galleryData$settings,_galleryData$settings2,_galleryData$settings3,_galleryData$settings4,_galleryData$settings5,_galleryData$settings6,_galleryData$settings7,_galleryData$settings8;setLoading(true);const response=await axios.get(\"/galleries/\".concat(id));const galleryData=response.data;setGallery(galleryData);// Normalize watermarkIntensity for UI slider if backend returns enum\nconst rawIntensity=(_galleryData$settings=galleryData.settings)===null||_galleryData$settings===void 0?void 0:_galleryData$settings.watermarkIntensity;let intensityNumber;if(typeof rawIntensity==='number'){intensityNumber=rawIntensity;}else if(typeof rawIntensity==='string'){if(['light','medium','heavy'].includes(rawIntensity)){intensityNumber=rawIntensity==='light'?0.2:rawIntensity==='medium'?0.5:0.85;}else{const num=parseFloat(rawIntensity);intensityNumber=Number.isFinite(num)?num:0.3;}}else{intensityNumber=0.3;}// Populate form data\nsetFormData({title:galleryData.title||'',description:galleryData.description||'',category:galleryData.category||'',collections:galleryData.collections||[],settings:{allowDownload:((_galleryData$settings2=galleryData.settings)===null||_galleryData$settings2===void 0?void 0:_galleryData$settings2.allowDownload)||false,showMetadata:((_galleryData$settings3=galleryData.settings)===null||_galleryData$settings3===void 0?void 0:_galleryData$settings3.showMetadata)||true,enableComments:((_galleryData$settings4=galleryData.settings)===null||_galleryData$settings4===void 0?void 0:_galleryData$settings4.enableComments)||false,watermarkIntensity:intensityNumber,requirePassword:((_galleryData$settings5=galleryData.settings)===null||_galleryData$settings5===void 0?void 0:_galleryData$settings5.requirePassword)||false,password:((_galleryData$settings6=galleryData.settings)===null||_galleryData$settings6===void 0?void 0:_galleryData$settings6.password)||'',inviteOnly:((_galleryData$settings7=galleryData.settings)===null||_galleryData$settings7===void 0?void 0:_galleryData$settings7.inviteOnly)||false,sortOrder:((_galleryData$settings8=galleryData.settings)===null||_galleryData$settings8===void 0?void 0:_galleryData$settings8.sortOrder)||'newest'},isPublished:galleryData.isPublished||false});if(galleryData.coverImage){setCoverImagePreview(galleryData.coverImage.previewUrl||null);}}catch(error){console.error('Error fetching gallery:',error);toast.error('Failed to load gallery');}finally{setLoading(false);}},[id]);const fetchPhotos=useCallback(async()=>{try{const response=await axios.get(\"/galleries/\".concat(id,\"/photos\"));setPhotos(response.data.photos||[]);}catch(error){console.error('Error fetching photos:',error);}},[id]);// Fetch share links\nconst fetchShareLinks=useCallback(async()=>{try{setLoadingShares(true);const response=await axios.get(\"/galleries/\".concat(id,\"/shares\"));setShareLinks(response.data.shares||[]);}catch(error){console.error('Error fetching share links:',error);toast.error('Failed to fetch share links');}finally{setLoadingShares(false);}},[id]);// Create share link\nconst createShareLink=async shareData=>{try{const response=await axios.post(\"/galleries/\".concat(id,\"/shares\"),shareData);setShareLinks(prev=>[...prev,response.data.share]);toast.success('Share link created successfully');return response.data.share;}catch(error){var _error$response,_error$response$data;console.error('Error creating share link:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to create share link');throw error;}};// Delete share link\nconst deleteShareLink=async shareId=>{try{await axios.delete(\"/galleries/\".concat(id,\"/shares/\").concat(shareId));setShareLinks(prev=>prev.filter(share=>share._id!==shareId));toast.success('Share link deleted successfully');}catch(error){console.error('Error deleting share link:',error);toast.error('Failed to delete share link');}};// Fetch gallery data\nuseEffect(()=>{if(id){fetchGallery();fetchPhotos();fetchShareLinks();}},[id,fetchGallery,fetchPhotos,fetchShareLinks]);// Handle form input changes\nconst handleInputChange=e=>{const{name,value,type,checked}=e.target;if(name.startsWith('settings.')){const settingName=name.split('.')[1];setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{settings:_objectSpread(_objectSpread({},prev.settings),{},{[settingName]:type==='checkbox'?checked:settingName==='watermarkIntensity'?parseFloat(value):value})}));}else{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));}// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:null}));}};// Handle cover image upload\nconst handleCoverImageChange=e=>{const file=e.target.files[0];if(file){if(file.size>10*1024*1024){toast.error('Cover image must be less than 10MB');return;}if(!file.type.startsWith('image/')){toast.error('Please select a valid image file');return;}setCoverImage(file);// Create preview\nconst reader=new FileReader();reader.onload=e=>setCoverImagePreview(e.target.result);reader.readAsDataURL(file);}};// Remove cover image\nconst removeCoverImage=()=>{setCoverImage(null);setCoverImagePreview(null);};// Add collection\nconst addCollection=()=>{if(newCollection.trim()&&!formData.collections.includes(newCollection.trim())){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{collections:[...prev.collections,newCollection.trim()]}));setNewCollection('');}};// Remove collection\nconst removeCollection=index=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{collections:prev.collections.filter((_,i)=>i!==index)}));};// Validate form\nconst validateForm=()=>{const newErrors={};if(!formData.title.trim()){newErrors.title='Gallery title is required';}else if(formData.title.length>100){newErrors.title='Title cannot exceed 100 characters';}if(!formData.description.trim()){newErrors.description='Gallery description is required';}else if(formData.description.length>1000){newErrors.description='Description cannot exceed 1000 characters';}if(!formData.category){newErrors.category='Please select a category';}if(formData.settings.requirePassword&&!formData.settings.password.trim()){newErrors['settings.password']='Password is required when password protection is enabled';}setErrors(newErrors);return Object.keys(newErrors).length===0;};// Save gallery changes\nconst handleSave=async()=>{if(!validateForm()){toast.error('Please fix the errors in the form');return;}setSaving(true);try{const submitData=new FormData();// Prepare settings strictly matching backend schema\nconst rawSettings=_objectSpread({},formData.settings);const numericIntensity=typeof rawSettings.watermarkIntensity==='number'?rawSettings.watermarkIntensity:parseFloat(rawSettings.watermarkIntensity||0.5);const watermarkEnum=Number.isFinite(numericIntensity)?numericIntensity<=0.33?'light':numericIntensity<=0.66?'medium':'heavy':'medium';const settingsPayload={allowDownload:!!rawSettings.allowDownload,showMetadata:!!rawSettings.showMetadata,enableComments:!!rawSettings.enableComments,watermarkIntensity:watermarkEnum,sortOrder:['newest','oldest','custom'].includes(rawSettings.sortOrder)?rawSettings.sortOrder:'newest',inviteOnly:!!rawSettings.inviteOnly};const collectionsProcessed=(formData.collections||[]).map(c=>(c||'').toString().trim()).filter(Boolean);// Add gallery data\nObject.keys(formData).forEach(key=>{if(key==='settings'){submitData.append('settings',JSON.stringify(settingsPayload));}else if(key==='collections'){submitData.append('collections',JSON.stringify(collectionsProcessed));}else{submitData.append(key,formData[key]);}});// Add cover image if selected\nif(coverImage){submitData.append('coverImage',coverImage);}const response=await axios.put(\"/galleries/\".concat(id),submitData,{headers:{'Content-Type':'multipart/form-data'}});toast.success('Gallery updated successfully!');setGallery(response.data);}catch(error){var _error$response2,_error$response2$data,_error$response3,_error$response3$data;console.error('Error updating gallery:',error);const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to update gallery';toast.error(errorMessage);// Handle validation errors\nif((_error$response3=error.response)!==null&&_error$response3!==void 0&&(_error$response3$data=_error$response3.data)!==null&&_error$response3$data!==void 0&&_error$response3$data.errors){const validationErrors={};error.response.data.errors.forEach(err=>{validationErrors[err.path]=err.msg;});setErrors(validationErrors);}}finally{setSaving(false);}};// Upload photos\nconst handlePhotoUpload=async files=>{if(!files||files.length===0)return;setUploading(true);try{var _response$data$photos;const formData=new FormData();for(let i=0;i<files.length;i++){formData.append('photos',files[i]);}const response=await axios.post(\"/galleries/\".concat(id,\"/photos\"),formData,{headers:{'Content-Type':'multipart/form-data'}});toast.success(\"\".concat(((_response$data$photos=response.data.photos)===null||_response$data$photos===void 0?void 0:_response$data$photos.length)||0,\" photos uploaded successfully!\"));fetchPhotos();// Refresh photos list\n}catch(error){var _error$response4,_error$response4$data;console.error('Error uploading photos:',error);const errorMessage=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to upload photos';toast.error(errorMessage);}finally{setUploading(false);}};// Handle file input change\nconst handleFileInputChange=e=>{handlePhotoUpload(e.target.files);};// Drag and drop handlers\nconst[dragActive,setDragActive]=useState(false);const handleDrag=e=>{e.preventDefault();e.stopPropagation();if(e.type===\"dragenter\"||e.type===\"dragover\"){setDragActive(true);}else if(e.type===\"dragleave\"){setDragActive(false);}};const handleDrop=e=>{e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files[0]){const files=Array.from(e.dataTransfer.files).filter(file=>file.type.startsWith('image/'));if(files.length>0){handlePhotoUpload(files);}else{toast.error('Please drop only image files');}}};// Delete photo\nconst handleDeletePhoto=async photoId=>{if(!window.confirm('Are you sure you want to delete this photo?'))return;try{await axios.delete(\"/photos/\".concat(photoId));toast.success('Photo deleted successfully');fetchPhotos();// Refresh photos list\n}catch(error){console.error('Error deleting photo:',error);toast.error('Failed to delete photo');}};// Edit photo metadata\nconst handleEditPhoto=photo=>{var _photo$artwork,_photo$exif,_photo$artwork2,_photo$artwork3,_photo$artwork4,_photo$artwork5,_photo$artwork6,_photo$artwork7,_photo$artwork8,_photo$artwork9,_photo$artwork0,_photo$artist,_photo$artist2,_photo$artist2$achiev,_photo$artist3,_photo$artist4,_photo$artist4$exhibi,_photo$artwork1,_photo$artwork10,_photo$artwork11,_photo$artwork12,_photo$artwork13,_photo$artwork14,_photo$artwork15,_photo$context;setEditingPhoto(photo);setPhotoMetadata({title:photo.title||'',description:photo.description||'',tags:photo.tags||[],artworkInfo:{year:(_photo$artwork=photo.artwork)!==null&&_photo$artwork!==void 0&&_photo$artwork.year||(_photo$exif=photo.exif)!==null&&_photo$exif!==void 0&&_photo$exif.dateTaken?new Date(photo.exif.dateTaken).getFullYear().toString():'',series:((_photo$artwork2=photo.artwork)===null||_photo$artwork2===void 0?void 0:_photo$artwork2.series)||'',edition:((_photo$artwork3=photo.artwork)===null||_photo$artwork3===void 0?void 0:_photo$artwork3.edition)||'',size:((_photo$artwork4=photo.artwork)===null||_photo$artwork4===void 0?void 0:_photo$artwork4.dimensions)||'',materials:((_photo$artwork5=photo.artwork)===null||_photo$artwork5===void 0?void 0:_photo$artwork5.materials)||''},artwork:{medium:((_photo$artwork6=photo.artwork)===null||_photo$artwork6===void 0?void 0:_photo$artwork6.medium)||'',condition:((_photo$artwork7=photo.artwork)===null||_photo$artwork7===void 0?void 0:_photo$artwork7.condition)||'excellent',rarity:((_photo$artwork8=photo.artwork)===null||_photo$artwork8===void 0?void 0:_photo$artwork8.rarity)||'common',signature:((_photo$artwork9=photo.artwork)===null||_photo$artwork9===void 0?void 0:_photo$artwork9.signature)||'',provenance:((_photo$artwork0=photo.artwork)===null||_photo$artwork0===void 0?void 0:_photo$artwork0.provenance)||''},artist:{biography:((_photo$artist=photo.artist)===null||_photo$artist===void 0?void 0:_photo$artist.biography)||'',achievements:((_photo$artist2=photo.artist)===null||_photo$artist2===void 0?void 0:(_photo$artist2$achiev=_photo$artist2.achievements)===null||_photo$artist2$achiev===void 0?void 0:_photo$artist2$achiev.highAuctionRecord)||'',museums:((_photo$artist3=photo.artist)===null||_photo$artist3===void 0?void 0:_photo$artist3.museums)||[],exhibitions:((_photo$artist4=photo.artist)===null||_photo$artist4===void 0?void 0:(_photo$artist4$exhibi=_photo$artist4.exhibitions)===null||_photo$artist4$exhibi===void 0?void 0:_photo$artist4$exhibi.map(ex=>ex.title||ex))||[]},purchaseInfo:{price:((_photo$artwork1=photo.artwork)===null||_photo$artwork1===void 0?void 0:_photo$artwork1.price)||'',priceOnRequest:!((_photo$artwork10=photo.artwork)!==null&&_photo$artwork10!==void 0&&_photo$artwork10.price)&&!!((_photo$artwork11=photo.artwork)!==null&&_photo$artwork11!==void 0&&_photo$artwork11.isForSale),availability:(_photo$artwork12=photo.artwork)!==null&&_photo$artwork12!==void 0&&_photo$artwork12.isForSale?'available':'not_available',shippingInfo:((_photo$artwork13=photo.artwork)===null||_photo$artwork13===void 0?void 0:_photo$artwork13.shippingInfo)||'',returnPolicy:((_photo$artwork14=photo.artwork)===null||_photo$artwork14===void 0?void 0:_photo$artwork14.returnPolicy)||''},context:{artistStatement:((_photo$artwork15=photo.artwork)===null||_photo$artwork15===void 0?void 0:_photo$artwork15.context)||'',exhibitionHistory:((_photo$context=photo.context)===null||_photo$context===void 0?void 0:_photo$context.exhibitionHistory)||''}});};// Save photo metadata\nconst handleSavePhotoMetadata=async()=>{if(!editingPhoto)return;try{var _photoMetadata$artwor,_photoMetadata$artwor2,_photoMetadata$artwor3,_photoMetadata$artwor4,_photoMetadata$artwor5,_photoMetadata$artwor6,_photoMetadata$artwor7,_photoMetadata$artwor8,_photoMetadata$artwor9,_photoMetadata$artwor0,_photoMetadata$purcha,_photoMetadata$purcha2,_photoMetadata$purcha3,_photoMetadata$contex,_photoMetadata$purcha4,_photoMetadata$purcha5,_photoMetadata$artist,_photoMetadata$artist2,_photoMetadata$artist3,_photoMetadata$artist4,_photoMetadata$artist5,_photoMetadata$artist6;// Transform frontend form data to backend Photo model structure\nconst updateData={title:photoMetadata.title,description:photoMetadata.description,tags:photoMetadata.tags,artwork:{year:(_photoMetadata$artwor=photoMetadata.artworkInfo)!==null&&_photoMetadata$artwor!==void 0&&_photoMetadata$artwor.year?parseInt(photoMetadata.artworkInfo.year):undefined,series:(_photoMetadata$artwor2=photoMetadata.artworkInfo)===null||_photoMetadata$artwor2===void 0?void 0:_photoMetadata$artwor2.series,edition:(_photoMetadata$artwor3=photoMetadata.artworkInfo)===null||_photoMetadata$artwor3===void 0?void 0:_photoMetadata$artwor3.edition,dimensions:(_photoMetadata$artwor4=photoMetadata.artworkInfo)===null||_photoMetadata$artwor4===void 0?void 0:_photoMetadata$artwor4.size,materials:(_photoMetadata$artwor5=photoMetadata.artworkInfo)===null||_photoMetadata$artwor5===void 0?void 0:_photoMetadata$artwor5.materials,medium:(_photoMetadata$artwor6=photoMetadata.artwork)===null||_photoMetadata$artwor6===void 0?void 0:_photoMetadata$artwor6.medium,condition:(_photoMetadata$artwor7=photoMetadata.artwork)===null||_photoMetadata$artwor7===void 0?void 0:_photoMetadata$artwor7.condition,rarity:(_photoMetadata$artwor8=photoMetadata.artwork)===null||_photoMetadata$artwor8===void 0?void 0:_photoMetadata$artwor8.rarity,signature:(_photoMetadata$artwor9=photoMetadata.artwork)===null||_photoMetadata$artwor9===void 0?void 0:_photoMetadata$artwor9.signature,provenance:(_photoMetadata$artwor0=photoMetadata.artwork)===null||_photoMetadata$artwor0===void 0?void 0:_photoMetadata$artwor0.provenance,price:(_photoMetadata$purcha=photoMetadata.purchaseInfo)!==null&&_photoMetadata$purcha!==void 0&&_photoMetadata$purcha.price?parseFloat(photoMetadata.purchaseInfo.price):undefined,isForSale:((_photoMetadata$purcha2=photoMetadata.purchaseInfo)===null||_photoMetadata$purcha2===void 0?void 0:_photoMetadata$purcha2.availability)==='available'||((_photoMetadata$purcha3=photoMetadata.purchaseInfo)===null||_photoMetadata$purcha3===void 0?void 0:_photoMetadata$purcha3.priceOnRequest),context:(_photoMetadata$contex=photoMetadata.context)===null||_photoMetadata$contex===void 0?void 0:_photoMetadata$contex.artistStatement,shippingInfo:(_photoMetadata$purcha4=photoMetadata.purchaseInfo)===null||_photoMetadata$purcha4===void 0?void 0:_photoMetadata$purcha4.shippingInfo,returnPolicy:(_photoMetadata$purcha5=photoMetadata.purchaseInfo)===null||_photoMetadata$purcha5===void 0?void 0:_photoMetadata$purcha5.returnPolicy},artist:{biography:(_photoMetadata$artist=photoMetadata.artist)===null||_photoMetadata$artist===void 0?void 0:_photoMetadata$artist.biography,achievements:{highAuctionRecord:(_photoMetadata$artist2=photoMetadata.artist)===null||_photoMetadata$artist2===void 0?void 0:_photoMetadata$artist2.achievements},museums:(_photoMetadata$artist3=photoMetadata.artist)===null||_photoMetadata$artist3===void 0?void 0:(_photoMetadata$artist4=_photoMetadata$artist3.museums)===null||_photoMetadata$artist4===void 0?void 0:_photoMetadata$artist4.filter(m=>m.trim()!==''),exhibitions:(_photoMetadata$artist5=photoMetadata.artist)===null||_photoMetadata$artist5===void 0?void 0:(_photoMetadata$artist6=_photoMetadata$artist5.exhibitions)===null||_photoMetadata$artist6===void 0?void 0:_photoMetadata$artist6.filter(e=>e.trim()!=='').map(exhibition=>({title:exhibition,year:new Date().getFullYear(),venue:''}))}};// Remove undefined values to avoid overwriting existing data with undefined\nObject.keys(updateData.artwork).forEach(key=>{if(updateData.artwork[key]===undefined||updateData.artwork[key]===''){delete updateData.artwork[key];}});Object.keys(updateData.artist).forEach(key=>{if(updateData.artist[key]===undefined||updateData.artist[key]===''){delete updateData.artist[key];}});await axios.put(\"/photos/\".concat(editingPhoto._id),updateData);toast.success('Photo metadata updated successfully');setEditingPhoto(null);fetchPhotos();// Refresh photos list\n}catch(error){console.error('Error updating photo metadata:',error);toast.error('Failed to update photo metadata');}};// Handle metadata input change\nconst handleMetadataChange=(field,value)=>{if(field.includes('.')){const keys=field.split('.');setPhotoMetadata(prev=>{const newData=_objectSpread({},prev);let current=newData;// Navigate to the parent object\nfor(let i=0;i<keys.length-1;i++){if(!current[keys[i]]){current[keys[i]]={};}current[keys[i]]=_objectSpread({},current[keys[i]]);current=current[keys[i]];}// Set the final value\ncurrent[keys[keys.length-1]]=value;return newData;});}else{setPhotoMetadata(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));}};// Toggle publish status\nconst handleTogglePublish=async()=>{try{const newStatus=!formData.isPublished;await axios.patch(\"/galleries/\".concat(id,\"/status\"),{isPublished:newStatus});setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{isPublished:newStatus}));toast.success(newStatus?'Gallery published!':'Gallery unpublished');}catch(error){console.error('Error toggling publish status:',error);toast.error('Failed to update gallery status');}};if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Authentication Required\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Please log in to edit galleries.\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn-primary\",children:\"Log In\"})]})});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})});}if(!gallery){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Gallery Not Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"The requested gallery could not be found.\"}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"btn-primary\",children:\"Back to Dashboard\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center h-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"text-gray-600 hover:text-gray-900\",children:/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-2xl font-serif font-bold gradient-text\",children:\"Gallery Pavilion\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[\"/ Editing: \",gallery.title]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleTogglePublish,className:\"px-4 py-2 rounded-lg font-medium \".concat(formData.isPublished?'bg-green-100 text-green-800 hover:bg-green-200':'bg-gray-100 text-gray-800 hover:bg-gray-200',\" transition-colors\"),children:formData.isPublished?'Published':'Draft'}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,disabled:saving,className:\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\",children:[saving&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:saving?'Saving...':'Save Changes'})]})]})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6},children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"flex space-x-8\",children:[{id:'edit',label:'Edit Gallery',icon:PencilIcon},{id:'photos',label:'Photos',icon:PhotoIcon},{id:'share',label:'Share Links',icon:ShareIcon},{id:'invitations',label:'Invitations',icon:UserGroupIcon},{id:'settings',label:'Settings',icon:Cog6ToothIcon}].map(tab=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors \".concat(activeTab===tab.id?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(tab.icon,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:tab.label})]},tab.id))})}),activeTab==='edit'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Gallery Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:formData.title,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.title?'border-red-300':'border-gray-300'),placeholder:\"Enter gallery title\",maxLength:100}),errors.title&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[formData.title.length,\"/100 characters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",name:\"category\",value:formData.category,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.category?'border-red-300':'border-gray-300'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a category\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))]}),errors.category&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.category})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Collections\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCollection,onChange:e=>setNewCollection(e.target.value),onKeyPress:e=>e.key==='Enter'&&(e.preventDefault(),addCollection()),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",placeholder:\"Add collection tag\",maxLength:50}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addCollection,className:\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\",children:\"Add\"})]}),formData.collections.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 flex flex-wrap gap-2\",children:formData.collections.map((collection,index)=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-3 py-1 bg-primary-100 text-primary-800 text-sm rounded-full\",children:[collection,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeCollection(index),className:\"ml-2 text-primary-600 hover:text-primary-800\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-4 h-4\"})})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",value:formData.description,onChange:handleInputChange,rows:4,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.description?'border-red-300':'border-gray-300'),placeholder:\"Describe your gallery\",maxLength:1000}),errors.description&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[formData.description.length,\"/1000 characters\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Cover Image\"}),!coverImagePreview?/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\",children:[/*#__PURE__*/_jsx(CloudArrowUpIcon,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Upload a cover image for your gallery\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleCoverImageChange,className:\"hidden\",id:\"coverImage\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"coverImage\",className:\"btn-secondary cursor-pointer\",children:\"Choose Image\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"PNG, JPG, GIF up to 10MB\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:coverImagePreview,alt:\"Cover preview\",className:\"w-full h-64 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:removeCoverImage,className:\"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-4 h-4\"})})]})]})]}),activeTab==='photos'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Upload Photos\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-lg p-8 text-center transition-colors \".concat(dragActive?'border-primary-500 bg-primary-50':'border-gray-300 hover:border-gray-400'),onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,children:[/*#__PURE__*/_jsx(CloudArrowUpIcon,{className:\"w-12 h-12 mx-auto mb-4 \".concat(dragActive?'text-primary-500':'text-gray-400')}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 \".concat(dragActive?'text-primary-600':'text-gray-600'),children:dragActive?'Drop photos here!':'Drag and drop photos here, or click to browse'}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileInputChange,multiple:true,className:\"hidden\",id:\"photoUpload\",disabled:uploading}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"photoUpload\",className:\"btn-secondary cursor-pointer \".concat(uploading?'opacity-50 cursor-not-allowed':''),children:uploading?'Uploading...':'Select Photos'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Up to 20 photos at once, 10MB each \\u2022 Supports JPG, PNG, WEBP\"}),uploading&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-primary-600 h-2 rounded-full animate-pulse\",style:{width:'60%'}})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Processing images and generating watermarks...\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:[\"Photos (\",photos.length,\")\"]}),photos.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(PhotoIcon,{className:\"w-16 h-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No photos uploaded yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Upload photos to get started\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4\",children:photos.map(photo=>/*#__PURE__*/_jsxs(\"div\",{className:\"group relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:photo.previewUrl||\"/uploads/photos/\".concat(photo.filename),alt:photo.title,className:\"w-full h-48 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(EyeIcon,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditPhoto(photo),className:\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(AdjustmentsHorizontalIcon,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeletePhoto(photo._id),className:\"p-2 bg-red-600 hover:bg-red-700 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"w-4 h-4 text-white\"})})]})})]},photo._id))})]})]}),activeTab==='share'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Create Share Link\"}),/*#__PURE__*/_jsx(ShareLinkForm,{onCreateShare:createShareLink})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Existing Share Links\"}),loadingShares?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"})}):shareLinks.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-gray-500\",children:[/*#__PURE__*/_jsx(ShareIcon,{className:\"w-12 h-12 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No share links created yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Create your first share link above\"})]}):/*#__PURE__*/_jsx(ShareLinksList,{shareLinks:shareLinks,onDeleteShare:deleteShareLink,galleryId:id})]})]}),activeTab==='invitations'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsx(InviteManager,{galleryId:id,isInviteOnly:formData.settings.inviteOnly})}),activeTab==='settings'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Gallery Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"allowDownload\",name:\"settings.allowDownload\",checked:formData.settings.allowDownload,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"allowDownload\",className:\"ml-2 block text-sm text-gray-700\",children:\"Allow photo downloads\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"showMetadata\",name:\"settings.showMetadata\",checked:formData.settings.showMetadata,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"showMetadata\",className:\"ml-2 block text-sm text-gray-700\",children:\"Show photo metadata\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"enableComments\",name:\"settings.enableComments\",checked:formData.settings.enableComments,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"enableComments\",className:\"ml-2 block text-sm text-gray-700\",children:\"Enable comments\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"requirePassword\",name:\"settings.requirePassword\",checked:formData.settings.requirePassword,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"requirePassword\",className:\"ml-2 block text-sm text-gray-700\",children:\"Require password for access\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"inviteOnly\",name:\"settings.inviteOnly\",checked:formData.settings.inviteOnly,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inviteOnly\",className:\"ml-2 block text-sm text-gray-700\",children:\"Invite-only access (requires invitation code)\"})]})]}),formData.settings.requirePassword&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Gallery Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"settings.password\",value:formData.settings.password,onChange:handleInputChange,className:\"w-full max-w-md px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors['settings.password']?'border-red-300':'border-gray-300'),placeholder:\"Enter gallery password\"}),errors['settings.password']&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors['settings.password']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"watermarkIntensity\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Watermark Intensity: \",Math.round(formData.settings.watermarkIntensity*100),\"%\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",id:\"watermarkIntensity\",name:\"settings.watermarkIntensity\",min:\"0\",max:\"1\",step:\"0.1\",value:formData.settings.watermarkIntensity,onChange:handleInputChange,className:\"w-full max-w-md\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Controls the opacity of watermarks on preview images\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-6 mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-700 mb-4\",children:\"Danger Zone\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm('Are you sure you want to delete this gallery? This action cannot be undone.')){// Handle delete\n}},className:\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\",children:\"Delete Gallery\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Once deleted, the gallery and all its photos cannot be recovered.\"})]})]})]})]})]})}),editingPhoto&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900\",children:\"Edit Photo Metadata\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingPhoto(null),className:\"p-2 hover:bg-gray-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-6 h-6 text-gray-500\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:editingPhoto.previewUrl||\"/uploads/photos/\".concat(editingPhoto.filename),alt:editingPhoto.title,className:\"w-full h-64 object-cover rounded-lg mb-4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Original: \",editingPhoto.originalFilename]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.title,onChange:e=>handleMetadataChange('title',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:photoMetadata.description,onChange:e=>handleMetadataChange('description',e.target.value),rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Artwork Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Year\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor1=photoMetadata.artworkInfo)===null||_photoMetadata$artwor1===void 0?void 0:_photoMetadata$artwor1.year)||'',onChange:e=>handleMetadataChange('artworkInfo.year',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Series\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor10=photoMetadata.artworkInfo)===null||_photoMetadata$artwor10===void 0?void 0:_photoMetadata$artwor10.series)||'',onChange:e=>handleMetadataChange('artworkInfo.series',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Edition\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor11=photoMetadata.artworkInfo)===null||_photoMetadata$artwor11===void 0?void 0:_photoMetadata$artwor11.edition)||'',onChange:e=>handleMetadataChange('artworkInfo.edition',e.target.value),placeholder:\"e.g., 1/50\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Size\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor12=photoMetadata.artworkInfo)===null||_photoMetadata$artwor12===void 0?void 0:_photoMetadata$artwor12.size)||'',onChange:e=>handleMetadataChange('artworkInfo.size',e.target.value),placeholder:\"e.g., 24x36 inches\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor13=photoMetadata.artwork)===null||_photoMetadata$artwor13===void 0?void 0:_photoMetadata$artwor13.medium)||'',onChange:e=>handleMetadataChange('artwork.medium',e.target.value),placeholder:\"e.g., Photography, Digital Print\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Condition\"}),/*#__PURE__*/_jsxs(\"select\",{value:((_photoMetadata$artwor14=photoMetadata.artwork)===null||_photoMetadata$artwor14===void 0?void 0:_photoMetadata$artwor14.condition)||'excellent',onChange:e=>handleMetadataChange('artwork.condition',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"excellent\",children:\"Excellent\"}),/*#__PURE__*/_jsx(\"option\",{value:\"very-good\",children:\"Very Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"good\",children:\"Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fair\",children:\"Fair\"}),/*#__PURE__*/_jsx(\"option\",{value:\"poor\",children:\"Poor\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Rarity\"}),/*#__PURE__*/_jsxs(\"select\",{value:((_photoMetadata$artwor15=photoMetadata.artwork)===null||_photoMetadata$artwor15===void 0?void 0:_photoMetadata$artwor15.rarity)||'common',onChange:e=>handleMetadataChange('artwork.rarity',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"unique\",children:\"Unique\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rare\",children:\"Rare\"}),/*#__PURE__*/_jsx(\"option\",{value:\"uncommon\",children:\"Uncommon\"}),/*#__PURE__*/_jsx(\"option\",{value:\"common\",children:\"Common\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Signature\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor16=photoMetadata.artwork)===null||_photoMetadata$artwor16===void 0?void 0:_photoMetadata$artwor16.signature)||'',onChange:e=>handleMetadataChange('artwork.signature',e.target.value),placeholder:\"e.g., Signed lower right\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Materials\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor17=photoMetadata.artworkInfo)===null||_photoMetadata$artwor17===void 0?void 0:_photoMetadata$artwor17.materials)||'',onChange:e=>handleMetadataChange('artworkInfo.materials',e.target.value),placeholder:\"e.g., Archival pigment print on cotton paper\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Provenance\"}),/*#__PURE__*/_jsx(\"textarea\",{value:((_photoMetadata$artwor18=photoMetadata.artwork)===null||_photoMetadata$artwor18===void 0?void 0:_photoMetadata$artwor18.provenance)||'',onChange:e=>handleMetadataChange('artwork.provenance',e.target.value),placeholder:\"History of ownership and exhibition\",rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Artist Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Biography\"}),/*#__PURE__*/_jsx(\"textarea\",{value:((_photoMetadata$artist7=photoMetadata.artist)===null||_photoMetadata$artist7===void 0?void 0:_photoMetadata$artist7.biography)||'',onChange:e=>handleMetadataChange('artist.biography',e.target.value),placeholder:\"Artist's background and career highlights\",rows:4,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Achievements\"}),/*#__PURE__*/_jsx(\"textarea\",{value:((_photoMetadata$artist8=photoMetadata.artist)===null||_photoMetadata$artist8===void 0?void 0:_photoMetadata$artist8.achievements)||'',onChange:e=>handleMetadataChange('artist.achievements',e.target.value),placeholder:\"Awards, recognitions, and notable accomplishments\",rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Museums & Collections\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Museums\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[(((_photoMetadata$artist9=photoMetadata.artist)===null||_photoMetadata$artist9===void 0?void 0:_photoMetadata$artist9.museums)||[]).map((museum,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:museum,onChange:e=>{var _photoMetadata$artist0;const newMuseums=[...(((_photoMetadata$artist0=photoMetadata.artist)===null||_photoMetadata$artist0===void 0?void 0:_photoMetadata$artist0.museums)||[])];newMuseums[index]=e.target.value;handleMetadataChange('artist.museums',newMuseums);},placeholder:\"Museum name\",className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _photoMetadata$artist1;const newMuseums=(((_photoMetadata$artist1=photoMetadata.artist)===null||_photoMetadata$artist1===void 0?void 0:_photoMetadata$artist1.museums)||[]).filter((_,i)=>i!==index);handleMetadataChange('artist.museums',newMuseums);},className:\"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\",children:\"Remove\"})]},index)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _photoMetadata$artist10;const newMuseums=[...(((_photoMetadata$artist10=photoMetadata.artist)===null||_photoMetadata$artist10===void 0?void 0:_photoMetadata$artist10.museums)||[]),''];handleMetadataChange('artist.museums',newMuseums);},className:\"px-4 py-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors\",children:\"Add Museum\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Exhibitions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[(((_photoMetadata$artist11=photoMetadata.artist)===null||_photoMetadata$artist11===void 0?void 0:_photoMetadata$artist11.exhibitions)||[]).map((exhibition,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:exhibition,onChange:e=>{var _photoMetadata$artist12;const newExhibitions=[...(((_photoMetadata$artist12=photoMetadata.artist)===null||_photoMetadata$artist12===void 0?void 0:_photoMetadata$artist12.exhibitions)||[])];newExhibitions[index]=e.target.value;handleMetadataChange('artist.exhibitions',newExhibitions);},placeholder:\"Exhibition name and year\",className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _photoMetadata$artist13;const newExhibitions=(((_photoMetadata$artist13=photoMetadata.artist)===null||_photoMetadata$artist13===void 0?void 0:_photoMetadata$artist13.exhibitions)||[]).filter((_,i)=>i!==index);handleMetadataChange('artist.exhibitions',newExhibitions);},className:\"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\",children:\"Remove\"})]},index)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _photoMetadata$artist14;const newExhibitions=[...(((_photoMetadata$artist14=photoMetadata.artist)===null||_photoMetadata$artist14===void 0?void 0:_photoMetadata$artist14.exhibitions)||[]),''];handleMetadataChange('artist.exhibitions',newExhibitions);},className:\"px-4 py-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors\",children:\"Add Exhibition\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Tags\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[(photoMetadata.tags||[]).map((tag,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tag,onChange:e=>{const newTags=[...(photoMetadata.tags||[])];newTags[index]=e.target.value;handleMetadataChange('tags',newTags);},placeholder:\"Tag\",className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{const newTags=(photoMetadata.tags||[]).filter((_,i)=>i!==index);handleMetadataChange('tags',newTags);},className:\"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\",children:\"Remove\"})]},index)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{const newTags=[...(photoMetadata.tags||[]),''];handleMetadataChange('tags',newTags);},className:\"px-4 py-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors\",children:\"Add Tag\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Purchase Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.purchaseInfo.price,onChange:e=>handleMetadataChange('purchaseInfo.price',e.target.value),placeholder:\"$2,500\",disabled:photoMetadata.purchaseInfo.priceOnRequest,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"priceOnRequest\",checked:photoMetadata.purchaseInfo.priceOnRequest,onChange:e=>handleMetadataChange('purchaseInfo.priceOnRequest',e.target.checked),className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"priceOnRequest\",className:\"ml-2 text-sm text-gray-700\",children:\"Price on Request\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Availability\"}),/*#__PURE__*/_jsxs(\"select\",{value:photoMetadata.purchaseInfo.availability,onChange:e=>handleMetadataChange('purchaseInfo.availability',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"available\",children:\"Available\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sold\",children:\"Sold\"}),/*#__PURE__*/_jsx(\"option\",{value:\"reserved\",children:\"Reserved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"not-for-sale\",children:\"Not for Sale\"})]})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 mt-8 pt-6 border-t\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingPhoto(null),className:\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSavePhotoMetadata,className:\"px-4 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded-lg transition-colors\",children:\"Save Changes\"})]})]})})})]});};export default GalleryPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","Link","useSearchParams","motion","useAuth","axios","ArrowLeftIcon","PhotoIcon","CloudArrowUpIcon","XMarkIcon","Cog6ToothIcon","PencilIcon","EyeIcon","TrashIcon","AdjustmentsHorizontalIcon","ShareIcon","UserGroupIcon","toast","ShareLinkForm","ShareLinksList","InviteManager","jsx","_jsx","jsxs","_jsxs","GalleryPage","_photoMetadata$artwor1","_photoMetadata$artwor10","_photoMetadata$artwor11","_photoMetadata$artwor12","_photoMetadata$artwor13","_photoMetadata$artwor14","_photoMetadata$artwor15","_photoMetadata$artwor16","_photoMetadata$artwor17","_photoMetadata$artwor18","_photoMetadata$artist7","_photoMetadata$artist8","_photoMetadata$artist9","_photoMetadata$artist11","id","isAuthenticated","searchParams","activeTab","setActiveTab","get","gallery","setGallery","loading","setLoading","saving","setSaving","uploading","setUploading","photos","setPhotos","formData","setFormData","title","description","category","collections","settings","allowDownload","showMetadata","enableComments","watermarkIntensity","requirePassword","password","inviteOnly","sortOrder","isPublished","errors","setErrors","newCollection","setNewCollection","coverImage","setCoverImage","coverImagePreview","setCoverImagePreview","shareLinks","setShareLinks","loadingShares","setLoadingShares","editingPhoto","setEditingPhoto","photoMetadata","setPhotoMetadata","tags","artworkInfo","year","series","edition","size","materials","artwork","medium","condition","rarity","signature","provenance","artist","biography","achievements","museums","exhibitions","purchaseInfo","price","priceOnRequest","availability","shippingInfo","returnPolicy","context","artistStatement","exhibitionHistory","categories","fetchGallery","_galleryData$settings","_galleryData$settings2","_galleryData$settings3","_galleryData$settings4","_galleryData$settings5","_galleryData$settings6","_galleryData$settings7","_galleryData$settings8","response","concat","galleryData","data","rawIntensity","intensityNumber","includes","num","parseFloat","Number","isFinite","previewUrl","error","console","fetchPhotos","fetchShareLinks","shares","createShareLink","shareData","post","prev","share","success","_error$response","_error$response$data","message","deleteShareLink","shareId","delete","filter","_id","handleInputChange","e","name","value","type","checked","target","startsWith","settingName","split","_objectSpread","handleCoverImageChange","file","files","reader","FileReader","onload","result","readAsDataURL","removeCoverImage","addCollection","trim","removeCollection","index","_","i","validateForm","newErrors","length","Object","keys","handleSave","submitData","FormData","rawSettings","numericIntensity","watermarkEnum","settingsPayload","collectionsProcessed","map","c","toString","Boolean","forEach","key","append","JSON","stringify","put","headers","_error$response2","_error$response2$data","_error$response3","_error$response3$data","errorMessage","validationErrors","err","path","msg","handlePhotoUpload","_response$data$photos","_error$response4","_error$response4$data","handleFileInputChange","dragActive","setDragActive","handleDrag","preventDefault","stopPropagation","handleDrop","dataTransfer","Array","from","handleDeletePhoto","photoId","window","confirm","handleEditPhoto","photo","_photo$artwork","_photo$exif","_photo$artwork2","_photo$artwork3","_photo$artwork4","_photo$artwork5","_photo$artwork6","_photo$artwork7","_photo$artwork8","_photo$artwork9","_photo$artwork0","_photo$artist","_photo$artist2","_photo$artist2$achiev","_photo$artist3","_photo$artist4","_photo$artist4$exhibi","_photo$artwork1","_photo$artwork10","_photo$artwork11","_photo$artwork12","_photo$artwork13","_photo$artwork14","_photo$artwork15","_photo$context","exif","dateTaken","Date","getFullYear","dimensions","highAuctionRecord","ex","isForSale","handleSavePhotoMetadata","_photoMetadata$artwor","_photoMetadata$artwor2","_photoMetadata$artwor3","_photoMetadata$artwor4","_photoMetadata$artwor5","_photoMetadata$artwor6","_photoMetadata$artwor7","_photoMetadata$artwor8","_photoMetadata$artwor9","_photoMetadata$artwor0","_photoMetadata$purcha","_photoMetadata$purcha2","_photoMetadata$purcha3","_photoMetadata$contex","_photoMetadata$purcha4","_photoMetadata$purcha5","_photoMetadata$artist","_photoMetadata$artist2","_photoMetadata$artist3","_photoMetadata$artist4","_photoMetadata$artist5","_photoMetadata$artist6","updateData","parseInt","undefined","m","exhibition","venue","handleMetadataChange","field","newData","current","handleTogglePublish","newStatus","patch","className","children","to","onClick","disabled","div","initial","opacity","y","animate","transition","duration","label","icon","tab","htmlFor","onChange","placeholder","maxLength","onKeyPress","collection","rows","accept","src","alt","onDragEnter","onDragLeave","onDragOver","onDrop","multiple","style","width","filename","onCreateShare","onDeleteShare","galleryId","isInviteOnly","Math","round","min","max","step","originalFilename","museum","_photoMetadata$artist0","newMuseums","_photoMetadata$artist1","_photoMetadata$artist10","_photoMetadata$artist12","newExhibitions","_photoMetadata$artist13","_photoMetadata$artist14","tag","newTags"],"sources":["C:/Users/USER/Desktop/Gallerypavilion/frontend/src/pages/GalleryPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, Link, useSearchParams } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport { useAuth } from '../contexts/AuthContext';\nimport axios from 'axios';\nimport {\n  ArrowLeftIcon,\n  PhotoIcon,\n  CloudArrowUpIcon,\n  XMarkIcon,\n  Cog6ToothIcon,\n  PencilIcon,\n  EyeIcon,\n  TrashIcon,\n  AdjustmentsHorizontalIcon,\n  ShareIcon,\n  UserGroupIcon\n} from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\nimport ShareLinkForm from '../components/ShareLinkForm';\nimport ShareLinksList from '../components/ShareLinksList';\nimport InviteManager from '../components/InviteManager';\n\nconst GalleryPage = () => {\n  const { id } = useParams();\n  const { isAuthenticated } = useAuth();\n  const [searchParams] = useSearchParams();\n  \n  const [activeTab, setActiveTab] = useState(searchParams.get('tab') || 'edit');\n  const [gallery, setGallery] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [photos, setPhotos] = useState([]);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    category: '',\n    collections: [],\n    settings: {\n      allowDownload: false,\n      showMetadata: true,\n      enableComments: false,\n      watermarkIntensity: 0.3,\n      requirePassword: false,\n      password: '',\n      inviteOnly: false,\n      sortOrder: 'newest'\n    },\n    isPublished: false\n  });\n  const [errors, setErrors] = useState({});\n  const [newCollection, setNewCollection] = useState('');\n  const [coverImage, setCoverImage] = useState(null);\n  const [coverImagePreview, setCoverImagePreview] = useState(null);\n  const [shareLinks, setShareLinks] = useState([]);\n  const [loadingShares, setLoadingShares] = useState(false);\n  \n  // Photo metadata editing\n  const [editingPhoto, setEditingPhoto] = useState(null);\n  const [photoMetadata, setPhotoMetadata] = useState({\n    title: '',\n    description: '',\n    tags: [],\n    artworkInfo: {\n      year: '',\n      series: '',\n      edition: '',\n      size: '',\n      materials: ''\n    },\n    artwork: {\n      medium: '',\n      condition: 'excellent',\n      rarity: 'common',\n      signature: '',\n      provenance: ''\n    },\n    artist: {\n      biography: '',\n      achievements: '',\n      museums: [],\n      exhibitions: []\n    },\n    purchaseInfo: {\n      price: '',\n      priceOnRequest: false,\n      availability: 'available',\n      shippingInfo: '',\n      returnPolicy: ''\n    },\n    context: {\n      artistStatement: '',\n      exhibitionHistory: ''\n    }\n  });\n\n  const categories = [\n    'Portrait', 'Wedding', 'Landscape', 'Wildlife', 'Street', \n    'Fashion', 'Commercial', 'Fine Art', 'Event', 'Documentary'\n  ];\n\n  const fetchGallery = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`/galleries/${id}`);\n      const galleryData = response.data;\n      setGallery(galleryData);\n      \n      // Normalize watermarkIntensity for UI slider if backend returns enum\n      const rawIntensity = galleryData.settings?.watermarkIntensity;\n      let intensityNumber;\n      if (typeof rawIntensity === 'number') {\n        intensityNumber = rawIntensity;\n      } else if (typeof rawIntensity === 'string') {\n        if (['light', 'medium', 'heavy'].includes(rawIntensity)) {\n          intensityNumber = rawIntensity === 'light' ? 0.2 : (rawIntensity === 'medium' ? 0.5 : 0.85);\n        } else {\n          const num = parseFloat(rawIntensity);\n          intensityNumber = Number.isFinite(num) ? num : 0.3;\n        }\n      } else {\n        intensityNumber = 0.3;\n      }\n      \n      // Populate form data\n      setFormData({\n        title: galleryData.title || '',\n        description: galleryData.description || '',\n        category: galleryData.category || '',\n        collections: galleryData.collections || [],\n        settings: {\n          allowDownload: galleryData.settings?.allowDownload || false,\n          showMetadata: galleryData.settings?.showMetadata || true,\n          enableComments: galleryData.settings?.enableComments || false,\n          watermarkIntensity: intensityNumber,\n          requirePassword: galleryData.settings?.requirePassword || false,\n          password: galleryData.settings?.password || '',\n          inviteOnly: galleryData.settings?.inviteOnly || false,\n          sortOrder: galleryData.settings?.sortOrder || 'newest'\n        },\n        isPublished: galleryData.isPublished || false\n      });\n\n      if (galleryData.coverImage) {\n        setCoverImagePreview(galleryData.coverImage.previewUrl || null);\n      }\n    } catch (error) {\n      console.error('Error fetching gallery:', error);\n      toast.error('Failed to load gallery');\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n\n  const fetchPhotos = useCallback(async () => {\n    try {\n      const response = await axios.get(`/galleries/${id}/photos`);\n      setPhotos(response.data.photos || []);\n    } catch (error) {\n      console.error('Error fetching photos:', error);\n    }\n  }, [id]);\n\n  // Fetch share links\n  const fetchShareLinks = useCallback(async () => {\n    try {\n      setLoadingShares(true);\n      const response = await axios.get(`/galleries/${id}/shares`);\n      setShareLinks(response.data.shares || []);\n    } catch (error) {\n      console.error('Error fetching share links:', error);\n      toast.error('Failed to fetch share links');\n    } finally {\n      setLoadingShares(false);\n    }\n  }, [id]);\n\n  // Create share link\n  const createShareLink = async (shareData) => {\n    try {\n      const response = await axios.post(`/galleries/${id}/shares`, shareData);\n      setShareLinks(prev => [...prev, response.data.share]);\n      toast.success('Share link created successfully');\n      return response.data.share;\n    } catch (error) {\n      console.error('Error creating share link:', error);\n      toast.error(error.response?.data?.message || 'Failed to create share link');\n      throw error;\n    }\n  };\n\n  // Delete share link\n  const deleteShareLink = async (shareId) => {\n    try {\n      await axios.delete(`/galleries/${id}/shares/${shareId}`);\n      setShareLinks(prev => prev.filter(share => share._id !== shareId));\n      toast.success('Share link deleted successfully');\n    } catch (error) {\n      console.error('Error deleting share link:', error);\n      toast.error('Failed to delete share link');\n    }\n  };\n\n  // Fetch gallery data\n  useEffect(() => {\n    if (id) {\n      fetchGallery();\n      fetchPhotos();\n      fetchShareLinks();\n    }\n  }, [id, fetchGallery, fetchPhotos, fetchShareLinks]);\n\n  // Handle form input changes\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    \n    if (name.startsWith('settings.')) {\n      const settingName = name.split('.')[1];\n      setFormData(prev => ({\n        ...prev,\n        settings: {\n          ...prev.settings,\n          [settingName]: type === 'checkbox' ? checked : (settingName === 'watermarkIntensity' ? parseFloat(value) : value)\n        }\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: type === 'checkbox' ? checked : value\n      }));\n    }\n    \n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: null }));\n    }\n  };\n\n  // Handle cover image upload\n  const handleCoverImageChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.size > 10 * 1024 * 1024) {\n        toast.error('Cover image must be less than 10MB');\n        return;\n      }\n      \n      if (!file.type.startsWith('image/')) {\n        toast.error('Please select a valid image file');\n        return;\n      }\n      \n      setCoverImage(file);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => setCoverImagePreview(e.target.result);\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // Remove cover image\n  const removeCoverImage = () => {\n    setCoverImage(null);\n    setCoverImagePreview(null);\n  };\n\n  // Add collection\n  const addCollection = () => {\n    if (newCollection.trim() && !formData.collections.includes(newCollection.trim())) {\n      setFormData(prev => ({\n        ...prev,\n        collections: [...prev.collections, newCollection.trim()]\n      }));\n      setNewCollection('');\n    }\n  };\n\n  // Remove collection\n  const removeCollection = (index) => {\n    setFormData(prev => ({\n      ...prev,\n      collections: prev.collections.filter((_, i) => i !== index)\n    }));\n  };\n\n  // Validate form\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!formData.title.trim()) {\n      newErrors.title = 'Gallery title is required';\n    } else if (formData.title.length > 100) {\n      newErrors.title = 'Title cannot exceed 100 characters';\n    }\n    \n    if (!formData.description.trim()) {\n      newErrors.description = 'Gallery description is required';\n    } else if (formData.description.length > 1000) {\n      newErrors.description = 'Description cannot exceed 1000 characters';\n    }\n    \n    if (!formData.category) {\n      newErrors.category = 'Please select a category';\n    }\n    \n    if (formData.settings.requirePassword && !formData.settings.password.trim()) {\n      newErrors['settings.password'] = 'Password is required when password protection is enabled';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Save gallery changes\n  const handleSave = async () => {\n    if (!validateForm()) {\n      toast.error('Please fix the errors in the form');\n      return;\n    }\n    \n    setSaving(true);\n    \n    try {\n      const submitData = new FormData();\n      \n      // Prepare settings strictly matching backend schema\n      const rawSettings = { ...formData.settings };\n      const numericIntensity = typeof rawSettings.watermarkIntensity === 'number'\n        ? rawSettings.watermarkIntensity\n        : parseFloat(rawSettings.watermarkIntensity || 0.5);\n      const watermarkEnum = Number.isFinite(numericIntensity)\n        ? (numericIntensity <= 0.33 ? 'light' : (numericIntensity <= 0.66 ? 'medium' : 'heavy'))\n        : 'medium';\n      const settingsPayload = {\n        allowDownload: !!rawSettings.allowDownload,\n        showMetadata: !!rawSettings.showMetadata,\n        enableComments: !!rawSettings.enableComments,\n        watermarkIntensity: watermarkEnum,\n        sortOrder: ['newest', 'oldest', 'custom'].includes(rawSettings.sortOrder) ? rawSettings.sortOrder : 'newest',\n        inviteOnly: !!rawSettings.inviteOnly\n      };\n      const collectionsProcessed = (formData.collections || []).map(c => (c || '').toString().trim()).filter(Boolean);\n      \n      // Add gallery data\n      Object.keys(formData).forEach(key => {\n        if (key === 'settings') {\n          submitData.append('settings', JSON.stringify(settingsPayload));\n        } else if (key === 'collections') {\n          submitData.append('collections', JSON.stringify(collectionsProcessed));\n        } else {\n          submitData.append(key, formData[key]);\n        }\n      });\n      \n      // Add cover image if selected\n      if (coverImage) {\n        submitData.append('coverImage', coverImage);\n      }\n      \n      const response = await axios.put(`/galleries/${id}`, submitData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      toast.success('Gallery updated successfully!');\n      setGallery(response.data);\n      \n    } catch (error) {\n      console.error('Error updating gallery:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to update gallery';\n      toast.error(errorMessage);\n      \n      // Handle validation errors\n      if (error.response?.data?.errors) {\n        const validationErrors = {};\n        error.response.data.errors.forEach(err => {\n          validationErrors[err.path] = err.msg;\n        });\n        setErrors(validationErrors);\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Upload photos\n  const handlePhotoUpload = async (files) => {\n    if (!files || files.length === 0) return;\n    \n    setUploading(true);\n    \n    try {\n      const formData = new FormData();\n      for (let i = 0; i < files.length; i++) {\n        formData.append('photos', files[i]);\n      }\n      \n      const response = await axios.post(`/galleries/${id}/photos`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      toast.success(`${response.data.photos?.length || 0} photos uploaded successfully!`);\n      fetchPhotos(); // Refresh photos list\n      \n    } catch (error) {\n      console.error('Error uploading photos:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to upload photos';\n      toast.error(errorMessage);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Handle file input change\n  const handleFileInputChange = (e) => {\n    handlePhotoUpload(e.target.files);\n  };\n\n  // Drag and drop handlers\n  const [dragActive, setDragActive] = useState(false);\n\n  const handleDrag = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const files = Array.from(e.dataTransfer.files).filter(file => \n        file.type.startsWith('image/')\n      );\n      if (files.length > 0) {\n        handlePhotoUpload(files);\n      } else {\n        toast.error('Please drop only image files');\n      }\n    }\n  };\n\n  // Delete photo\n  const handleDeletePhoto = async (photoId) => {\n    if (!window.confirm('Are you sure you want to delete this photo?')) return;\n    \n    try {\n      await axios.delete(`/photos/${photoId}`);\n      toast.success('Photo deleted successfully');\n      fetchPhotos(); // Refresh photos list\n    } catch (error) {\n      console.error('Error deleting photo:', error);\n      toast.error('Failed to delete photo');\n    }\n  };\n\n  // Edit photo metadata\n  const handleEditPhoto = (photo) => {\n    setEditingPhoto(photo);\n    setPhotoMetadata({\n      title: photo.title || '',\n      description: photo.description || '',\n      tags: photo.tags || [],\n      artworkInfo: {\n        year: photo.artwork?.year || photo.exif?.dateTaken ? new Date(photo.exif.dateTaken).getFullYear().toString() : '',\n        series: photo.artwork?.series || '',\n        edition: photo.artwork?.edition || '',\n        size: photo.artwork?.dimensions || '',\n        materials: photo.artwork?.materials || ''\n      },\n      artwork: {\n        medium: photo.artwork?.medium || '',\n        condition: photo.artwork?.condition || 'excellent',\n        rarity: photo.artwork?.rarity || 'common',\n        signature: photo.artwork?.signature || '',\n        provenance: photo.artwork?.provenance || ''\n      },\n      artist: {\n        biography: photo.artist?.biography || '',\n        achievements: photo.artist?.achievements?.highAuctionRecord || '',\n        museums: photo.artist?.museums || [],\n        exhibitions: photo.artist?.exhibitions?.map(ex => ex.title || ex) || []\n      },\n      purchaseInfo: {\n        price: photo.artwork?.price || '',\n        priceOnRequest: !photo.artwork?.price && !!photo.artwork?.isForSale,\n        availability: photo.artwork?.isForSale ? 'available' : 'not_available',\n        shippingInfo: photo.artwork?.shippingInfo || '',\n        returnPolicy: photo.artwork?.returnPolicy || ''\n      },\n      context: {\n        artistStatement: photo.artwork?.context || '',\n        exhibitionHistory: photo.context?.exhibitionHistory || ''\n      }\n    });\n  };\n\n  // Save photo metadata\n  const handleSavePhotoMetadata = async () => {\n    if (!editingPhoto) return;\n    \n    try {\n      // Transform frontend form data to backend Photo model structure\n      const updateData = {\n        title: photoMetadata.title,\n        description: photoMetadata.description,\n        tags: photoMetadata.tags,\n        artwork: {\n          year: photoMetadata.artworkInfo?.year ? parseInt(photoMetadata.artworkInfo.year) : undefined,\n          series: photoMetadata.artworkInfo?.series,\n          edition: photoMetadata.artworkInfo?.edition,\n          dimensions: photoMetadata.artworkInfo?.size,\n          materials: photoMetadata.artworkInfo?.materials,\n          medium: photoMetadata.artwork?.medium,\n          condition: photoMetadata.artwork?.condition,\n          rarity: photoMetadata.artwork?.rarity,\n          signature: photoMetadata.artwork?.signature,\n          provenance: photoMetadata.artwork?.provenance,\n\n          price: photoMetadata.purchaseInfo?.price ? parseFloat(photoMetadata.purchaseInfo.price) : undefined,\n          isForSale: photoMetadata.purchaseInfo?.availability === 'available' || photoMetadata.purchaseInfo?.priceOnRequest,\n          context: photoMetadata.context?.artistStatement,\n          shippingInfo: photoMetadata.purchaseInfo?.shippingInfo,\n          returnPolicy: photoMetadata.purchaseInfo?.returnPolicy\n        },\n        artist: {\n          biography: photoMetadata.artist?.biography,\n          achievements: {\n            highAuctionRecord: photoMetadata.artist?.achievements\n          },\n          museums: photoMetadata.artist?.museums?.filter(m => m.trim() !== ''),\n          exhibitions: photoMetadata.artist?.exhibitions?.filter(e => e.trim() !== '').map(exhibition => ({\n            title: exhibition,\n            year: new Date().getFullYear(),\n            venue: ''\n          }))\n        }\n      };\n      \n      // Remove undefined values to avoid overwriting existing data with undefined\n      Object.keys(updateData.artwork).forEach(key => {\n        if (updateData.artwork[key] === undefined || updateData.artwork[key] === '') {\n          delete updateData.artwork[key];\n        }\n      });\n      \n      Object.keys(updateData.artist).forEach(key => {\n        if (updateData.artist[key] === undefined || updateData.artist[key] === '') {\n          delete updateData.artist[key];\n        }\n      });\n      \n      await axios.put(`/photos/${editingPhoto._id}`, updateData);\n      toast.success('Photo metadata updated successfully');\n      setEditingPhoto(null);\n      fetchPhotos(); // Refresh photos list\n    } catch (error) {\n      console.error('Error updating photo metadata:', error);\n      toast.error('Failed to update photo metadata');\n    }\n  };\n\n  // Handle metadata input change\n  const handleMetadataChange = (field, value) => {\n    if (field.includes('.')) {\n      const keys = field.split('.');\n      setPhotoMetadata(prev => {\n        const newData = { ...prev };\n        let current = newData;\n        \n        // Navigate to the parent object\n        for (let i = 0; i < keys.length - 1; i++) {\n          if (!current[keys[i]]) {\n            current[keys[i]] = {};\n          }\n          current[keys[i]] = { ...current[keys[i]] };\n          current = current[keys[i]];\n        }\n        \n        // Set the final value\n        current[keys[keys.length - 1]] = value;\n        \n        return newData;\n      });\n    } else {\n      setPhotoMetadata(prev => ({\n        ...prev,\n        [field]: value\n      }));\n    }\n  };\n\n  // Toggle publish status\n  const handleTogglePublish = async () => {\n    try {\n      const newStatus = !formData.isPublished;\n      await axios.patch(`/galleries/${id}/status`, {\n        isPublished: newStatus\n      });\n      \n      setFormData(prev => ({ ...prev, isPublished: newStatus }));\n      toast.success(newStatus ? 'Gallery published!' : 'Gallery unpublished');\n      \n    } catch (error) {\n      console.error('Error toggling publish status:', error);\n      toast.error('Failed to update gallery status');\n    }\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Authentication Required</h2>\n          <p className=\"text-gray-600 mb-6\">Please log in to edit galleries.</p>\n          <Link to=\"/login\" className=\"btn-primary\">\n            Log In\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  if (!gallery) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Gallery Not Found</h2>\n          <p className=\"text-gray-600 mb-6\">The requested gallery could not be found.</p>\n          <Link to=\"/dashboard\" className=\"btn-primary\">\n            Back to Dashboard\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center space-x-4\">\n              <Link to=\"/dashboard\" className=\"text-gray-600 hover:text-gray-900\">\n                <ArrowLeftIcon className=\"w-5 h-5\" />\n              </Link>\n              <Link to=\"/\" className=\"text-2xl font-serif font-bold gradient-text\">\n                Gallery Pavilion\n              </Link>\n              <span className=\"text-sm text-gray-500\">/ Editing: {gallery.title}</span>\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={handleTogglePublish}\n                className={`px-4 py-2 rounded-lg font-medium ${\n                  formData.isPublished \n                    ? 'bg-green-100 text-green-800 hover:bg-green-200' \n                    : 'bg-gray-100 text-gray-800 hover:bg-gray-200'\n                } transition-colors`}\n              >\n                {formData.isPublished ? 'Published' : 'Draft'}\n              </button>\n              \n              <button\n                onClick={handleSave}\n                disabled={saving}\n                className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\"\n              >\n                {saving && <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>}\n                <span>{saving ? 'Saving...' : 'Save Changes'}</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n        >\n          {/* Tab Navigation */}\n          <div className=\"mb-8 border-b border-gray-200\">\n            <nav className=\"flex space-x-8\">\n              {[\n                { id: 'edit', label: 'Edit Gallery', icon: PencilIcon },\n                { id: 'photos', label: 'Photos', icon: PhotoIcon },\n                { id: 'share', label: 'Share Links', icon: ShareIcon },\n                { id: 'invitations', label: 'Invitations', icon: UserGroupIcon },\n                { id: 'settings', label: 'Settings', icon: Cog6ToothIcon }\n              ].map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors ${\n                    activeTab === tab.id\n                      ? 'border-primary-500 text-primary-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <tab.icon className=\"w-5 h-5\" />\n                  <span>{tab.label}</span>\n                </button>\n              ))}\n            </nav>\n          </div>\n\n          {/* Edit Tab */}\n          {activeTab === 'edit' && (\n            <div className=\"space-y-8\">\n              {/* Basic Information */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Basic Information</h2>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  {/* Title */}\n                  <div className=\"md:col-span-2\">\n                    <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Gallery Title *\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"title\"\n                      name=\"title\"\n                      value={formData.title}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors.title ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter gallery title\"\n                      maxLength={100}\n                    />\n                    {errors.title && <p className=\"mt-1 text-sm text-red-600\">{errors.title}</p>}\n                    <p className=\"mt-1 text-sm text-gray-500\">{formData.title.length}/100 characters</p>\n                  </div>\n\n                  {/* Category */}\n                  <div>\n                    <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Category *\n                    </label>\n                    <select\n                      id=\"category\"\n                      name=\"category\"\n                      value={formData.category}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors.category ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                    >\n                      <option value=\"\">Select a category</option>\n                      {categories.map(category => (\n                        <option key={category} value={category}>{category}</option>\n                      ))}\n                    </select>\n                    {errors.category && <p className=\"mt-1 text-sm text-red-600\">{errors.category}</p>}\n                  </div>\n\n                  {/* Collections */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Collections\n                    </label>\n                    <div className=\"flex space-x-2\">\n                      <input\n                        type=\"text\"\n                        value={newCollection}\n                        onChange={(e) => setNewCollection(e.target.value)}\n                        onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addCollection())}\n                        className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        placeholder=\"Add collection tag\"\n                        maxLength={50}\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={addCollection}\n                        className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\n                      >\n                        Add\n                      </button>\n                    </div>\n                    {formData.collections.length > 0 && (\n                      <div className=\"mt-2 flex flex-wrap gap-2\">\n                        {formData.collections.map((collection, index) => (\n                          <span\n                            key={index}\n                            className=\"inline-flex items-center px-3 py-1 bg-primary-100 text-primary-800 text-sm rounded-full\"\n                          >\n                            {collection}\n                            <button\n                              type=\"button\"\n                              onClick={() => removeCollection(index)}\n                              className=\"ml-2 text-primary-600 hover:text-primary-800\"\n                            >\n                              <XMarkIcon className=\"w-4 h-4\" />\n                            </button>\n                          </span>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Description */}\n                  <div className=\"md:col-span-2\">\n                    <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Description *\n                    </label>\n                    <textarea\n                      id=\"description\"\n                      name=\"description\"\n                      value={formData.description}\n                      onChange={handleInputChange}\n                      rows={4}\n                      className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors.description ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Describe your gallery\"\n                      maxLength={1000}\n                    />\n                    {errors.description && <p className=\"mt-1 text-sm text-red-600\">{errors.description}</p>}\n                    <p className=\"mt-1 text-sm text-gray-500\">{formData.description.length}/1000 characters</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Cover Image */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Cover Image</h2>\n                \n                {!coverImagePreview ? (\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                    <CloudArrowUpIcon className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-gray-600 mb-4\">Upload a cover image for your gallery</p>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleCoverImageChange}\n                      className=\"hidden\"\n                      id=\"coverImage\"\n                    />\n                    <label\n                      htmlFor=\"coverImage\"\n                      className=\"btn-secondary cursor-pointer\"\n                    >\n                      Choose Image\n                    </label>\n                    <p className=\"text-sm text-gray-500 mt-2\">PNG, JPG, GIF up to 10MB</p>\n                  </div>\n                ) : (\n                  <div className=\"relative\">\n                    <img\n                      src={coverImagePreview}\n                      alt=\"Cover preview\"\n                      className=\"w-full h-64 object-cover rounded-lg\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={removeCoverImage}\n                      className=\"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors\"\n                    >\n                      <XMarkIcon className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Photos Tab */}\n          {activeTab === 'photos' && (\n            <div className=\"space-y-6\">\n              {/* Upload Section */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Upload Photos</h2>\n                \n                <div \n                  className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n                    dragActive \n                      ? 'border-primary-500 bg-primary-50' \n                      : 'border-gray-300 hover:border-gray-400'\n                  }`}\n                  onDragEnter={handleDrag}\n                  onDragLeave={handleDrag}\n                  onDragOver={handleDrag}\n                  onDrop={handleDrop}\n                >\n                  <CloudArrowUpIcon className={`w-12 h-12 mx-auto mb-4 ${\n                    dragActive ? 'text-primary-500' : 'text-gray-400'\n                  }`} />\n                  <p className={`mb-4 ${\n                    dragActive ? 'text-primary-600' : 'text-gray-600'\n                  }`}>\n                    {dragActive ? 'Drop photos here!' : 'Drag and drop photos here, or click to browse'}\n                  </p>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleFileInputChange}\n                    multiple\n                    className=\"hidden\"\n                    id=\"photoUpload\"\n                    disabled={uploading}\n                  />\n                  <label\n                    htmlFor=\"photoUpload\"\n                    className={`btn-secondary cursor-pointer ${\n                      uploading ? 'opacity-50 cursor-not-allowed' : ''\n                    }`}\n                  >\n                    {uploading ? 'Uploading...' : 'Select Photos'}\n                  </label>\n                  <p className=\"text-sm text-gray-500 mt-2\">\n                    Up to 20 photos at once, 10MB each  Supports JPG, PNG, WEBP\n                  </p>\n                  {uploading && (\n                    <div className=\"mt-4\">\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                        <div className=\"bg-primary-600 h-2 rounded-full animate-pulse\" style={{width: '60%'}}></div>\n                      </div>\n                      <p className=\"text-sm text-gray-500 mt-2\">Processing images and generating watermarks...</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Photos Grid */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">\n                  Photos ({photos.length})\n                </h2>\n                \n                {photos.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <PhotoIcon className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-gray-600\">No photos uploaded yet</p>\n                    <p className=\"text-sm text-gray-500 mt-2\">Upload photos to get started</p>\n                  </div>\n                ) : (\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4\">\n                    {photos.map((photo) => (\n                      <div key={photo._id} className=\"group relative\">\n                        <img\n                          src={photo.previewUrl || `/uploads/photos/${photo.filename}`}\n                          alt={photo.title}\n                          className=\"w-full h-48 object-cover rounded-lg\"\n                        />\n                        <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100\">\n                          <div className=\"flex space-x-2\">\n                            <button className=\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\">\n                              <EyeIcon className=\"w-4 h-4 text-white\" />\n                            </button>\n                            <button \n                              onClick={() => handleEditPhoto(photo)}\n                              className=\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\"\n                            >\n                              <AdjustmentsHorizontalIcon className=\"w-4 h-4 text-white\" />\n                            </button>\n                            <button \n                              onClick={() => handleDeletePhoto(photo._id)}\n                              className=\"p-2 bg-red-600 hover:bg-red-700 rounded-full transition-colors\"\n                            >\n                              <TrashIcon className=\"w-4 h-4 text-white\" />\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Share Tab */}\n          {activeTab === 'share' && (\n            <div className=\"space-y-6\">\n              {/* Create New Share Link */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Create Share Link</h2>\n                <ShareLinkForm onCreateShare={createShareLink} />\n              </div>\n\n              {/* Existing Share Links */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Existing Share Links</h2>\n                {loadingShares ? (\n                  <div className=\"flex justify-center py-8\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n                  </div>\n                ) : shareLinks.length === 0 ? (\n                  <div className=\"text-center py-8 text-gray-500\">\n                    <ShareIcon className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\n                    <p>No share links created yet</p>\n                    <p className=\"text-sm\">Create your first share link above</p>\n                  </div>\n                ) : (\n                  <ShareLinksList \n                    shareLinks={shareLinks} \n                    onDeleteShare={deleteShareLink}\n                    galleryId={id}\n                  />\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Invitations Tab */}\n          {activeTab === 'invitations' && (\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <InviteManager \n                galleryId={id} \n                isInviteOnly={formData.settings.inviteOnly} \n              />\n            </div>\n          )}\n\n          {/* Settings Tab */}\n          {activeTab === 'settings' && (\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Gallery Settings</h2>\n              \n              <div className=\"space-y-6\">\n                {/* Basic Settings */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"allowDownload\"\n                      name=\"settings.allowDownload\"\n                      checked={formData.settings.allowDownload}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"allowDownload\" className=\"ml-2 block text-sm text-gray-700\">\n                      Allow photo downloads\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"showMetadata\"\n                      name=\"settings.showMetadata\"\n                      checked={formData.settings.showMetadata}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"showMetadata\" className=\"ml-2 block text-sm text-gray-700\">\n                      Show photo metadata\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"enableComments\"\n                      name=\"settings.enableComments\"\n                      checked={formData.settings.enableComments}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"enableComments\" className=\"ml-2 block text-sm text-gray-700\">\n                      Enable comments\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"requirePassword\"\n                      name=\"settings.requirePassword\"\n                      checked={formData.settings.requirePassword}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"requirePassword\" className=\"ml-2 block text-sm text-gray-700\">\n                      Require password for access\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"inviteOnly\"\n                      name=\"settings.inviteOnly\"\n                      checked={formData.settings.inviteOnly}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"inviteOnly\" className=\"ml-2 block text-sm text-gray-700\">\n                      Invite-only access (requires invitation code)\n                    </label>\n                  </div>\n                </div>\n\n                {/* Password Field */}\n                {formData.settings.requirePassword && (\n                  <div>\n                    <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Gallery Password *\n                    </label>\n                    <input\n                      type=\"password\"\n                      id=\"password\"\n                      name=\"settings.password\"\n                      value={formData.settings.password}\n                      onChange={handleInputChange}\n                      className={`w-full max-w-md px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors['settings.password'] ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter gallery password\"\n                    />\n                    {errors['settings.password'] && (\n                      <p className=\"mt-1 text-sm text-red-600\">{errors['settings.password']}</p>\n                    )}\n                  </div>\n                )}\n\n                {/* Watermark Intensity */}\n                <div>\n                  <label htmlFor=\"watermarkIntensity\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Watermark Intensity: {Math.round(formData.settings.watermarkIntensity * 100)}%\n                  </label>\n                  <input\n                    type=\"range\"\n                    id=\"watermarkIntensity\"\n                    name=\"settings.watermarkIntensity\"\n                    min=\"0\"\n                    max=\"1\"\n                    step=\"0.1\"\n                    value={formData.settings.watermarkIntensity}\n                    onChange={handleInputChange}\n                    className=\"w-full max-w-md\"\n                  />\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    Controls the opacity of watermarks on preview images\n                  </p>\n                </div>\n\n                {/* Danger Zone */}\n                <div className=\"border-t border-gray-200 pt-6 mt-6\">\n                  <h3 className=\"text-lg font-semibold text-red-700 mb-4\">Danger Zone</h3>\n                  <div className=\"space-y-4\">\n                    <button\n                      onClick={() => {\n                        if (window.confirm('Are you sure you want to delete this gallery? This action cannot be undone.')) {\n                          // Handle delete\n                        }\n                      }}\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n                    >\n                      Delete Gallery\n                    </button>\n                    <p className=\"text-sm text-gray-600\">\n                      Once deleted, the gallery and all its photos cannot be recovered.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </motion.div>\n      </main>\n\n      {/* Photo Metadata Editing Modal */}\n      {editingPhoto && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-2xl font-semibold text-gray-900\">Edit Photo Metadata</h2>\n                <button\n                  onClick={() => setEditingPhoto(null)}\n                  className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n                >\n                  <XMarkIcon className=\"w-6 h-6 text-gray-500\" />\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                {/* Photo Preview */}\n                <div>\n                  <img\n                    src={editingPhoto.previewUrl || `/uploads/photos/${editingPhoto.filename}`}\n                    alt={editingPhoto.title}\n                    className=\"w-full h-64 object-cover rounded-lg mb-4\"\n                  />\n                  <p className=\"text-sm text-gray-500\">Original: {editingPhoto.originalFilename}</p>\n                </div>\n\n                {/* Metadata Form */}\n                <div className=\"space-y-6\">\n                  {/* Basic Info */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Basic Information</h3>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Title</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.title}\n                          onChange={(e) => handleMetadataChange('title', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                        <textarea\n                          value={photoMetadata.description}\n                          onChange={(e) => handleMetadataChange('description', e.target.value)}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Artwork Information */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Artwork Information</h3>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Year</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo?.year || ''}\n                          onChange={(e) => handleMetadataChange('artworkInfo.year', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Series</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo?.series || ''}\n                          onChange={(e) => handleMetadataChange('artworkInfo.series', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Edition</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo?.edition || ''}\n                          onChange={(e) => handleMetadataChange('artworkInfo.edition', e.target.value)}\n                          placeholder=\"e.g., 1/50\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Size</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo?.size || ''}\n                          onChange={(e) => handleMetadataChange('artworkInfo.size', e.target.value)}\n                          placeholder=\"e.g., 24x36 inches\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Medium</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artwork?.medium || ''}\n                          onChange={(e) => handleMetadataChange('artwork.medium', e.target.value)}\n                          placeholder=\"e.g., Photography, Digital Print\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Condition</label>\n                        <select\n                          value={photoMetadata.artwork?.condition || 'excellent'}\n                          onChange={(e) => handleMetadataChange('artwork.condition', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        >\n                          <option value=\"excellent\">Excellent</option>\n                          <option value=\"very-good\">Very Good</option>\n                          <option value=\"good\">Good</option>\n                          <option value=\"fair\">Fair</option>\n                          <option value=\"poor\">Poor</option>\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Rarity</label>\n                        <select\n                          value={photoMetadata.artwork?.rarity || 'common'}\n                          onChange={(e) => handleMetadataChange('artwork.rarity', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        >\n                          <option value=\"unique\">Unique</option>\n                          <option value=\"rare\">Rare</option>\n                          <option value=\"uncommon\">Uncommon</option>\n                          <option value=\"common\">Common</option>\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Signature</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artwork?.signature || ''}\n                          onChange={(e) => handleMetadataChange('artwork.signature', e.target.value)}\n                          placeholder=\"e.g., Signed lower right\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div className=\"col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Materials</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo?.materials || ''}\n                          onChange={(e) => handleMetadataChange('artworkInfo.materials', e.target.value)}\n                          placeholder=\"e.g., Archival pigment print on cotton paper\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div className=\"col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Provenance</label>\n                        <textarea\n                          value={photoMetadata.artwork?.provenance || ''}\n                          onChange={(e) => handleMetadataChange('artwork.provenance', e.target.value)}\n                          placeholder=\"History of ownership and exhibition\"\n                          rows={3}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Artist Information */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Artist Information</h3>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Biography</label>\n                        <textarea\n                          value={photoMetadata.artist?.biography || ''}\n                          onChange={(e) => handleMetadataChange('artist.biography', e.target.value)}\n                          placeholder=\"Artist's background and career highlights\"\n                          rows={4}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Achievements</label>\n                        <textarea\n                          value={photoMetadata.artist?.achievements || ''}\n                          onChange={(e) => handleMetadataChange('artist.achievements', e.target.value)}\n                          placeholder=\"Awards, recognitions, and notable accomplishments\"\n                          rows={3}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Museums & Exhibitions */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Museums & Collections</h3>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Museums</label>\n                        <div className=\"space-y-2\">\n                          {(photoMetadata.artist?.museums || []).map((museum, index) => (\n                            <div key={index} className=\"flex gap-2\">\n                              <input\n                                type=\"text\"\n                                value={museum}\n                                onChange={(e) => {\n                                  const newMuseums = [...(photoMetadata.artist?.museums || [])];\n                                  newMuseums[index] = e.target.value;\n                                  handleMetadataChange('artist.museums', newMuseums);\n                                }}\n                                placeholder=\"Museum name\"\n                                className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                              />\n                              <button\n                                type=\"button\"\n                                onClick={() => {\n                                  const newMuseums = (photoMetadata.artist?.museums || []).filter((_, i) => i !== index);\n                                  handleMetadataChange('artist.museums', newMuseums);\n                                }}\n                                className=\"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                              >\n                                Remove\n                              </button>\n                            </div>\n                          ))}\n                          <button\n                            type=\"button\"\n                            onClick={() => {\n                              const newMuseums = [...(photoMetadata.artist?.museums || []), ''];\n                              handleMetadataChange('artist.museums', newMuseums);\n                            }}\n                            className=\"px-4 py-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors\"\n                          >\n                            Add Museum\n                          </button>\n                        </div>\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Exhibitions</label>\n                        <div className=\"space-y-2\">\n                          {(photoMetadata.artist?.exhibitions || []).map((exhibition, index) => (\n                            <div key={index} className=\"flex gap-2\">\n                              <input\n                                type=\"text\"\n                                value={exhibition}\n                                onChange={(e) => {\n                                  const newExhibitions = [...(photoMetadata.artist?.exhibitions || [])];\n                                  newExhibitions[index] = e.target.value;\n                                  handleMetadataChange('artist.exhibitions', newExhibitions);\n                                }}\n                                placeholder=\"Exhibition name and year\"\n                                className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                              />\n                              <button\n                                type=\"button\"\n                                onClick={() => {\n                                  const newExhibitions = (photoMetadata.artist?.exhibitions || []).filter((_, i) => i !== index);\n                                  handleMetadataChange('artist.exhibitions', newExhibitions);\n                                }}\n                                className=\"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                              >\n                                Remove\n                              </button>\n                            </div>\n                          ))}\n                          <button\n                            type=\"button\"\n                            onClick={() => {\n                              const newExhibitions = [...(photoMetadata.artist?.exhibitions || []), ''];\n                              handleMetadataChange('artist.exhibitions', newExhibitions);\n                            }}\n                            className=\"px-4 py-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors\"\n                          >\n                            Add Exhibition\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Tags */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Tags</h3>\n                    <div className=\"space-y-2\">\n                      {(photoMetadata.tags || []).map((tag, index) => (\n                        <div key={index} className=\"flex gap-2\">\n                          <input\n                            type=\"text\"\n                            value={tag}\n                            onChange={(e) => {\n                              const newTags = [...(photoMetadata.tags || [])];\n                              newTags[index] = e.target.value;\n                              handleMetadataChange('tags', newTags);\n                            }}\n                            placeholder=\"Tag\"\n                            className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                          />\n                          <button\n                            type=\"button\"\n                            onClick={() => {\n                              const newTags = (photoMetadata.tags || []).filter((_, i) => i !== index);\n                              handleMetadataChange('tags', newTags);\n                            }}\n                            className=\"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                          >\n                            Remove\n                          </button>\n                        </div>\n                      ))}\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          const newTags = [...(photoMetadata.tags || []), ''];\n                          handleMetadataChange('tags', newTags);\n                        }}\n                        className=\"px-4 py-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors\"\n                      >\n                        Add Tag\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* Purchase Information */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Purchase Information</h3>\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"flex-1\">\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Price</label>\n                          <input\n                            type=\"text\"\n                            value={photoMetadata.purchaseInfo.price}\n                            onChange={(e) => handleMetadataChange('purchaseInfo.price', e.target.value)}\n                            placeholder=\"$2,500\"\n                            disabled={photoMetadata.purchaseInfo.priceOnRequest}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100\"\n                          />\n                        </div>\n                        <div className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            id=\"priceOnRequest\"\n                            checked={photoMetadata.purchaseInfo.priceOnRequest}\n                            onChange={(e) => handleMetadataChange('purchaseInfo.priceOnRequest', e.target.checked)}\n                            className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                          />\n                          <label htmlFor=\"priceOnRequest\" className=\"ml-2 text-sm text-gray-700\">\n                            Price on Request\n                          </label>\n                        </div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Availability</label>\n                        <select\n                          value={photoMetadata.purchaseInfo.availability}\n                          onChange={(e) => handleMetadataChange('purchaseInfo.availability', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        >\n                          <option value=\"available\">Available</option>\n                          <option value=\"sold\">Sold</option>\n                          <option value=\"reserved\">Reserved</option>\n                          <option value=\"not-for-sale\">Not for Sale</option>\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"flex justify-end space-x-4 mt-8 pt-6 border-t\">\n                <button\n                  onClick={() => setEditingPhoto(null)}\n                  className=\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSavePhotoMetadata}\n                  className=\"px-4 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded-lg transition-colors\"\n                >\n                  Save Changes\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GalleryPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}