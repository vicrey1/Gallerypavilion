{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/Desktop/Gallerypavilion/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from'react';import{useParams,useNavigate,useSearchParams}from'react-router-dom';import{motion,AnimatePresence}from'framer-motion';import axios from'axios';import{ArrowLeft,Camera,Calendar,MapPin,Info,Mail,ShoppingCart,Sun,Moon,Heart,Share2,Download,Eye,Palette,Award,Edit3}from'lucide-react';import{useAuth}from'../contexts/AuthContext';import PhotoEditForm from'../components/PhotoEditForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const prefersDark=()=>window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;const PhotoDetailPage=()=>{var _photo$metadata4,_photo$metadata4$purc,_photo$metadata5,_photo$metadata6,_photo$metadata7,_photo$metadata7$artw,_photo$metadata8,_photo$metadata8$artw,_photo$metadata9,_photo$metadata9$artw,_photo$metadata0,_photo$metadata0$artw,_photo$metadata1,_photo$metadata1$artw,_photo$metadata10,_photo$metadata11,_photo$metadata12,_photo$metadata13,_photo$metadata13$pur,_gallery$photographer3;const{token,photoId}=useParams();const[searchParams]=useSearchParams();const navigate=useNavigate();const{user,isAuthenticated}=useAuth();const[photo,setPhoto]=useState(null);const[gallery,setGallery]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isEditing,setIsEditing]=useState(false);// Theme: default to system\nconst[theme,setTheme]=useState(prefersDark()?'dark':'light');// Apply theme to document\nuseEffect(()=>{if(theme==='dark'){document.documentElement.classList.add('dark');}else{document.documentElement.classList.remove('dark');}},[theme]);useEffect(()=>{const mq=window.matchMedia('(prefers-color-scheme: dark)');const handler=e=>setTheme(e.matches?'dark':'light');mq.addEventListener('change',handler);return()=>mq.removeEventListener('change',handler);},[]);const toggleTheme=()=>setTheme(t=>t==='dark'?'light':'dark');// Check if current user is the photographer\nconst isPhotographer=isAuthenticated&&user&&(photo===null||photo===void 0?void 0:photo.photographer)&&(user.id===photo.photographer._id||user.id===photo.photographer);useEffect(()=>{const fetchData=async()=>{try{setLoading(true);setError(null);// We can fetch photo by id; the backend allows optional auth and public access if permitted\nconst params={};// If there was a password or invite on gallery, propagate via query if present\nconst password=searchParams.get('password');const invite=searchParams.get('invite');if(password)params.password=password;if(invite)params.invite=invite;// Fetch the shared gallery to get photographer contact and photos\nconst galleryResp=await axios.get(\"/share/\".concat(token),{params});const g=galleryResp.data.gallery||galleryResp.data;const respPhotographer=galleryResp.data.photographer||(g===null||g===void 0?void 0:g.photographer);const photos=galleryResp.data.photos||[];const normalizedPhotographer=respPhotographer&&typeof respPhotographer==='object'?_objectSpread(_objectSpread({},respPhotographer),{},{name:respPhotographer.name||\"\".concat(respPhotographer.firstName||'',\" \").concat(respPhotographer.lastName||'').trim(),email:respPhotographer.email||respPhotographer.clientEmail||undefined}):respPhotographer||undefined;const normalizedGallery=_objectSpread(_objectSpread({},g),{},{photographer:normalizedPhotographer||(typeof(g===null||g===void 0?void 0:g.photographer)==='object'?_objectSpread(_objectSpread({},g.photographer),{},{name:g.photographer.name||\"\".concat(g.photographer.firstName||'',\" \").concat(g.photographer.lastName||'').trim()}):g===null||g===void 0?void 0:g.photographer)});setGallery(normalizedGallery);// Find the specific photo from the shared gallery photos\nconst specificPhoto=photos.find(p=>p._id===photoId);if(!specificPhoto){throw new Error('Photo not found in this gallery');}setPhoto(specificPhoto);// Check if current user is the photographer is now handled by computed value below\n}catch(err){var _err$response,_err$response$data;console.error('Failed to load photo detail',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to load photo details');}finally{setLoading(false);}};fetchData();},[token,photoId,searchParams]);const handleSavePhoto=async updatedData=>{try{const authToken=localStorage.getItem('token');if(!authToken){throw new Error('Authentication required');}const response=await axios.put(\"/api/photos/\".concat(photoId),updatedData,{headers:{Authorization:\"Bearer \".concat(authToken),'Content-Type':'application/json'}});// Update the local photo state\nsetPhoto(response.data);setIsEditing(false);// Show success message (you can add a toast notification here)\nconsole.log('Photo updated successfully');}catch(error){console.error('Error updating photo:',error);throw error;}};const photographerEmail=useMemo(()=>{var _gallery$photographer,_gallery$photographer2,_photo$photographer,_photo$photographer2,_photo$gallery,_photo$gallery$photog,_photo$gallery2,_photo$gallery2$photo;const fromGallery=(gallery===null||gallery===void 0?void 0:(_gallery$photographer=gallery.photographer)===null||_gallery$photographer===void 0?void 0:_gallery$photographer.email)||(gallery===null||gallery===void 0?void 0:(_gallery$photographer2=gallery.photographer)===null||_gallery$photographer2===void 0?void 0:_gallery$photographer2.clientEmail);const fromPhoto=(photo===null||photo===void 0?void 0:(_photo$photographer=photo.photographer)===null||_photo$photographer===void 0?void 0:_photo$photographer.email)||(photo===null||photo===void 0?void 0:(_photo$photographer2=photo.photographer)===null||_photo$photographer2===void 0?void 0:_photo$photographer2.clientEmail);const fromPhotoGallery=(photo===null||photo===void 0?void 0:(_photo$gallery=photo.gallery)===null||_photo$gallery===void 0?void 0:(_photo$gallery$photog=_photo$gallery.photographer)===null||_photo$gallery$photog===void 0?void 0:_photo$gallery$photog.email)||(photo===null||photo===void 0?void 0:(_photo$gallery2=photo.gallery)===null||_photo$gallery2===void 0?void 0:(_photo$gallery2$photo=_photo$gallery2.photographer)===null||_photo$gallery2$photo===void 0?void 0:_photo$gallery2$photo.clientEmail);return fromGallery||fromPhoto||fromPhotoGallery||'';},[gallery,photo]);const handleInquiry=()=>{var _photo$metadata,_photo$metadata2,_photo$metadata2$purc;if(!photo)return;if(!photographerEmail){alert('Photographer email not available yet. Please try again later or contact the gallery owner.');return;}const subject=\"Inquiry about \\\"\".concat(photo.title||'Artwork',\"\\\"\");const body=\"Hi,\\n\\nI'm interested in learning more about the artwork \\\"\".concat(photo.title||'this piece',\"\\\"\").concat((_photo$metadata=photo.metadata)!==null&&_photo$metadata!==void 0&&_photo$metadata.artworkInfo?\" (\".concat(photo.metadata.artworkInfo.medium).concat(photo.metadata.artworkInfo.year?\", \".concat(photo.metadata.artworkInfo.year):'',\")\"):'',\".\\n\\n\").concat((_photo$metadata2=photo.metadata)!==null&&_photo$metadata2!==void 0&&(_photo$metadata2$purc=_photo$metadata2.purchaseInfo)!==null&&_photo$metadata2$purc!==void 0&&_photo$metadata2$purc.price?\"Listed price: $\".concat(photo.metadata.purchaseInfo.price.toLocaleString(),\"\\n\\n\"):'',\"Please provide more information about availability, pricing, and shipping.\\n\\nThank you!\");const mailtoLink=\"mailto:\".concat(encodeURIComponent(photographerEmail),\"?subject=\").concat(encodeURIComponent(subject),\"&body=\").concat(encodeURIComponent(body));window.open(mailtoLink,'_blank');};const handlePurchase=()=>{var _photo$metadata3,_photo$metadata3$purc;if(!photo)return;if(!photographerEmail){alert('Photographer email not available yet. Please try again later or contact the gallery owner.');return;}const subject=\"Purchase request for \\\"\".concat(photo.title||'Artwork',\"\\\"\");const body=\"Hello,\\n\\nI would like to purchase \\\"\".concat(photo.title||'this artwork',\"\\\".\").concat((_photo$metadata3=photo.metadata)!==null&&_photo$metadata3!==void 0&&(_photo$metadata3$purc=_photo$metadata3.purchaseInfo)!==null&&_photo$metadata3$purc!==void 0&&_photo$metadata3$purc.price?\"\\n\\nPrice understood: $\".concat(photo.metadata.purchaseInfo.price.toLocaleString()):'',\"\\n\\nPlease let me know the next steps for payment and delivery.\\n\\nBest regards,\");const mailtoLink=\"mailto:\".concat(encodeURIComponent(photographerEmail),\"?subject=\").concat(encodeURIComponent(subject),\"&body=\").concat(encodeURIComponent(body));window.open(mailtoLink,'_blank');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-neutral-100 dark:bg-black text-neutral-800 dark:text-neutral-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin h-10 w-10 border-4 border-neutral-300 border-t-transparent rounded-full\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex flex-col items-center justify-center gap-4 bg-neutral-100 dark:bg-black text-neutral-800 dark:text-neutral-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"px-4 py-2 rounded-md bg-neutral-900 text-white dark:bg-white dark:text-black\",children:\"Go Back\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen \".concat(theme==='dark'?'dark':'',\" bg-gradient-to-br from-white via-neutral-50 to-neutral-100 dark:from-black dark:via-neutral-950 dark:to-neutral-900 text-neutral-900 dark:text-neutral-50 relative overflow-hidden\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 overflow-hidden pointer-events-none\",children:[/*#__PURE__*/_jsx(motion.div,{className:\"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-purple-600/10 rounded-full blur-3xl\",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:Infinity,ease:\"linear\"}}),/*#__PURE__*/_jsx(motion.div,{className:\"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-emerald-400/10 to-cyan-600/10 rounded-full blur-3xl\",animate:{scale:[1.2,1,1.2],rotate:[360,180,0]},transition:{duration:25,repeat:Infinity,ease:\"linear\"}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8 relative z-10\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:0.6},className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(\"/gallery/\".concat(token)),className:\"group inline-flex items-center gap-3 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:18,className:\"group-hover:-translate-x-1 transition-transform duration-300\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Back to Gallery\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[isPhotographer&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsEditing(true),className:\"inline-flex items-center gap-2 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\",children:[/*#__PURE__*/_jsx(Edit3,{size:16}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Edit\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"p-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\",children:/*#__PURE__*/_jsx(Share2,{size:18})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setTheme(theme==='dark'?'light':'dark'),className:\"inline-flex items-center gap-2 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\",children:[theme==='dark'?/*#__PURE__*/_jsx(Sun,{size:16}):/*#__PURE__*/_jsx(Moon,{size:16}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:theme==='dark'?'Light':'Dark'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto space-y-8\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:0.8,ease:\"easeOut\"},className:\"group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative rounded-3xl overflow-hidden shadow-2xl ring-1 ring-black/5 dark:ring-white/10 bg-gradient-to-br from-white to-neutral-50 dark:from-neutral-950 dark:to-black\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative overflow-hidden\",children:[/*#__PURE__*/_jsx(motion.img,{src:photo.url||photo.previewUrl||photo.thumbnailUrl,alt:photo.title||'Photo',className:\"w-full h-auto object-contain transition-transform duration-700 group-hover:scale-105\",whileHover:{scale:1.02},transition:{duration:0.3}}),/*#__PURE__*/_jsx(motion.div,{className:\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\",initial:{opacity:0},whileHover:{opacity:1},children:/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-6 left-6 right-6 flex justify-between items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:0.95},className:\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\",children:/*#__PURE__*/_jsx(Eye,{size:20})}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:0.95},className:\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\",children:/*#__PURE__*/_jsx(Heart,{size:20})})]}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:0.95},className:\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\",children:/*#__PURE__*/_jsx(Download,{size:20})})]})})]}),((_photo$metadata4=photo.metadata)===null||_photo$metadata4===void 0?void 0:(_photo$metadata4$purc=_photo$metadata4.purchaseInfo)===null||_photo$metadata4$purc===void 0?void 0:_photo$metadata4$purc.price)&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},transition:{delay:0.5},className:\"absolute top-6 right-6 px-4 py-2 rounded-full bg-gradient-to-r from-amber-400 to-orange-500 text-white text-sm font-semibold shadow-lg backdrop-blur-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Award,{size:16}),\"Premium\"]})]})}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:0.8,delay:0.2,ease:\"easeOut\"},className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.4},children:[/*#__PURE__*/_jsx(motion.h1,{className:\"text-4xl lg:text-5xl font-bold tracking-tight bg-gradient-to-r from-neutral-900 to-neutral-600 dark:from-neutral-100 dark:to-neutral-400 bg-clip-text text-transparent mb-4\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.5},children:photo.title||'Untitled'}),((_photo$metadata5=photo.metadata)===null||_photo$metadata5===void 0?void 0:_photo$metadata5.description)&&/*#__PURE__*/_jsx(motion.p,{className:\"text-lg text-neutral-600 dark:text-neutral-300 leading-relaxed font-light\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.6},children:photo.metadata.description})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:0.7},className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-neutral-200 dark:border-neutral-700\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex space-x-8\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"py-2 px-1 border-b-2 border-black dark:border-white font-medium text-sm text-neutral-900 dark:text-neutral-100\",children:\"About the work\"}),/*#__PURE__*/_jsx(\"button\",{className:\"py-2 px-1 border-b-2 border-transparent font-medium text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300\",children:\"Exhibition history\"}),/*#__PURE__*/_jsx(\"button\",{className:\"py-2 px-1 border-b-2 border-transparent font-medium text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300\",children:\"Provenance\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[((_photo$metadata6=photo.metadata)===null||_photo$metadata6===void 0?void 0:_photo$metadata6.description)&&/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-neutral dark:prose-invert max-w-none\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-700 dark:text-neutral-300 leading-relaxed\",children:photo.metadata.description})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[((_photo$metadata7=photo.metadata)===null||_photo$metadata7===void 0?void 0:(_photo$metadata7$artw=_photo$metadata7.artworkInfo)===null||_photo$metadata7$artw===void 0?void 0:_photo$metadata7$artw.materials)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Materials\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.metadata.artworkInfo.materials})]}),((_photo$metadata8=photo.metadata)===null||_photo$metadata8===void 0?void 0:(_photo$metadata8$artw=_photo$metadata8.artworkInfo)===null||_photo$metadata8$artw===void 0?void 0:_photo$metadata8$artw.dimensions)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Size\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.metadata.artworkInfo.dimensions})]}),((_photo$metadata9=photo.metadata)===null||_photo$metadata9===void 0?void 0:(_photo$metadata9$artw=_photo$metadata9.artworkInfo)===null||_photo$metadata9$artw===void 0?void 0:_photo$metadata9$artw.edition)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Rarity\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.metadata.artworkInfo.edition})]}),((_photo$metadata0=photo.metadata)===null||_photo$metadata0===void 0?void 0:(_photo$metadata0$artw=_photo$metadata0.artworkInfo)===null||_photo$metadata0$artw===void 0?void 0:_photo$metadata0$artw.medium)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.metadata.artworkInfo.medium})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Condition\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:\"Excellent condition\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Signature\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:\"Signed by artist\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Certificate of authenticity\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:\"Included (issued by gallery)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Frame\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:\"Not included\"})]}),((_photo$metadata1=photo.metadata)===null||_photo$metadata1===void 0?void 0:(_photo$metadata1$artw=_photo$metadata1.artworkInfo)===null||_photo$metadata1$artw===void 0?void 0:_photo$metadata1$artw.series)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Series\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-neutral-900 dark:text-neutral-100\",children:photo.metadata.artworkInfo.series})]})]})]})]})]}),((_photo$metadata10=photo.metadata)===null||_photo$metadata10===void 0?void 0:_photo$metadata10.exif)&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:0.8},className:\"rounded-2xl bg-gradient-to-br from-white/90 to-white/70 dark:from-neutral-900/90 dark:to-neutral-900/60 backdrop-blur-xl ring-1 ring-black/5 dark:ring-white/10 p-6 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 text-white\",children:/*#__PURE__*/_jsx(Camera,{size:18})}),\"Technical Details\"]}),((_photo$metadata11=photo.metadata)===null||_photo$metadata11===void 0?void 0:_photo$metadata11.exif)&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:0.9},className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 text-white\",children:/*#__PURE__*/_jsx(Camera,{size:18})}),\"Technical Details\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-2 pl-12\",children:[photo.metadata.exif.cameraModel&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-2 border-b border-neutral-200/50 dark:border-neutral-700/50\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-600 dark:text-neutral-400 font-medium\",children:\"Camera\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-900 dark:text-neutral-100 font-semibold\",children:photo.metadata.exif.cameraModel})]}),photo.metadata.exif.lensModel&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-2 border-b border-neutral-200/50 dark:border-neutral-700/50\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-600 dark:text-neutral-400 font-medium\",children:\"Lens\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-900 dark:text-neutral-100 font-semibold\",children:photo.metadata.exif.lensModel})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[photo.metadata.exif.fNumber&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\",children:\"Aperture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-neutral-900 dark:text-neutral-100\",children:[\"f/\",photo.metadata.exif.fNumber]})]}),photo.metadata.exif.exposureTime&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\",children:\"Shutter\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-neutral-900 dark:text-neutral-100\",children:[photo.metadata.exif.exposureTime,\"s\"]})]}),photo.metadata.exif.iso&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\",children:\"ISO\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-bold text-neutral-900 dark:text-neutral-100\",children:photo.metadata.exif.iso})]}),photo.metadata.exif.focalLength&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\",children:\"Focal\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-neutral-900 dark:text-neutral-100\",children:[photo.metadata.exif.focalLength,\"mm\"]})]})]})]})]}),((_photo$metadata12=photo.metadata)===null||_photo$metadata12===void 0?void 0:_photo$metadata12.location)&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1.0},className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 text-white\",children:/*#__PURE__*/_jsx(MapPin,{size:18})}),\"Location\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-700 dark:text-neutral-300 pl-12 font-medium\",children:photo.metadata.location})]})]})}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.1},className:\"space-y-6\",children:[((_photo$metadata13=photo.metadata)===null||_photo$metadata13===void 0?void 0:(_photo$metadata13$pur=_photo$metadata13.purchaseInfo)===null||_photo$metadata13$pur===void 0?void 0:_photo$metadata13$pur.price)&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.9},animate:{opacity:1,scale:1},transition:{delay:1.2},className:\"text-center p-6 rounded-2xl bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200/50 dark:border-amber-700/50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-amber-600 dark:text-amber-400 font-medium uppercase tracking-wide mb-2\",children:\"Price\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-4xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent\",children:[\"$\",photo.metadata.purchaseInfo.price.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(motion.button,{onClick:handleInquiry,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1.3},whileHover:{scale:1.05,y:-2},whileTap:{scale:0.95},className:\"group relative px-6 py-4 rounded-2xl bg-gradient-to-r from-neutral-900 to-neutral-700 dark:from-white dark:to-neutral-200 text-white dark:text-black font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-r from-neutral-700 to-neutral-900 dark:from-neutral-200 dark:to-white opacity-0 group-hover:opacity-100 transition-opacity duration-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Mail,{size:18,className:\"group-hover:rotate-12 transition-transform duration-300\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Inquiry\"})]})]}),/*#__PURE__*/_jsxs(motion.button,{onClick:handlePurchase,initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:1.4},whileHover:{scale:1.05,y:-2},whileTap:{scale:0.95},className:\"group relative px-6 py-4 rounded-2xl bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-r from-emerald-500 to-teal-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(ShoppingCart,{size:18,className:\"group-hover:scale-110 transition-transform duration-300\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Purchase\"})]})]})]})]}),(gallery===null||gallery===void 0?void 0:(_gallery$photographer3=gallery.photographer)===null||_gallery$photographer3===void 0?void 0:_gallery$photographer3.name)&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.5},className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 pb-4 border-b border-neutral-200 dark:border-neutral-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-full bg-gradient-to-br from-neutral-200 to-neutral-300 dark:from-neutral-700 dark:to-neutral-800 flex items-center justify-center text-2xl font-bold text-neutral-600 dark:text-neutral-300\",children:gallery.photographer.name.charAt(0)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-neutral-900 dark:text-neutral-100\",children:gallery.photographer.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-neutral-600 dark:text-neutral-400\",children:[\"Photographer, \",new Date().getFullYear()-30,\"\\u2013\",new Date().getFullYear()]}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline\",children:\"Follow\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-neutral dark:prose-invert max-w-none\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-neutral-700 dark:text-neutral-300 leading-relaxed\",children:[gallery.photographer.name,\" is a renowned contemporary photographer known for their distinctive style and innovative approach to visual storytelling. Their work has been featured in major galleries and exhibitions worldwide, capturing the essence of modern life through a unique artistic lens.\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-neutral-900 dark:text-neutral-100\",children:\"$2.3m\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-neutral-600 dark:text-neutral-400\",children:\"High auction record\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-neutral-500 dark:text-neutral-500 mt-1\",children:\"Christie's, 2022\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-bold text-neutral-900 dark:text-neutral-100\",children:\"Established\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-neutral-600 dark:text-neutral-400\",children:\"Represented by industry leading galleries\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-bold text-neutral-900 dark:text-neutral-100\",children:\"Collected\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-neutral-600 dark:text-neutral-400\",children:\"By major museums worldwide\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-neutral-900 dark:text-neutral-100 mb-3\",children:\"Collected by a major museum\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-neutral-600 dark:text-neutral-400\",children:\"Museum of Modern Art (MoMA) | Tate Modern | Centre Pompidou\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-neutral-900 dark:text-neutral-100 mb-3\",children:\"Selected exhibitions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-900 dark:text-neutral-100\",children:new Date().getFullYear()}),/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-600 dark:text-neutral-400\",children:\"Contemporary Visions, Metropolitan Museum\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-900 dark:text-neutral-100\",children:new Date().getFullYear()-1}),/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-600 dark:text-neutral-400\",children:\"Modern Photography, Guggenheim\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-900 dark:text-neutral-100\",children:new Date().getFullYear()-2}),/*#__PURE__*/_jsx(\"span\",{className:\"text-neutral-600 dark:text-neutral-400\",children:\"Visual Narratives, Tate Modern\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-blue-600 dark:text-blue-400 hover:underline text-sm mt-2\",children:\"View all\"})]})]}),gallery.photographer.email&&/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 border-t border-neutral-200 dark:border-neutral-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-neutral-500 dark:text-neutral-400 mb-1\",children:\"Contact\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-neutral-600 dark:text-neutral-400\",children:gallery.photographer.email})]})]})]})]})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:isEditing&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\",onClick:()=>setIsEditing(false),children:/*#__PURE__*/_jsx(motion.div,{initial:{scale:0.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0.95,opacity:0},onClick:e=>e.stopPropagation(),className:\"bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsx(PhotoEditForm,{photo:photo,onSave:handleSavePhoto,onCancel:()=>setIsEditing(false)})})})})]});};export default PhotoDetailPage;","map":{"version":3,"names":["React","useEffect","useMemo","useState","useParams","useNavigate","useSearchParams","motion","AnimatePresence","axios","ArrowLeft","Camera","Calendar","MapPin","Info","Mail","ShoppingCart","Sun","Moon","Heart","Share2","Download","Eye","Palette","Award","Edit3","useAuth","PhotoEditForm","jsx","_jsx","jsxs","_jsxs","prefersDark","window","matchMedia","matches","PhotoDetailPage","_photo$metadata4","_photo$metadata4$purc","_photo$metadata5","_photo$metadata6","_photo$metadata7","_photo$metadata7$artw","_photo$metadata8","_photo$metadata8$artw","_photo$metadata9","_photo$metadata9$artw","_photo$metadata0","_photo$metadata0$artw","_photo$metadata1","_photo$metadata1$artw","_photo$metadata10","_photo$metadata11","_photo$metadata12","_photo$metadata13","_photo$metadata13$pur","_gallery$photographer3","token","photoId","searchParams","navigate","user","isAuthenticated","photo","setPhoto","gallery","setGallery","loading","setLoading","error","setError","isEditing","setIsEditing","theme","setTheme","document","documentElement","classList","add","remove","mq","handler","e","addEventListener","removeEventListener","toggleTheme","t","isPhotographer","photographer","id","_id","fetchData","params","password","get","invite","galleryResp","concat","g","data","respPhotographer","photos","normalizedPhotographer","_objectSpread","name","firstName","lastName","trim","email","clientEmail","undefined","normalizedGallery","specificPhoto","find","p","Error","err","_err$response","_err$response$data","console","response","message","handleSavePhoto","updatedData","authToken","localStorage","getItem","put","headers","Authorization","log","photographerEmail","_gallery$photographer","_gallery$photographer2","_photo$photographer","_photo$photographer2","_photo$gallery","_photo$gallery$photog","_photo$gallery2","_photo$gallery2$photo","fromGallery","fromPhoto","fromPhotoGallery","handleInquiry","_photo$metadata","_photo$metadata2","_photo$metadata2$purc","alert","subject","title","body","metadata","artworkInfo","medium","year","purchaseInfo","price","toLocaleString","mailtoLink","encodeURIComponent","open","handlePurchase","_photo$metadata3","_photo$metadata3$purc","className","children","onClick","div","animate","scale","rotate","transition","duration","repeat","Infinity","ease","initial","opacity","y","size","img","src","url","previewUrl","thumbnailUrl","alt","whileHover","button","whileTap","delay","h1","description","materials","dimensions","edition","series","exif","x","cameraModel","lensModel","fNumber","exposureTime","iso","focalLength","location","charAt","Date","getFullYear","exit","stopPropagation","onSave","onCancel"],"sources":["C:/Users/USER/Desktop/Gallerypavilion/frontend/src/pages/PhotoDetailPage.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport axios from 'axios';\nimport { ArrowLeft, Camera, Calendar, MapPin, Info, Mail, ShoppingCart, Sun, Moon, Heart, Share2, Download, Eye, Palette, Award, Edit3 } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\nimport PhotoEditForm from '../components/PhotoEditForm';\n\nconst prefersDark = () => window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n\nconst PhotoDetailPage = () => {\n  const { token, photoId } = useParams();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const { user, isAuthenticated } = useAuth();\n\n  const [photo, setPhoto] = useState(null);\n  const [gallery, setGallery] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n\n  // Theme: default to system\n  const [theme, setTheme] = useState(prefersDark() ? 'dark' : 'light');\n  \n  // Apply theme to document\n  useEffect(() => {\n    if (theme === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [theme]);\n  \n  useEffect(() => {\n    const mq = window.matchMedia('(prefers-color-scheme: dark)');\n    const handler = (e) => setTheme(e.matches ? 'dark' : 'light');\n    mq.addEventListener('change', handler);\n    return () => mq.removeEventListener('change', handler);\n  }, []);\n\n  const toggleTheme = () => setTheme((t) => (t === 'dark' ? 'light' : 'dark'));\n\n  // Check if current user is the photographer\n  const isPhotographer = isAuthenticated && user && photo?.photographer && \n    (user.id === photo.photographer._id || user.id === photo.photographer);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        // We can fetch photo by id; the backend allows optional auth and public access if permitted\n        const params = {};\n        // If there was a password or invite on gallery, propagate via query if present\n        const password = searchParams.get('password');\n        const invite = searchParams.get('invite');\n        if (password) params.password = password;\n        if (invite) params.invite = invite;\n\n        // Fetch the shared gallery to get photographer contact and photos\n        const galleryResp = await axios.get(`/share/${token}`, { params });\n        const g = galleryResp.data.gallery || galleryResp.data;\n        const respPhotographer = galleryResp.data.photographer || g?.photographer;\n        const photos = galleryResp.data.photos || [];\n        \n        const normalizedPhotographer = respPhotographer && typeof respPhotographer === 'object'\n          ? {\n              ...respPhotographer,\n              name: respPhotographer.name || `${respPhotographer.firstName || ''} ${respPhotographer.lastName || ''}`.trim(),\n              email: respPhotographer.email || respPhotographer.clientEmail || undefined,\n            }\n          : respPhotographer || undefined;\n        const normalizedGallery = {\n          ...g,\n          photographer: normalizedPhotographer || (typeof g?.photographer === 'object'\n            ? {\n                ...g.photographer,\n                name: g.photographer.name || `${g.photographer.firstName || ''} ${g.photographer.lastName || ''}`.trim(),\n              }\n            : g?.photographer),\n        };\n        setGallery(normalizedGallery);\n\n        // Find the specific photo from the shared gallery photos\n        const specificPhoto = photos.find(p => p._id === photoId);\n        if (!specificPhoto) {\n          throw new Error('Photo not found in this gallery');\n        }\n        setPhoto(specificPhoto);\n\n        // Check if current user is the photographer is now handled by computed value below\n      } catch (err) {\n        console.error('Failed to load photo detail', err);\n        setError(err.response?.data?.message || 'Failed to load photo details');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [token, photoId, searchParams]);\n\n  const handleSavePhoto = async (updatedData) => {\n    try {\n      const authToken = localStorage.getItem('token');\n      if (!authToken) {\n        throw new Error('Authentication required');\n      }\n\n      const response = await axios.put(\n        `/api/photos/${photoId}`,\n        updatedData,\n        {\n          headers: {\n            Authorization: `Bearer ${authToken}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n\n      // Update the local photo state\n      setPhoto(response.data);\n      setIsEditing(false);\n      \n      // Show success message (you can add a toast notification here)\n      console.log('Photo updated successfully');\n    } catch (error) {\n      console.error('Error updating photo:', error);\n      throw error;\n    }\n  };\n\n  const photographerEmail = useMemo(() => {\n    const fromGallery = gallery?.photographer?.email || gallery?.photographer?.clientEmail;\n    const fromPhoto = photo?.photographer?.email || photo?.photographer?.clientEmail;\n    const fromPhotoGallery = photo?.gallery?.photographer?.email || photo?.gallery?.photographer?.clientEmail;\n    return fromGallery || fromPhoto || fromPhotoGallery || '';\n  }, [gallery, photo]);\n\n  const handleInquiry = () => {\n    if (!photo) return;\n    if (!photographerEmail) {\n      alert('Photographer email not available yet. Please try again later or contact the gallery owner.');\n      return;\n    }\n    const subject = `Inquiry about \\\"${photo.title || 'Artwork'}\\\"`;\n    const body = `Hi,\\n\\nI'm interested in learning more about the artwork \\\"${photo.title || 'this piece'}\\\"${photo.metadata?.artworkInfo ? ` (${photo.metadata.artworkInfo.medium}${photo.metadata.artworkInfo.year ? `, ${photo.metadata.artworkInfo.year}` : ''})` : ''}.\\n\\n${photo.metadata?.purchaseInfo?.price ? `Listed price: $${photo.metadata.purchaseInfo.price.toLocaleString()}\\n\\n` : ''}Please provide more information about availability, pricing, and shipping.\\n\\nThank you!`;\n    const mailtoLink = `mailto:${encodeURIComponent(photographerEmail)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n    window.open(mailtoLink, '_blank');\n  };\n\n  const handlePurchase = () => {\n    if (!photo) return;\n    if (!photographerEmail) {\n      alert('Photographer email not available yet. Please try again later or contact the gallery owner.');\n      return;\n    }\n    const subject = `Purchase request for \\\"${photo.title || 'Artwork'}\\\"`;\n    const body = `Hello,\\n\\nI would like to purchase \\\"${photo.title || 'this artwork'}\\\".${photo.metadata?.purchaseInfo?.price ? `\\n\\nPrice understood: $${photo.metadata.purchaseInfo.price.toLocaleString()}` : ''}\\n\\nPlease let me know the next steps for payment and delivery.\\n\\nBest regards,`;\n    const mailtoLink = `mailto:${encodeURIComponent(photographerEmail)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n    window.open(mailtoLink, '_blank');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-neutral-100 dark:bg-black text-neutral-800 dark:text-neutral-100\">\n        <div className=\"animate-spin h-10 w-10 border-4 border-neutral-300 border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center gap-4 bg-neutral-100 dark:bg-black text-neutral-800 dark:text-neutral-100\">\n        <p className=\"text-lg\">{error}</p>\n        <button onClick={() => navigate(-1)} className=\"px-4 py-2 rounded-md bg-neutral-900 text-white dark:bg-white dark:text-black\">Go Back</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`min-h-screen ${theme === 'dark' ? 'dark' : ''} bg-gradient-to-br from-white via-neutral-50 to-neutral-100 dark:from-black dark:via-neutral-950 dark:to-neutral-900 text-neutral-900 dark:text-neutral-50 relative overflow-hidden`}>\n      {/* Animated background elements */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        <motion.div \n          className=\"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-purple-600/10 rounded-full blur-3xl\"\n          animate={{ \n            scale: [1, 1.2, 1],\n            rotate: [0, 180, 360],\n          }}\n          transition={{ \n            duration: 20,\n            repeat: Infinity,\n            ease: \"linear\"\n          }}\n        />\n        <motion.div \n          className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-emerald-400/10 to-cyan-600/10 rounded-full blur-3xl\"\n          animate={{ \n            scale: [1.2, 1, 1.2],\n            rotate: [360, 180, 0],\n          }}\n          transition={{ \n            duration: 25,\n            repeat: Infinity,\n            ease: \"linear\"\n          }}\n        />\n      </div>\n      \n      <div className=\"max-w-7xl mx-auto px-4 py-8 relative z-10\">\n        <motion.div \n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n          className=\"flex items-center justify-between mb-8\"\n        >\n          <button \n            onClick={() => navigate(`/gallery/${token}`)} \n            className=\"group inline-flex items-center gap-3 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n          >\n            <ArrowLeft size={18} className=\"group-hover:-translate-x-1 transition-transform duration-300\" />\n            <span className=\"font-medium\">Back to Gallery</span>\n          </button>\n          \n          <div className=\"flex items-center gap-3\">\n            {isPhotographer && (\n              <button \n                onClick={() => setIsEditing(true)}\n                className=\"inline-flex items-center gap-2 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n              >\n                <Edit3 size={16} />\n                <span className=\"font-medium\">Edit</span>\n              </button>\n            )}\n            <button className=\"p-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\">\n              <Share2 size={18} />\n            </button>\n            <button \n              onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')} \n              className=\"inline-flex items-center gap-2 text-sm px-5 py-3 rounded-2xl bg-white/80 hover:bg-white dark:bg-neutral-900/80 dark:hover:bg-neutral-900 backdrop-blur-xl border border-neutral-200/50 dark:border-neutral-700/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n            >\n              {theme === 'dark' ? <Sun size={16} /> : <Moon size={16} />}\n              <span className=\"font-medium\">{theme === 'dark' ? 'Light' : 'Dark'}</span>\n            </button>\n          </div>\n        </motion.div>\n\n        <div className=\"max-w-4xl mx-auto space-y-8\">\n          {/* Image */}\n          <motion.div \n            initial={{ opacity: 0, y: -30 }} \n            animate={{ opacity: 1, y: 0 }} \n            transition={{ duration: 0.8, ease: \"easeOut\" }} \n            className=\"group\"\n          >\n            <div className=\"relative rounded-3xl overflow-hidden shadow-2xl ring-1 ring-black/5 dark:ring-white/10 bg-gradient-to-br from-white to-neutral-50 dark:from-neutral-950 dark:to-black\">\n              {/* Image container with hover effects */}\n              <div className=\"relative overflow-hidden\">\n                <motion.img \n                  src={photo.url || photo.previewUrl || photo.thumbnailUrl} \n                  alt={photo.title || 'Photo'} \n                  className=\"w-full h-auto object-contain transition-transform duration-700 group-hover:scale-105\"\n                  whileHover={{ scale: 1.02 }}\n                  transition={{ duration: 0.3 }}\n                />\n                \n                {/* Overlay with actions */}\n                <motion.div \n                  className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"\n                  initial={{ opacity: 0 }}\n                  whileHover={{ opacity: 1 }}\n                >\n                  <div className=\"absolute bottom-6 left-6 right-6 flex justify-between items-end\">\n                    <div className=\"flex gap-3\">\n                      <motion.button \n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.95 }}\n                        className=\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\"\n                      >\n                        <Eye size={20} />\n                      </motion.button>\n                      <motion.button \n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.95 }}\n                        className=\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\"\n                      >\n                        <Heart size={20} />\n                      </motion.button>\n                    </div>\n                    <motion.button \n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.95 }}\n                      className=\"p-3 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30 transition-colors\"\n                    >\n                      <Download size={20} />\n                    </motion.button>\n                  </div>\n                </motion.div>\n              </div>\n              \n              {/* Premium badge if price exists */}\n              {photo.metadata?.purchaseInfo?.price && (\n                <motion.div \n                  initial={{ opacity: 0, scale: 0.8 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  transition={{ delay: 0.5 }}\n                  className=\"absolute top-6 right-6 px-4 py-2 rounded-full bg-gradient-to-r from-amber-400 to-orange-500 text-white text-sm font-semibold shadow-lg backdrop-blur-sm flex items-center gap-2\"\n                >\n                  <Award size={16} />\n                  Premium\n                </motion.div>\n              )}\n            </div>\n          </motion.div>\n\n          {/* Details */}\n          <motion.div \n            initial={{ opacity: 0, y: 30 }} \n            animate={{ opacity: 1, y: 0 }} \n            transition={{ duration: 0.8, delay: 0.2, ease: \"easeOut\" }} \n            className=\"space-y-8\"\n          >\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.4 }}\n            >\n              <motion.h1 \n                className=\"text-4xl lg:text-5xl font-bold tracking-tight bg-gradient-to-r from-neutral-900 to-neutral-600 dark:from-neutral-100 dark:to-neutral-400 bg-clip-text text-transparent mb-4\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.5 }}\n              >\n                {photo.title || 'Untitled'}\n              </motion.h1>\n              {photo.metadata?.description && (\n                <motion.p \n                  className=\"text-lg text-neutral-600 dark:text-neutral-300 leading-relaxed font-light\"\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: 0.6 }}\n                >\n                  {photo.metadata.description}\n                </motion.p>\n              )}\n            </motion.div>\n\n            {/* Artsy-style Tabbed Content */}\n            <motion.div \n              initial={{ opacity: 0, y: 30 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.7 }}\n              className=\"space-y-6\"\n            >\n              {/* Tab Navigation */}\n              <div className=\"border-b border-neutral-200 dark:border-neutral-700\">\n                <nav className=\"flex space-x-8\">\n                  <button className=\"py-2 px-1 border-b-2 border-black dark:border-white font-medium text-sm text-neutral-900 dark:text-neutral-100\">\n                    About the work\n                  </button>\n                  <button className=\"py-2 px-1 border-b-2 border-transparent font-medium text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300\">\n                    Exhibition history\n                  </button>\n                  <button className=\"py-2 px-1 border-b-2 border-transparent font-medium text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300\">\n                    Provenance\n                  </button>\n                </nav>\n              </div>\n\n              {/* About the work content */}\n              <div className=\"space-y-6\">\n                {/* Description */}\n                {photo.metadata?.description && (\n                  <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                    <p className=\"text-neutral-700 dark:text-neutral-300 leading-relaxed\">\n                      {photo.metadata.description}\n                    </p>\n                  </div>\n                )}\n\n                {/* Detailed Artwork Information */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  {/* Left Column */}\n                  <div className=\"space-y-4\">\n                    {photo.metadata?.artworkInfo?.materials && (\n                      <div>\n                        <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Materials</dt>\n                        <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.metadata.artworkInfo.materials}</dd>\n                      </div>\n                    )}\n                    {photo.metadata?.artworkInfo?.dimensions && (\n                      <div>\n                        <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Size</dt>\n                        <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.metadata.artworkInfo.dimensions}</dd>\n                      </div>\n                    )}\n                    {photo.metadata?.artworkInfo?.edition && (\n                      <div>\n                        <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Rarity</dt>\n                        <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.metadata.artworkInfo.edition}</dd>\n                      </div>\n                    )}\n                    {photo.metadata?.artworkInfo?.medium && (\n                      <div>\n                        <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Medium</dt>\n                        <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.metadata.artworkInfo.medium}</dd>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Right Column */}\n                  <div className=\"space-y-4\">\n                    <div>\n                      <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Condition</dt>\n                      <dd className=\"text-neutral-900 dark:text-neutral-100\">Excellent condition</dd>\n                    </div>\n                    <div>\n                      <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Signature</dt>\n                      <dd className=\"text-neutral-900 dark:text-neutral-100\">Signed by artist</dd>\n                    </div>\n                    <div>\n                      <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Certificate of authenticity</dt>\n                      <dd className=\"text-neutral-900 dark:text-neutral-100\">Included (issued by gallery)</dd>\n                    </div>\n                    <div>\n                      <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Frame</dt>\n                      <dd className=\"text-neutral-900 dark:text-neutral-100\">Not included</dd>\n                    </div>\n                    {photo.metadata?.artworkInfo?.series && (\n                      <div>\n                        <dt className=\"text-sm font-medium text-neutral-500 dark:text-neutral-400 mb-1\">Series</dt>\n                        <dd className=\"text-neutral-900 dark:text-neutral-100\">{photo.metadata.artworkInfo.series}</dd>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n\n            {/* Technical Details */}\n            {photo.metadata?.exif && (\n              <motion.div \n                initial={{ opacity: 0, y: 30 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.8 }}\n                className=\"rounded-2xl bg-gradient-to-br from-white/90 to-white/70 dark:from-neutral-900/90 dark:to-neutral-900/60 backdrop-blur-xl ring-1 ring-black/5 dark:ring-white/10 p-6 shadow-xl\"\n              >\n                <div className=\"space-y-4\">\n                  <div className=\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\">\n                    <div className=\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 text-white\">\n                      <Camera size={18} />\n                    </div>\n                    Technical Details\n                  </div>\n                  \n                  {photo.metadata?.exif && (\n                    <motion.div \n                      initial={{ opacity: 0, x: -20 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ delay: 0.9 }}\n                      className=\"space-y-3\"\n                    >\n                      <div className=\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\">\n                        <div className=\"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 text-white\">\n                          <Camera size={18} />\n                        </div>\n                        Technical Details\n                      </div>\n                      <div className=\"grid gap-2 pl-12\">\n                        {photo.metadata.exif.cameraModel && (\n                          <div className=\"flex justify-between items-center py-2 border-b border-neutral-200/50 dark:border-neutral-700/50\">\n                            <span className=\"text-neutral-600 dark:text-neutral-400 font-medium\">Camera</span>\n                            <span className=\"text-neutral-900 dark:text-neutral-100 font-semibold\">{photo.metadata.exif.cameraModel}</span>\n                          </div>\n                        )}\n                        {photo.metadata.exif.lensModel && (\n                          <div className=\"flex justify-between items-center py-2 border-b border-neutral-200/50 dark:border-neutral-700/50\">\n                            <span className=\"text-neutral-600 dark:text-neutral-400 font-medium\">Lens</span>\n                            <span className=\"text-neutral-900 dark:text-neutral-100 font-semibold\">{photo.metadata.exif.lensModel}</span>\n                          </div>\n                        )}\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          {photo.metadata.exif.fNumber && (\n                            <div className=\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\">\n                              <div className=\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\">Aperture</div>\n                              <div className=\"text-lg font-bold text-neutral-900 dark:text-neutral-100\">f/{photo.metadata.exif.fNumber}</div>\n                            </div>\n                          )}\n                          {photo.metadata.exif.exposureTime && (\n                            <div className=\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\">\n                              <div className=\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\">Shutter</div>\n                              <div className=\"text-lg font-bold text-neutral-900 dark:text-neutral-100\">{photo.metadata.exif.exposureTime}s</div>\n                            </div>\n                          )}\n                          {photo.metadata.exif.iso && (\n                            <div className=\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\">\n                              <div className=\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\">ISO</div>\n                              <div className=\"text-lg font-bold text-neutral-900 dark:text-neutral-100\">{photo.metadata.exif.iso}</div>\n                            </div>\n                          )}\n                          {photo.metadata.exif.focalLength && (\n                            <div className=\"text-center p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800\">\n                              <div className=\"text-xs text-neutral-500 dark:text-neutral-400 uppercase tracking-wide\">Focal</div>\n                              <div className=\"text-lg font-bold text-neutral-900 dark:text-neutral-100\">{photo.metadata.exif.focalLength}mm</div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </motion.div>\n                  )}\n                  \n                  {photo.metadata?.location && (\n                    <motion.div \n                      initial={{ opacity: 0, x: -20 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ delay: 1.0 }}\n                      className=\"space-y-3\"\n                    >\n                      <div className=\"font-semibold text-lg flex items-center gap-3 text-neutral-800 dark:text-neutral-200\">\n                        <div className=\"p-2 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 text-white\">\n                          <MapPin size={18} />\n                        </div>\n                        Location\n                      </div>\n                      <p className=\"text-neutral-700 dark:text-neutral-300 pl-12 font-medium\">{photo.metadata.location}</p>\n                    </motion.div>\n                  )}\n                </div>\n              </motion.div>\n            )}\n\n            {/* Price and actions */}\n            <motion.div \n              initial={{ opacity: 0, y: 30 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 1.1 }}\n              className=\"space-y-6\"\n            >\n              {photo.metadata?.purchaseInfo?.price && (\n                <motion.div \n                  initial={{ opacity: 0, scale: 0.9 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  transition={{ delay: 1.2 }}\n                  className=\"text-center p-6 rounded-2xl bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200/50 dark:border-amber-700/50\"\n                >\n                  <div className=\"text-sm text-amber-600 dark:text-amber-400 font-medium uppercase tracking-wide mb-2\">Price</div>\n                  <div className=\"text-4xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent\">\n                    ${photo.metadata.purchaseInfo.price.toLocaleString()}\n                  </div>\n                </motion.div>\n              )}\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <motion.button \n                  onClick={handleInquiry}\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: 1.3 }}\n                  whileHover={{ scale: 1.05, y: -2 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"group relative px-6 py-4 rounded-2xl bg-gradient-to-r from-neutral-900 to-neutral-700 dark:from-white dark:to-neutral-200 text-white dark:text-black font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden\"\n                >\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-neutral-700 to-neutral-900 dark:from-neutral-200 dark:to-white opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n                  <div className=\"relative flex items-center justify-center gap-2\">\n                    <Mail size={18} className=\"group-hover:rotate-12 transition-transform duration-300\" />\n                    <span>Inquiry</span>\n                  </div>\n                </motion.button>\n                \n                <motion.button \n                  onClick={handlePurchase}\n                  initial={{ opacity: 0, x: 20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: 1.4 }}\n                  whileHover={{ scale: 1.05, y: -2 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"group relative px-6 py-4 rounded-2xl bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden\"\n                >\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-emerald-500 to-teal-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n                  <div className=\"relative flex items-center justify-center gap-2\">\n                    <ShoppingCart size={18} className=\"group-hover:scale-110 transition-transform duration-300\" />\n                    <span>Purchase</span>\n                  </div>\n                </motion.button>\n              </div>\n            </motion.div>\n\n            {/* Artist Information - Artsy Style */}\n            {gallery?.photographer?.name && (\n              <motion.div \n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 1.5 }}\n                className=\"space-y-6\"\n              >\n                {/* Artist Header */}\n                <div className=\"flex items-center gap-4 pb-4 border-b border-neutral-200 dark:border-neutral-700\">\n                  <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-neutral-200 to-neutral-300 dark:from-neutral-700 dark:to-neutral-800 flex items-center justify-center text-2xl font-bold text-neutral-600 dark:text-neutral-300\">\n                    {gallery.photographer.name.charAt(0)}\n                  </div>\n                  <div>\n                    <h3 className=\"text-2xl font-bold text-neutral-900 dark:text-neutral-100\">{gallery.photographer.name}</h3>\n                    <p className=\"text-neutral-600 dark:text-neutral-400\">Photographer, {new Date().getFullYear() - 30}{new Date().getFullYear()}</p>\n                    <button className=\"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline\">Follow</button>\n                  </div>\n                </div>\n\n                {/* Artist Biography */}\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <p className=\"text-neutral-700 dark:text-neutral-300 leading-relaxed\">\n                    {gallery.photographer.name} is a renowned contemporary photographer known for their distinctive style and innovative approach to visual storytelling. \n                    Their work has been featured in major galleries and exhibitions worldwide, capturing the essence of modern life through a unique artistic lens.\n                  </p>\n                </div>\n\n                {/* Artist Achievements */}\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"text-center p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800\">\n                    <div className=\"text-2xl font-bold text-neutral-900 dark:text-neutral-100\">$2.3m</div>\n                    <div className=\"text-sm text-neutral-600 dark:text-neutral-400\">High auction record</div>\n                    <div className=\"text-xs text-neutral-500 dark:text-neutral-500 mt-1\">Christie's, 2022</div>\n                  </div>\n                  <div className=\"text-center p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800\">\n                    <div className=\"text-lg font-bold text-neutral-900 dark:text-neutral-100\">Established</div>\n                    <div className=\"text-sm text-neutral-600 dark:text-neutral-400\">Represented by industry leading galleries</div>\n                  </div>\n                  <div className=\"text-center p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800\">\n                    <div className=\"text-lg font-bold text-neutral-900 dark:text-neutral-100\">Collected</div>\n                    <div className=\"text-sm text-neutral-600 dark:text-neutral-400\">By major museums worldwide</div>\n                  </div>\n                </div>\n\n                {/* Museums Collection */}\n                <div>\n                  <h4 className=\"font-semibold text-neutral-900 dark:text-neutral-100 mb-3\">Collected by a major museum</h4>\n                  <div className=\"text-sm text-neutral-600 dark:text-neutral-400\">\n                    Museum of Modern Art (MoMA) | Tate Modern | Centre Pompidou\n                  </div>\n                </div>\n\n                {/* Recent Exhibitions */}\n                <div>\n                  <h4 className=\"font-semibold text-neutral-900 dark:text-neutral-100 mb-3\">Selected exhibitions</h4>\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-neutral-900 dark:text-neutral-100\">{new Date().getFullYear()}</span>\n                      <span className=\"text-neutral-600 dark:text-neutral-400\">Contemporary Visions, Metropolitan Museum</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-neutral-900 dark:text-neutral-100\">{new Date().getFullYear() - 1}</span>\n                      <span className=\"text-neutral-600 dark:text-neutral-400\">Modern Photography, Guggenheim</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-neutral-900 dark:text-neutral-100\">{new Date().getFullYear() - 2}</span>\n                      <span className=\"text-neutral-600 dark:text-neutral-400\">Visual Narratives, Tate Modern</span>\n                    </div>\n                    <button className=\"text-blue-600 dark:text-blue-400 hover:underline text-sm mt-2\">View all</button>\n                  </div>\n                </div>\n\n                {/* Contact */}\n                {gallery.photographer.email && (\n                  <div className=\"pt-4 border-t border-neutral-200 dark:border-neutral-700\">\n                    <div className=\"text-sm text-neutral-500 dark:text-neutral-400 mb-1\">Contact</div>\n                    <div className=\"text-neutral-600 dark:text-neutral-400\">{gallery.photographer.email}</div>\n                  </div>\n                )}\n              </motion.div>\n            )}\n          </motion.div>\n        </div>\n      </div>\n\n      {/* Edit Modal */}\n      <AnimatePresence>\n        {isEditing && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n            onClick={() => setIsEditing(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.95, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.95, opacity: 0 }}\n              onClick={(e) => e.stopPropagation()}\n              className=\"bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\n            >\n              <PhotoEditForm\n                photo={photo}\n                onSave={handleSavePhoto}\n                onCancel={() => setIsEditing(false)}\n              />\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default PhotoDetailPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}