{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/Desktop/Gallerypavilion/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useParams,Link,useSearchParams}from'react-router-dom';import{motion}from'framer-motion';import{useAuth}from'../contexts/AuthContext';import axios from'axios';import{ArrowLeftIcon,PhotoIcon,CloudArrowUpIcon,XMarkIcon,Cog6ToothIcon,PencilIcon,EyeIcon,TrashIcon,AdjustmentsHorizontalIcon,ShareIcon,UserGroupIcon,UserIcon}from'@heroicons/react/24/outline';import{toast}from'react-hot-toast';import ShareLinkForm from'../components/ShareLinkForm';import ShareLinksList from'../components/ShareLinksList';import InviteManager from'../components/InviteManager';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GalleryPage=()=>{var _photoMetadata$artwor1,_photoMetadata$artwor10,_photoMetadata$artwor11,_photoMetadata$artwor12,_photoMetadata$artwor13,_photoMetadata$artwor14,_photoMetadata$artwor15,_photoMetadata$artwor16,_photoMetadata$artwor17,_photoMetadata$artwor18,_photoMetadata$artist2;const{id}=useParams();const{isAuthenticated}=useAuth();const[searchParams]=useSearchParams();const[activeTab,setActiveTab]=useState(searchParams.get('tab')||'edit');const[gallery,setGallery]=useState(null);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[uploading,setUploading]=useState(false);const[photos,setPhotos]=useState([]);const[formData,setFormData]=useState({title:'',description:'',category:'',collections:[],photographerBio:'',settings:{allowDownload:false,showMetadata:true,enableComments:false,watermarkIntensity:0.3,requirePassword:false,password:'',inviteOnly:false,sortOrder:'newest'},isPublished:false});const[errors,setErrors]=useState({});const[newCollection,setNewCollection]=useState('');const[coverImage,setCoverImage]=useState(null);const[coverImagePreview,setCoverImagePreview]=useState(null);const[shareLinks,setShareLinks]=useState([]);const[loadingShares,setLoadingShares]=useState(false);// Photo metadata editing\nconst[editingPhoto,setEditingPhoto]=useState(null);const[photoMetadata,setPhotoMetadata]=useState({title:'',description:'',tags:[],artworkInfo:{year:'',series:'',edition:'',size:'',materials:''},artwork:{medium:'',condition:'Excellent',rarity:'Common',signature:'',provenance:''},artist:{biography:''},purchaseInfo:{price:'',priceOnRequest:false,availability:'available',shippingInfo:'',returnPolicy:''},context:{artistStatement:'',exhibitionHistory:''}});const categories=['Portrait','Wedding','Landscape','Wildlife','Street','Fashion','Commercial','Fine Art','Event','Documentary'];const fetchGallery=useCallback(async()=>{try{var _galleryData$settings,_galleryData$settings2,_galleryData$settings3,_galleryData$settings4,_galleryData$settings5,_galleryData$settings6,_galleryData$settings7,_galleryData$settings8;setLoading(true);const response=await axios.get(\"/galleries/\".concat(id));const galleryData=response.data;setGallery(galleryData);// Normalize watermarkIntensity for UI slider if backend returns enum\nconst rawIntensity=(_galleryData$settings=galleryData.settings)===null||_galleryData$settings===void 0?void 0:_galleryData$settings.watermarkIntensity;let intensityNumber;if(typeof rawIntensity==='number'){intensityNumber=rawIntensity;}else if(typeof rawIntensity==='string'){if(['light','medium','heavy'].includes(rawIntensity)){intensityNumber=rawIntensity==='light'?0.2:rawIntensity==='medium'?0.5:0.85;}else{const num=parseFloat(rawIntensity);intensityNumber=Number.isFinite(num)?num:0.3;}}else{intensityNumber=0.3;}// Populate form data\nsetFormData({title:galleryData.title||'',description:galleryData.description||'',category:galleryData.category||'',collections:galleryData.collections||[],photographerBio:galleryData.photographerBio||'',settings:{allowDownload:((_galleryData$settings2=galleryData.settings)===null||_galleryData$settings2===void 0?void 0:_galleryData$settings2.allowDownload)||false,showMetadata:((_galleryData$settings3=galleryData.settings)===null||_galleryData$settings3===void 0?void 0:_galleryData$settings3.showMetadata)||true,enableComments:((_galleryData$settings4=galleryData.settings)===null||_galleryData$settings4===void 0?void 0:_galleryData$settings4.enableComments)||false,watermarkIntensity:intensityNumber,requirePassword:((_galleryData$settings5=galleryData.settings)===null||_galleryData$settings5===void 0?void 0:_galleryData$settings5.requirePassword)||false,password:((_galleryData$settings6=galleryData.settings)===null||_galleryData$settings6===void 0?void 0:_galleryData$settings6.password)||'',inviteOnly:((_galleryData$settings7=galleryData.settings)===null||_galleryData$settings7===void 0?void 0:_galleryData$settings7.inviteOnly)||false,sortOrder:((_galleryData$settings8=galleryData.settings)===null||_galleryData$settings8===void 0?void 0:_galleryData$settings8.sortOrder)||'newest'},isPublished:galleryData.isPublished||false});if(galleryData.coverImage){setCoverImagePreview(galleryData.coverImage.previewUrl||null);}}catch(error){console.error('Error fetching gallery:',error);toast.error('Failed to load gallery');}finally{setLoading(false);}},[id]);const fetchPhotos=useCallback(async()=>{try{const response=await axios.get(\"/galleries/\".concat(id,\"/photos\"));setPhotos(response.data.photos||[]);}catch(error){console.error('Error fetching photos:',error);}},[id]);// Fetch share links\nconst fetchShareLinks=useCallback(async()=>{try{setLoadingShares(true);const response=await axios.get(\"/galleries/\".concat(id,\"/shares\"));setShareLinks(response.data.shares||[]);}catch(error){console.error('Error fetching share links:',error);toast.error('Failed to fetch share links');}finally{setLoadingShares(false);}},[id]);// Create share link\nconst createShareLink=async shareData=>{try{const response=await axios.post(\"/galleries/\".concat(id,\"/shares\"),shareData);setShareLinks(prev=>[...prev,response.data.share]);toast.success('Share link created successfully');return response.data.share;}catch(error){var _error$response,_error$response$data;console.error('Error creating share link:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to create share link');throw error;}};// Delete share link\nconst deleteShareLink=async shareId=>{try{await axios.delete(\"/galleries/\".concat(id,\"/shares/\").concat(shareId));setShareLinks(prev=>prev.filter(share=>share._id!==shareId));toast.success('Share link deleted successfully');}catch(error){console.error('Error deleting share link:',error);toast.error('Failed to delete share link');}};// Fetch gallery data\nuseEffect(()=>{if(id){fetchGallery();fetchPhotos();fetchShareLinks();}},[id,fetchGallery,fetchPhotos,fetchShareLinks]);// Handle form input changes\nconst handleInputChange=e=>{const{name,value,type,checked}=e.target;if(name.startsWith('settings.')){const settingName=name.split('.')[1];setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{settings:_objectSpread(_objectSpread({},prev.settings),{},{[settingName]:type==='checkbox'?checked:settingName==='watermarkIntensity'?parseFloat(value):value})}));}else{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));}// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:null}));}};// Handle cover image upload\nconst handleCoverImageChange=e=>{const file=e.target.files[0];if(file){if(file.size>10*1024*1024){toast.error('Cover image must be less than 10MB');return;}if(!file.type.startsWith('image/')){toast.error('Please select a valid image file');return;}setCoverImage(file);// Create preview\nconst reader=new FileReader();reader.onload=e=>setCoverImagePreview(e.target.result);reader.readAsDataURL(file);}};// Remove cover image\nconst removeCoverImage=()=>{setCoverImage(null);setCoverImagePreview(null);};// Add collection\nconst addCollection=()=>{if(newCollection.trim()&&!formData.collections.includes(newCollection.trim())){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{collections:[...prev.collections,newCollection.trim()]}));setNewCollection('');}};// Remove collection\nconst removeCollection=index=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{collections:prev.collections.filter((_,i)=>i!==index)}));};// Validate form\nconst validateForm=()=>{const newErrors={};if(!formData.title.trim()){newErrors.title='Gallery title is required';}else if(formData.title.length>100){newErrors.title='Title cannot exceed 100 characters';}if(!formData.description.trim()){newErrors.description='Gallery description is required';}else if(formData.description.length>1000){newErrors.description='Description cannot exceed 1000 characters';}if(!formData.category){newErrors.category='Please select a category';}if(formData.settings.requirePassword&&!formData.settings.password.trim()){newErrors['settings.password']='Password is required when password protection is enabled';}setErrors(newErrors);return Object.keys(newErrors).length===0;};// Save gallery changes\nconst handleSave=async()=>{if(!validateForm()){toast.error('Please fix the errors in the form');return;}setSaving(true);try{const submitData=new FormData();// Prepare settings strictly matching backend schema\nconst rawSettings=_objectSpread({},formData.settings);const numericIntensity=typeof rawSettings.watermarkIntensity==='number'?rawSettings.watermarkIntensity:parseFloat(rawSettings.watermarkIntensity||0.5);const watermarkEnum=Number.isFinite(numericIntensity)?numericIntensity<=0.33?'light':numericIntensity<=0.66?'medium':'heavy':'medium';const settingsPayload={allowDownload:!!rawSettings.allowDownload,showMetadata:!!rawSettings.showMetadata,enableComments:!!rawSettings.enableComments,watermarkIntensity:watermarkEnum,sortOrder:['newest','oldest','custom'].includes(rawSettings.sortOrder)?rawSettings.sortOrder:'newest',inviteOnly:!!rawSettings.inviteOnly};const collectionsProcessed=(formData.collections||[]).map(c=>(c||'').toString().trim()).filter(Boolean);// Add gallery data\nObject.keys(formData).forEach(key=>{if(key==='settings'){submitData.append('settings',JSON.stringify(settingsPayload));}else if(key==='collections'){submitData.append('collections',JSON.stringify(collectionsProcessed));}else{submitData.append(key,formData[key]);}});// Add cover image if selected\nif(coverImage){submitData.append('coverImage',coverImage);}const response=await axios.put(\"/galleries/\".concat(id),submitData,{headers:{'Content-Type':'multipart/form-data'}});toast.success('Gallery updated successfully!');setGallery(response.data);}catch(error){var _error$response2,_error$response2$data,_error$response3,_error$response3$data;console.error('Error updating gallery:',error);const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to update gallery';toast.error(errorMessage);// Handle validation errors\nif((_error$response3=error.response)!==null&&_error$response3!==void 0&&(_error$response3$data=_error$response3.data)!==null&&_error$response3$data!==void 0&&_error$response3$data.errors){const validationErrors={};error.response.data.errors.forEach(err=>{validationErrors[err.path]=err.msg;});setErrors(validationErrors);}}finally{setSaving(false);}};// Upload photos\nconst handlePhotoUpload=async files=>{if(!files||files.length===0)return;setUploading(true);try{var _response$data$photos;const formData=new FormData();for(let i=0;i<files.length;i++){formData.append('photos',files[i]);}const response=await axios.post(\"/galleries/\".concat(id,\"/photos\"),formData,{headers:{'Content-Type':'multipart/form-data'}});toast.success(\"\".concat(((_response$data$photos=response.data.photos)===null||_response$data$photos===void 0?void 0:_response$data$photos.length)||0,\" photos uploaded successfully!\"));fetchPhotos();// Refresh photos list\n}catch(error){var _error$response4,_error$response4$data;console.error('Error uploading photos:',error);const errorMessage=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to upload photos';toast.error(errorMessage);}finally{setUploading(false);}};// Handle file input change\nconst handleFileInputChange=e=>{handlePhotoUpload(e.target.files);};// Drag and drop handlers\nconst[dragActive,setDragActive]=useState(false);const handleDrag=e=>{e.preventDefault();e.stopPropagation();if(e.type===\"dragenter\"||e.type===\"dragover\"){setDragActive(true);}else if(e.type===\"dragleave\"){setDragActive(false);}};const handleDrop=e=>{e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files[0]){const files=Array.from(e.dataTransfer.files).filter(file=>file.type.startsWith('image/'));if(files.length>0){handlePhotoUpload(files);}else{toast.error('Please drop only image files');}}};// Delete photo\nconst handleDeletePhoto=async photoId=>{if(!window.confirm('Are you sure you want to delete this photo?'))return;try{await axios.delete(\"/photos/\".concat(photoId));toast.success('Photo deleted successfully');fetchPhotos();// Refresh photos list\n}catch(error){console.error('Error deleting photo:',error);toast.error('Failed to delete photo');}};// Edit photo metadata\nconst handleEditPhoto=photo=>{var _photo$artwork,_photo$exif,_photo$artwork2,_photo$artwork3,_photo$artwork4,_photo$artwork5,_photo$artwork6,_photo$artwork9,_photo$artwork0,_photo$artist,_photo$artwork1,_photo$artwork10,_photo$artwork11,_photo$artwork12,_photo$artwork13,_photo$artwork14,_photo$artwork15,_photo$context;setEditingPhoto(photo);setPhotoMetadata({title:photo.title||'',description:photo.description||'',tags:photo.tags||[],artworkInfo:{year:(_photo$artwork=photo.artwork)!==null&&_photo$artwork!==void 0&&_photo$artwork.year||(_photo$exif=photo.exif)!==null&&_photo$exif!==void 0&&_photo$exif.dateTaken?new Date(photo.exif.dateTaken).getFullYear().toString():'',series:((_photo$artwork2=photo.artwork)===null||_photo$artwork2===void 0?void 0:_photo$artwork2.series)||'',edition:((_photo$artwork3=photo.artwork)===null||_photo$artwork3===void 0?void 0:_photo$artwork3.edition)||'',size:((_photo$artwork4=photo.artwork)===null||_photo$artwork4===void 0?void 0:_photo$artwork4.dimensions)||'',materials:((_photo$artwork5=photo.artwork)===null||_photo$artwork5===void 0?void 0:_photo$artwork5.materials)||''},artwork:{medium:((_photo$artwork6=photo.artwork)===null||_photo$artwork6===void 0?void 0:_photo$artwork6.medium)||'',condition:(_photo$artwork7=>{const condition=(_photo$artwork7=photo.artwork)===null||_photo$artwork7===void 0?void 0:_photo$artwork7.condition;if(condition==='excellent')return'Excellent';if(condition==='very-good'||condition==='very good')return'Very Good';if(condition==='good')return'Good';if(condition==='fair')return'Fair';if(condition==='poor')return'Poor';return condition||'Excellent';})(),rarity:(_photo$artwork8=>{const rarity=(_photo$artwork8=photo.artwork)===null||_photo$artwork8===void 0?void 0:_photo$artwork8.rarity;if(rarity==='unique')return'Unique';if(rarity==='rare')return'Rare';if(rarity==='scarce')return'Scarce';if(rarity==='common')return'Common';return rarity||'Common';})(),signature:((_photo$artwork9=photo.artwork)===null||_photo$artwork9===void 0?void 0:_photo$artwork9.signature)||'',provenance:((_photo$artwork0=photo.artwork)===null||_photo$artwork0===void 0?void 0:_photo$artwork0.provenance)||''},artist:{biography:((_photo$artist=photo.artist)===null||_photo$artist===void 0?void 0:_photo$artist.biography)||''},purchaseInfo:{price:((_photo$artwork1=photo.artwork)===null||_photo$artwork1===void 0?void 0:_photo$artwork1.price)||'',priceOnRequest:!((_photo$artwork10=photo.artwork)!==null&&_photo$artwork10!==void 0&&_photo$artwork10.price)&&!!((_photo$artwork11=photo.artwork)!==null&&_photo$artwork11!==void 0&&_photo$artwork11.isForSale),availability:(_photo$artwork12=photo.artwork)!==null&&_photo$artwork12!==void 0&&_photo$artwork12.isForSale?'available':'not_available',shippingInfo:((_photo$artwork13=photo.artwork)===null||_photo$artwork13===void 0?void 0:_photo$artwork13.shippingInfo)||'',returnPolicy:((_photo$artwork14=photo.artwork)===null||_photo$artwork14===void 0?void 0:_photo$artwork14.returnPolicy)||''},context:{artistStatement:((_photo$artwork15=photo.artwork)===null||_photo$artwork15===void 0?void 0:_photo$artwork15.context)||'',exhibitionHistory:((_photo$context=photo.context)===null||_photo$context===void 0?void 0:_photo$context.exhibitionHistory)||''}});};// Save photo metadata\nconst handleSavePhotoMetadata=async()=>{if(!editingPhoto){return;}try{var _photoMetadata$artwor,_photoMetadata$artwor2,_photoMetadata$artwor3,_photoMetadata$artwor4,_photoMetadata$artwor5,_photoMetadata$artwor6,_photoMetadata$artwor9,_photoMetadata$artwor0,_photoMetadata$purcha,_photoMetadata$purcha2,_photoMetadata$purcha3,_photoMetadata$contex,_photoMetadata$purcha4,_photoMetadata$purcha5,_photoMetadata$artist;// Transform frontend form data to backend Photo model structure\nconst updateData={title:photoMetadata.title,description:photoMetadata.description,tags:photoMetadata.tags,artwork:{year:(_photoMetadata$artwor=photoMetadata.artworkInfo)!==null&&_photoMetadata$artwor!==void 0&&_photoMetadata$artwor.year?parseInt(photoMetadata.artworkInfo.year):undefined,series:(_photoMetadata$artwor2=photoMetadata.artworkInfo)===null||_photoMetadata$artwor2===void 0?void 0:_photoMetadata$artwor2.series,edition:(_photoMetadata$artwor3=photoMetadata.artworkInfo)===null||_photoMetadata$artwor3===void 0?void 0:_photoMetadata$artwor3.edition,dimensions:(_photoMetadata$artwor4=photoMetadata.artworkInfo)===null||_photoMetadata$artwor4===void 0?void 0:_photoMetadata$artwor4.size,materials:(_photoMetadata$artwor5=photoMetadata.artworkInfo)===null||_photoMetadata$artwor5===void 0?void 0:_photoMetadata$artwor5.materials,medium:(_photoMetadata$artwor6=photoMetadata.artwork)===null||_photoMetadata$artwor6===void 0?void 0:_photoMetadata$artwor6.medium,condition:(_photoMetadata$artwor7=>{const condition=(_photoMetadata$artwor7=photoMetadata.artwork)===null||_photoMetadata$artwor7===void 0?void 0:_photoMetadata$artwor7.condition;if(condition==='Excellent')return'Excellent';if(condition==='Very Good')return'Very Good';if(condition==='Good')return'Good';if(condition==='Fair')return'Fair';if(condition==='Poor')return'Poor';return condition;})(),rarity:(_photoMetadata$artwor8=>{const rarity=(_photoMetadata$artwor8=photoMetadata.artwork)===null||_photoMetadata$artwor8===void 0?void 0:_photoMetadata$artwor8.rarity;if(rarity==='Unique')return'Unique';if(rarity==='Rare')return'Rare';if(rarity==='Scarce')return'Scarce';if(rarity==='Common')return'Common';return rarity;})(),signature:(_photoMetadata$artwor9=photoMetadata.artwork)===null||_photoMetadata$artwor9===void 0?void 0:_photoMetadata$artwor9.signature,provenance:(_photoMetadata$artwor0=photoMetadata.artwork)===null||_photoMetadata$artwor0===void 0?void 0:_photoMetadata$artwor0.provenance,price:(_photoMetadata$purcha=photoMetadata.purchaseInfo)!==null&&_photoMetadata$purcha!==void 0&&_photoMetadata$purcha.price?parseFloat(photoMetadata.purchaseInfo.price):undefined,isForSale:((_photoMetadata$purcha2=photoMetadata.purchaseInfo)===null||_photoMetadata$purcha2===void 0?void 0:_photoMetadata$purcha2.availability)==='available'||((_photoMetadata$purcha3=photoMetadata.purchaseInfo)===null||_photoMetadata$purcha3===void 0?void 0:_photoMetadata$purcha3.priceOnRequest),context:(_photoMetadata$contex=photoMetadata.context)===null||_photoMetadata$contex===void 0?void 0:_photoMetadata$contex.artistStatement,shippingInfo:(_photoMetadata$purcha4=photoMetadata.purchaseInfo)===null||_photoMetadata$purcha4===void 0?void 0:_photoMetadata$purcha4.shippingInfo,returnPolicy:(_photoMetadata$purcha5=photoMetadata.purchaseInfo)===null||_photoMetadata$purcha5===void 0?void 0:_photoMetadata$purcha5.returnPolicy},artist:{biography:(_photoMetadata$artist=photoMetadata.artist)===null||_photoMetadata$artist===void 0?void 0:_photoMetadata$artist.biography}};// Remove undefined values to avoid overwriting existing data with undefined\nObject.keys(updateData.artwork).forEach(key=>{if(updateData.artwork[key]===undefined||updateData.artwork[key]===''){delete updateData.artwork[key];}});Object.keys(updateData.artist).forEach(key=>{if(updateData.artist[key]===undefined||updateData.artist[key]===''){delete updateData.artist[key];}});await axios.put(\"/photos/\".concat(editingPhoto._id),updateData);toast.success('Photo metadata updated successfully');setEditingPhoto(null);fetchPhotos();// Refresh photos list\n}catch(error){console.error('Error updating photo metadata:',error);toast.error('Failed to update photo metadata');}};// Handle metadata input change\nconst handleMetadataChange=(field,value)=>{if(field.includes('.')){const keys=field.split('.');setPhotoMetadata(prev=>{const newData=_objectSpread({},prev);let current=newData;// Navigate to the parent object\nfor(let i=0;i<keys.length-1;i++){if(!current[keys[i]]){current[keys[i]]={};}current[keys[i]]=_objectSpread({},current[keys[i]]);current=current[keys[i]];}// Set the final value\ncurrent[keys[keys.length-1]]=value;return newData;});}else{setPhotoMetadata(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));}};// Toggle publish status\nconst handleTogglePublish=async()=>{try{const newStatus=!formData.isPublished;await axios.patch(\"/galleries/\".concat(id,\"/status\"),{isPublished:newStatus});setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{isPublished:newStatus}));toast.success(newStatus?'Gallery published!':'Gallery unpublished');}catch(error){console.error('Error toggling publish status:',error);toast.error('Failed to update gallery status');}};if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Authentication Required\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Please log in to edit galleries.\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn-primary\",children:\"Log In\"})]})});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})});}if(!gallery){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Gallery Not Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"The requested gallery could not be found.\"}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"btn-primary\",children:\"Back to Dashboard\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center h-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"text-gray-600 hover:text-gray-900\",children:/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-2xl font-serif font-bold gradient-text\",children:\"Gallery Pavilion\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[\"/ Editing: \",gallery.title]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleTogglePublish,className:\"px-4 py-2 rounded-lg font-medium \".concat(formData.isPublished?'bg-green-100 text-green-800 hover:bg-green-200':'bg-gray-100 text-gray-800 hover:bg-gray-200',\" transition-colors\"),children:formData.isPublished?'Published':'Draft'}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,disabled:saving,className:\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\",children:[saving&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:saving?'Saving...':'Save Changes'})]})]})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6},children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"flex space-x-8\",children:[{id:'edit',label:'Edit Gallery',icon:PencilIcon},{id:'photos',label:'Photos',icon:PhotoIcon},{id:'photographer',label:'Photographer',icon:UserIcon},{id:'share',label:'Share Links',icon:ShareIcon},{id:'invitations',label:'Invitations',icon:UserGroupIcon},{id:'settings',label:'Settings',icon:Cog6ToothIcon}].map(tab=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors \".concat(activeTab===tab.id?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(tab.icon,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:tab.label})]},tab.id))})}),activeTab==='edit'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Gallery Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:formData.title,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.title?'border-red-300':'border-gray-300'),placeholder:\"Enter gallery title\",maxLength:100}),errors.title&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[formData.title.length,\"/100 characters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",name:\"category\",value:formData.category,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.category?'border-red-300':'border-gray-300'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a category\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))]}),errors.category&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.category})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Collections\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCollection,onChange:e=>setNewCollection(e.target.value),onKeyPress:e=>e.key==='Enter'&&(e.preventDefault(),addCollection()),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",placeholder:\"Add collection tag\",maxLength:50}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addCollection,className:\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\",children:\"Add\"})]}),formData.collections.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 flex flex-wrap gap-2\",children:formData.collections.map((collection,index)=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-3 py-1 bg-primary-100 text-primary-800 text-sm rounded-full\",children:[collection,/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeCollection(index),className:\"ml-2 text-primary-600 hover:text-primary-800\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-4 h-4\"})})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",value:formData.description,onChange:handleInputChange,rows:4,className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors.description?'border-red-300':'border-gray-300'),placeholder:\"Describe your gallery\",maxLength:1000}),errors.description&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[formData.description.length,\"/1000 characters\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Cover Image\"}),!coverImagePreview?/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\",children:[/*#__PURE__*/_jsx(CloudArrowUpIcon,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Upload a cover image for your gallery\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleCoverImageChange,className:\"hidden\",id:\"coverImage\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"coverImage\",className:\"btn-secondary cursor-pointer\",children:\"Choose Image\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"PNG, JPG, GIF up to 10MB\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:coverImagePreview,alt:\"Cover preview\",className:\"w-full h-64 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:removeCoverImage,className:\"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-4 h-4\"})})]})]})]}),activeTab==='photos'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Upload Photos\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed rounded-lg p-8 text-center transition-colors \".concat(dragActive?'border-primary-500 bg-primary-50':'border-gray-300 hover:border-gray-400'),onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,children:[/*#__PURE__*/_jsx(CloudArrowUpIcon,{className:\"w-12 h-12 mx-auto mb-4 \".concat(dragActive?'text-primary-500':'text-gray-400')}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 \".concat(dragActive?'text-primary-600':'text-gray-600'),children:dragActive?'Drop photos here!':'Drag and drop photos here, or click to browse'}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileInputChange,multiple:true,className:\"hidden\",id:\"photoUpload\",disabled:uploading}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"photoUpload\",className:\"btn-secondary cursor-pointer \".concat(uploading?'opacity-50 cursor-not-allowed':''),children:uploading?'Uploading...':'Select Photos'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Up to 20 photos at once, 10MB each \\u2022 Supports JPG, PNG, WEBP\"}),uploading&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-primary-600 h-2 rounded-full animate-pulse\",style:{width:'60%'}})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Processing images and generating watermarks...\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:[\"Photos (\",photos.length,\")\"]}),photos.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(PhotoIcon,{className:\"w-16 h-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No photos uploaded yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Upload photos to get started\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4\",children:photos.map(photo=>/*#__PURE__*/_jsxs(\"div\",{className:\"group relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:photo.previewUrl||\"/uploads/photos/\".concat(photo.filename),alt:photo.title,className:\"w-full h-48 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(EyeIcon,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditPhoto(photo),className:\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(AdjustmentsHorizontalIcon,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeletePhoto(photo._id),className:\"p-2 bg-red-600 hover:bg-red-700 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"w-4 h-4 text-white\"})})]})})]},photo._id))})]})]}),activeTab==='share'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Create Share Link\"}),/*#__PURE__*/_jsx(ShareLinkForm,{onCreateShare:createShareLink})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Existing Share Links\"}),loadingShares?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"})}):shareLinks.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-gray-500\",children:[/*#__PURE__*/_jsx(ShareIcon,{className:\"w-12 h-12 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No share links created yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Create your first share link above\"})]}):/*#__PURE__*/_jsx(ShareLinksList,{shareLinks:shareLinks,onDeleteShare:deleteShareLink,galleryId:id})]})]}),activeTab==='invitations'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsx(InviteManager,{galleryId:id,isInviteOnly:formData.settings.inviteOnly})}),activeTab==='photographer'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"About the Photographer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"photographerBio\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Photographer Biography\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"photographerBio\",name:\"photographerBio\",rows:8,value:formData.photographerBio,onChange:handleInputChange,placeholder:\"Write about the photographer's background, experience, artistic vision, and achievements...\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 resize-vertical\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"This information will be displayed on the photo detail pages. Maximum 2000 characters.\"})]})})]}),activeTab==='settings'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Gallery Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"allowDownload\",name:\"settings.allowDownload\",checked:formData.settings.allowDownload,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"allowDownload\",className:\"ml-2 block text-sm text-gray-700\",children:\"Allow photo downloads\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"showMetadata\",name:\"settings.showMetadata\",checked:formData.settings.showMetadata,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"showMetadata\",className:\"ml-2 block text-sm text-gray-700\",children:\"Show photo metadata\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"enableComments\",name:\"settings.enableComments\",checked:formData.settings.enableComments,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"enableComments\",className:\"ml-2 block text-sm text-gray-700\",children:\"Enable comments\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"requirePassword\",name:\"settings.requirePassword\",checked:formData.settings.requirePassword,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"requirePassword\",className:\"ml-2 block text-sm text-gray-700\",children:\"Require password for access\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"inviteOnly\",name:\"settings.inviteOnly\",checked:formData.settings.inviteOnly,onChange:handleInputChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inviteOnly\",className:\"ml-2 block text-sm text-gray-700\",children:\"Invite-only access (requires invitation code)\"})]})]}),formData.settings.requirePassword&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Gallery Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"settings.password\",value:formData.settings.password,onChange:handleInputChange,className:\"w-full max-w-md px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent \".concat(errors['settings.password']?'border-red-300':'border-gray-300'),placeholder:\"Enter gallery password\"}),errors['settings.password']&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors['settings.password']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"watermarkIntensity\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Watermark Intensity: \",Math.round(formData.settings.watermarkIntensity*100),\"%\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",id:\"watermarkIntensity\",name:\"settings.watermarkIntensity\",min:\"0\",max:\"1\",step:\"0.1\",value:formData.settings.watermarkIntensity,onChange:handleInputChange,className:\"w-full max-w-md\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Controls the opacity of watermarks on preview images\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-6 mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-700 mb-4\",children:\"Danger Zone\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm('Are you sure you want to delete this gallery? This action cannot be undone.')){// Handle delete\n}},className:\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\",children:\"Delete Gallery\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Once deleted, the gallery and all its photos cannot be recovered.\"})]})]})]})]})]})}),editingPhoto&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900\",children:\"Edit Photo Metadata\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingPhoto(null),className:\"p-2 hover:bg-gray-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-6 h-6 text-gray-500\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:editingPhoto.previewUrl||\"/uploads/photos/\".concat(editingPhoto.filename),alt:editingPhoto.title,className:\"w-full h-64 object-cover rounded-lg mb-4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Original: \",editingPhoto.originalFilename]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.title,onChange:e=>handleMetadataChange('title',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:photoMetadata.description,onChange:e=>handleMetadataChange('description',e.target.value),rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Artwork Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Year\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor1=photoMetadata.artworkInfo)===null||_photoMetadata$artwor1===void 0?void 0:_photoMetadata$artwor1.year)||'',onChange:e=>handleMetadataChange('artworkInfo.year',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Series\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor10=photoMetadata.artworkInfo)===null||_photoMetadata$artwor10===void 0?void 0:_photoMetadata$artwor10.series)||'',onChange:e=>handleMetadataChange('artworkInfo.series',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Edition\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor11=photoMetadata.artworkInfo)===null||_photoMetadata$artwor11===void 0?void 0:_photoMetadata$artwor11.edition)||'',onChange:e=>handleMetadataChange('artworkInfo.edition',e.target.value),placeholder:\"e.g., 1/50\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Size\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor12=photoMetadata.artworkInfo)===null||_photoMetadata$artwor12===void 0?void 0:_photoMetadata$artwor12.size)||'',onChange:e=>handleMetadataChange('artworkInfo.size',e.target.value),placeholder:\"e.g., 24x36 inches\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor13=photoMetadata.artwork)===null||_photoMetadata$artwor13===void 0?void 0:_photoMetadata$artwor13.medium)||'',onChange:e=>handleMetadataChange('artwork.medium',e.target.value),placeholder:\"e.g., Photography, Digital Print\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Condition\"}),/*#__PURE__*/_jsxs(\"select\",{value:((_photoMetadata$artwor14=photoMetadata.artwork)===null||_photoMetadata$artwor14===void 0?void 0:_photoMetadata$artwor14.condition)||'Excellent',onChange:e=>handleMetadataChange('artwork.condition',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Excellent\",children:\"Excellent\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Very Good\",children:\"Very Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Good\",children:\"Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Fair\",children:\"Fair\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Poor\",children:\"Poor\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Rarity\"}),/*#__PURE__*/_jsxs(\"select\",{value:((_photoMetadata$artwor15=photoMetadata.artwork)===null||_photoMetadata$artwor15===void 0?void 0:_photoMetadata$artwor15.rarity)||'Common',onChange:e=>handleMetadataChange('artwork.rarity',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Unique\",children:\"Unique\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Rare\",children:\"Rare\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Scarce\",children:\"Scarce\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Common\",children:\"Common\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Signature\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor16=photoMetadata.artwork)===null||_photoMetadata$artwor16===void 0?void 0:_photoMetadata$artwor16.signature)||'',onChange:e=>handleMetadataChange('artwork.signature',e.target.value),placeholder:\"e.g., Signed lower right\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Materials\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_photoMetadata$artwor17=photoMetadata.artworkInfo)===null||_photoMetadata$artwor17===void 0?void 0:_photoMetadata$artwor17.materials)||'',onChange:e=>handleMetadataChange('artworkInfo.materials',e.target.value),placeholder:\"e.g., Archival pigment print on cotton paper\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Provenance\"}),/*#__PURE__*/_jsx(\"textarea\",{value:((_photoMetadata$artwor18=photoMetadata.artwork)===null||_photoMetadata$artwor18===void 0?void 0:_photoMetadata$artwor18.provenance)||'',onChange:e=>handleMetadataChange('artwork.provenance',e.target.value),placeholder:\"History of ownership and exhibition\",rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Artist Information\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Biography\"}),/*#__PURE__*/_jsx(\"textarea\",{value:((_photoMetadata$artist2=photoMetadata.artist)===null||_photoMetadata$artist2===void 0?void 0:_photoMetadata$artist2.biography)||'',onChange:e=>handleMetadataChange('artist.biography',e.target.value),placeholder:\"Artist's background and career highlights\",rows:4,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Tags\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[(photoMetadata.tags||[]).map((tag,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tag,onChange:e=>{const newTags=[...(photoMetadata.tags||[])];newTags[index]=e.target.value;handleMetadataChange('tags',newTags);},placeholder:\"Tag\",className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{const newTags=(photoMetadata.tags||[]).filter((_,i)=>i!==index);handleMetadataChange('tags',newTags);},className:\"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\",children:\"Remove\"})]},index)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{const newTags=[...(photoMetadata.tags||[]),''];handleMetadataChange('tags',newTags);},className:\"px-4 py-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors\",children:\"Add Tag\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Purchase Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:photoMetadata.purchaseInfo.price,onChange:e=>handleMetadataChange('purchaseInfo.price',e.target.value),placeholder:\"$2,500\",disabled:photoMetadata.purchaseInfo.priceOnRequest,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"priceOnRequest\",checked:photoMetadata.purchaseInfo.priceOnRequest,onChange:e=>handleMetadataChange('purchaseInfo.priceOnRequest',e.target.checked),className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"priceOnRequest\",className:\"ml-2 text-sm text-gray-700\",children:\"Price on Request\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Availability\"}),/*#__PURE__*/_jsxs(\"select\",{value:photoMetadata.purchaseInfo.availability,onChange:e=>handleMetadataChange('purchaseInfo.availability',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"available\",children:\"Available\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sold\",children:\"Sold\"}),/*#__PURE__*/_jsx(\"option\",{value:\"reserved\",children:\"Reserved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"not-for-sale\",children:\"Not for Sale\"})]})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4 mt-8 pt-6 border-t\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingPhoto(null),className:\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSavePhotoMetadata,className:\"px-4 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded-lg transition-colors\",children:\"Save Changes\"})]})]})})})]});};export default GalleryPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","Link","useSearchParams","motion","useAuth","axios","ArrowLeftIcon","PhotoIcon","CloudArrowUpIcon","XMarkIcon","Cog6ToothIcon","PencilIcon","EyeIcon","TrashIcon","AdjustmentsHorizontalIcon","ShareIcon","UserGroupIcon","UserIcon","toast","ShareLinkForm","ShareLinksList","InviteManager","jsx","_jsx","jsxs","_jsxs","GalleryPage","_photoMetadata$artwor1","_photoMetadata$artwor10","_photoMetadata$artwor11","_photoMetadata$artwor12","_photoMetadata$artwor13","_photoMetadata$artwor14","_photoMetadata$artwor15","_photoMetadata$artwor16","_photoMetadata$artwor17","_photoMetadata$artwor18","_photoMetadata$artist2","id","isAuthenticated","searchParams","activeTab","setActiveTab","get","gallery","setGallery","loading","setLoading","saving","setSaving","uploading","setUploading","photos","setPhotos","formData","setFormData","title","description","category","collections","photographerBio","settings","allowDownload","showMetadata","enableComments","watermarkIntensity","requirePassword","password","inviteOnly","sortOrder","isPublished","errors","setErrors","newCollection","setNewCollection","coverImage","setCoverImage","coverImagePreview","setCoverImagePreview","shareLinks","setShareLinks","loadingShares","setLoadingShares","editingPhoto","setEditingPhoto","photoMetadata","setPhotoMetadata","tags","artworkInfo","year","series","edition","size","materials","artwork","medium","condition","rarity","signature","provenance","artist","biography","purchaseInfo","price","priceOnRequest","availability","shippingInfo","returnPolicy","context","artistStatement","exhibitionHistory","categories","fetchGallery","_galleryData$settings","_galleryData$settings2","_galleryData$settings3","_galleryData$settings4","_galleryData$settings5","_galleryData$settings6","_galleryData$settings7","_galleryData$settings8","response","concat","galleryData","data","rawIntensity","intensityNumber","includes","num","parseFloat","Number","isFinite","previewUrl","error","console","fetchPhotos","fetchShareLinks","shares","createShareLink","shareData","post","prev","share","success","_error$response","_error$response$data","message","deleteShareLink","shareId","delete","filter","_id","handleInputChange","e","name","value","type","checked","target","startsWith","settingName","split","_objectSpread","handleCoverImageChange","file","files","reader","FileReader","onload","result","readAsDataURL","removeCoverImage","addCollection","trim","removeCollection","index","_","i","validateForm","newErrors","length","Object","keys","handleSave","submitData","FormData","rawSettings","numericIntensity","watermarkEnum","settingsPayload","collectionsProcessed","map","c","toString","Boolean","forEach","key","append","JSON","stringify","put","headers","_error$response2","_error$response2$data","_error$response3","_error$response3$data","errorMessage","validationErrors","err","path","msg","handlePhotoUpload","_response$data$photos","_error$response4","_error$response4$data","handleFileInputChange","dragActive","setDragActive","handleDrag","preventDefault","stopPropagation","handleDrop","dataTransfer","Array","from","handleDeletePhoto","photoId","window","confirm","handleEditPhoto","photo","_photo$artwork","_photo$exif","_photo$artwork2","_photo$artwork3","_photo$artwork4","_photo$artwork5","_photo$artwork6","_photo$artwork9","_photo$artwork0","_photo$artist","_photo$artwork1","_photo$artwork10","_photo$artwork11","_photo$artwork12","_photo$artwork13","_photo$artwork14","_photo$artwork15","_photo$context","exif","dateTaken","Date","getFullYear","dimensions","_photo$artwork7","_photo$artwork8","isForSale","handleSavePhotoMetadata","_photoMetadata$artwor","_photoMetadata$artwor2","_photoMetadata$artwor3","_photoMetadata$artwor4","_photoMetadata$artwor5","_photoMetadata$artwor6","_photoMetadata$artwor9","_photoMetadata$artwor0","_photoMetadata$purcha","_photoMetadata$purcha2","_photoMetadata$purcha3","_photoMetadata$contex","_photoMetadata$purcha4","_photoMetadata$purcha5","_photoMetadata$artist","updateData","parseInt","undefined","_photoMetadata$artwor7","_photoMetadata$artwor8","handleMetadataChange","field","newData","current","handleTogglePublish","newStatus","patch","className","children","to","onClick","disabled","div","initial","opacity","y","animate","transition","duration","label","icon","tab","htmlFor","onChange","placeholder","maxLength","onKeyPress","collection","rows","accept","src","alt","onDragEnter","onDragLeave","onDragOver","onDrop","multiple","style","width","filename","onCreateShare","onDeleteShare","galleryId","isInviteOnly","Math","round","min","max","step","originalFilename","tag","newTags"],"sources":["C:/Users/USER/Desktop/Gallerypavilion/frontend/src/pages/GalleryPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, Link, useSearchParams } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport { useAuth } from '../contexts/AuthContext';\nimport axios from 'axios';\nimport {\n  ArrowLeftIcon,\n  PhotoIcon,\n  CloudArrowUpIcon,\n  XMarkIcon,\n  Cog6ToothIcon,\n  PencilIcon,\n  EyeIcon,\n  TrashIcon,\n  AdjustmentsHorizontalIcon,\n  ShareIcon,\n  UserGroupIcon,\n  UserIcon\n} from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\nimport ShareLinkForm from '../components/ShareLinkForm';\nimport ShareLinksList from '../components/ShareLinksList';\nimport InviteManager from '../components/InviteManager';\n\nconst GalleryPage = () => {\n  const { id } = useParams();\n  const { isAuthenticated } = useAuth();\n  const [searchParams] = useSearchParams();\n  \n  const [activeTab, setActiveTab] = useState(searchParams.get('tab') || 'edit');\n  const [gallery, setGallery] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [photos, setPhotos] = useState([]);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    category: '',\n    collections: [],\n    photographerBio: '',\n    settings: {\n      allowDownload: false,\n      showMetadata: true,\n      enableComments: false,\n      watermarkIntensity: 0.3,\n      requirePassword: false,\n      password: '',\n      inviteOnly: false,\n      sortOrder: 'newest'\n    },\n    isPublished: false\n  });\n  const [errors, setErrors] = useState({});\n  const [newCollection, setNewCollection] = useState('');\n  const [coverImage, setCoverImage] = useState(null);\n  const [coverImagePreview, setCoverImagePreview] = useState(null);\n  const [shareLinks, setShareLinks] = useState([]);\n  const [loadingShares, setLoadingShares] = useState(false);\n  \n  // Photo metadata editing\n  const [editingPhoto, setEditingPhoto] = useState(null);\n  const [photoMetadata, setPhotoMetadata] = useState({\n    title: '',\n    description: '',\n    tags: [],\n    artworkInfo: {\n      year: '',\n      series: '',\n      edition: '',\n      size: '',\n      materials: ''\n    },\n    artwork: {\n      medium: '',\n      condition: 'Excellent',\n      rarity: 'Common',\n      signature: '',\n      provenance: ''\n    },\n    artist: {\n      biography: ''\n    },\n    purchaseInfo: {\n      price: '',\n      priceOnRequest: false,\n      availability: 'available',\n      shippingInfo: '',\n      returnPolicy: ''\n    },\n    context: {\n      artistStatement: '',\n      exhibitionHistory: ''\n    }\n  });\n\n  const categories = [\n    'Portrait', 'Wedding', 'Landscape', 'Wildlife', 'Street', \n    'Fashion', 'Commercial', 'Fine Art', 'Event', 'Documentary'\n  ];\n\n  const fetchGallery = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`/galleries/${id}`);\n      const galleryData = response.data;\n      setGallery(galleryData);\n      \n      // Normalize watermarkIntensity for UI slider if backend returns enum\n      const rawIntensity = galleryData.settings?.watermarkIntensity;\n      let intensityNumber;\n      if (typeof rawIntensity === 'number') {\n        intensityNumber = rawIntensity;\n      } else if (typeof rawIntensity === 'string') {\n        if (['light', 'medium', 'heavy'].includes(rawIntensity)) {\n          intensityNumber = rawIntensity === 'light' ? 0.2 : (rawIntensity === 'medium' ? 0.5 : 0.85);\n        } else {\n          const num = parseFloat(rawIntensity);\n          intensityNumber = Number.isFinite(num) ? num : 0.3;\n        }\n      } else {\n        intensityNumber = 0.3;\n      }\n      \n      // Populate form data\n      setFormData({\n        title: galleryData.title || '',\n        description: galleryData.description || '',\n        category: galleryData.category || '',\n        collections: galleryData.collections || [],\n        photographerBio: galleryData.photographerBio || '',\n        settings: {\n          allowDownload: galleryData.settings?.allowDownload || false,\n          showMetadata: galleryData.settings?.showMetadata || true,\n          enableComments: galleryData.settings?.enableComments || false,\n          watermarkIntensity: intensityNumber,\n          requirePassword: galleryData.settings?.requirePassword || false,\n          password: galleryData.settings?.password || '',\n          inviteOnly: galleryData.settings?.inviteOnly || false,\n          sortOrder: galleryData.settings?.sortOrder || 'newest'\n        },\n        isPublished: galleryData.isPublished || false\n      });\n\n      if (galleryData.coverImage) {\n        setCoverImagePreview(galleryData.coverImage.previewUrl || null);\n      }\n    } catch (error) {\n      console.error('Error fetching gallery:', error);\n      toast.error('Failed to load gallery');\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n\n  const fetchPhotos = useCallback(async () => {\n    try {\n      const response = await axios.get(`/galleries/${id}/photos`);\n      setPhotos(response.data.photos || []);\n    } catch (error) {\n      console.error('Error fetching photos:', error);\n    }\n  }, [id]);\n\n  // Fetch share links\n  const fetchShareLinks = useCallback(async () => {\n    try {\n      setLoadingShares(true);\n      const response = await axios.get(`/galleries/${id}/shares`);\n      setShareLinks(response.data.shares || []);\n    } catch (error) {\n      console.error('Error fetching share links:', error);\n      toast.error('Failed to fetch share links');\n    } finally {\n      setLoadingShares(false);\n    }\n  }, [id]);\n\n  // Create share link\n  const createShareLink = async (shareData) => {\n    try {\n      const response = await axios.post(`/galleries/${id}/shares`, shareData);\n      setShareLinks(prev => [...prev, response.data.share]);\n      toast.success('Share link created successfully');\n      return response.data.share;\n    } catch (error) {\n      console.error('Error creating share link:', error);\n      toast.error(error.response?.data?.message || 'Failed to create share link');\n      throw error;\n    }\n  };\n\n  // Delete share link\n  const deleteShareLink = async (shareId) => {\n    try {\n      await axios.delete(`/galleries/${id}/shares/${shareId}`);\n      setShareLinks(prev => prev.filter(share => share._id !== shareId));\n      toast.success('Share link deleted successfully');\n    } catch (error) {\n      console.error('Error deleting share link:', error);\n      toast.error('Failed to delete share link');\n    }\n  };\n\n  // Fetch gallery data\n  useEffect(() => {\n    if (id) {\n      fetchGallery();\n      fetchPhotos();\n      fetchShareLinks();\n    }\n  }, [id, fetchGallery, fetchPhotos, fetchShareLinks]);\n\n  // Handle form input changes\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    \n    if (name.startsWith('settings.')) {\n      const settingName = name.split('.')[1];\n      setFormData(prev => ({\n        ...prev,\n        settings: {\n          ...prev.settings,\n          [settingName]: type === 'checkbox' ? checked : (settingName === 'watermarkIntensity' ? parseFloat(value) : value)\n        }\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: type === 'checkbox' ? checked : value\n      }));\n    }\n    \n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: null }));\n    }\n  };\n\n  // Handle cover image upload\n  const handleCoverImageChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.size > 10 * 1024 * 1024) {\n        toast.error('Cover image must be less than 10MB');\n        return;\n      }\n      \n      if (!file.type.startsWith('image/')) {\n        toast.error('Please select a valid image file');\n        return;\n      }\n      \n      setCoverImage(file);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => setCoverImagePreview(e.target.result);\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // Remove cover image\n  const removeCoverImage = () => {\n    setCoverImage(null);\n    setCoverImagePreview(null);\n  };\n\n  // Add collection\n  const addCollection = () => {\n    if (newCollection.trim() && !formData.collections.includes(newCollection.trim())) {\n      setFormData(prev => ({\n        ...prev,\n        collections: [...prev.collections, newCollection.trim()]\n      }));\n      setNewCollection('');\n    }\n  };\n\n  // Remove collection\n  const removeCollection = (index) => {\n    setFormData(prev => ({\n      ...prev,\n      collections: prev.collections.filter((_, i) => i !== index)\n    }));\n  };\n\n  // Validate form\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!formData.title.trim()) {\n      newErrors.title = 'Gallery title is required';\n    } else if (formData.title.length > 100) {\n      newErrors.title = 'Title cannot exceed 100 characters';\n    }\n    \n    if (!formData.description.trim()) {\n      newErrors.description = 'Gallery description is required';\n    } else if (formData.description.length > 1000) {\n      newErrors.description = 'Description cannot exceed 1000 characters';\n    }\n    \n    if (!formData.category) {\n      newErrors.category = 'Please select a category';\n    }\n    \n    if (formData.settings.requirePassword && !formData.settings.password.trim()) {\n      newErrors['settings.password'] = 'Password is required when password protection is enabled';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Save gallery changes\n  const handleSave = async () => {\n    if (!validateForm()) {\n      toast.error('Please fix the errors in the form');\n      return;\n    }\n    \n    setSaving(true);\n    \n    try {\n      const submitData = new FormData();\n      \n      // Prepare settings strictly matching backend schema\n      const rawSettings = { ...formData.settings };\n      const numericIntensity = typeof rawSettings.watermarkIntensity === 'number'\n        ? rawSettings.watermarkIntensity\n        : parseFloat(rawSettings.watermarkIntensity || 0.5);\n      const watermarkEnum = Number.isFinite(numericIntensity)\n        ? (numericIntensity <= 0.33 ? 'light' : (numericIntensity <= 0.66 ? 'medium' : 'heavy'))\n        : 'medium';\n      const settingsPayload = {\n        allowDownload: !!rawSettings.allowDownload,\n        showMetadata: !!rawSettings.showMetadata,\n        enableComments: !!rawSettings.enableComments,\n        watermarkIntensity: watermarkEnum,\n        sortOrder: ['newest', 'oldest', 'custom'].includes(rawSettings.sortOrder) ? rawSettings.sortOrder : 'newest',\n        inviteOnly: !!rawSettings.inviteOnly\n      };\n      const collectionsProcessed = (formData.collections || []).map(c => (c || '').toString().trim()).filter(Boolean);\n      \n      // Add gallery data\n      Object.keys(formData).forEach(key => {\n        if (key === 'settings') {\n          submitData.append('settings', JSON.stringify(settingsPayload));\n        } else if (key === 'collections') {\n          submitData.append('collections', JSON.stringify(collectionsProcessed));\n        } else {\n          submitData.append(key, formData[key]);\n        }\n      });\n      \n      // Add cover image if selected\n      if (coverImage) {\n        submitData.append('coverImage', coverImage);\n      }\n      \n      const response = await axios.put(`/galleries/${id}`, submitData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      toast.success('Gallery updated successfully!');\n      setGallery(response.data);\n      \n    } catch (error) {\n      console.error('Error updating gallery:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to update gallery';\n      toast.error(errorMessage);\n      \n      // Handle validation errors\n      if (error.response?.data?.errors) {\n        const validationErrors = {};\n        error.response.data.errors.forEach(err => {\n          validationErrors[err.path] = err.msg;\n        });\n        setErrors(validationErrors);\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Upload photos\n  const handlePhotoUpload = async (files) => {\n    if (!files || files.length === 0) return;\n    \n    setUploading(true);\n    \n    try {\n      const formData = new FormData();\n      for (let i = 0; i < files.length; i++) {\n        formData.append('photos', files[i]);\n      }\n      \n      const response = await axios.post(`/galleries/${id}/photos`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      toast.success(`${response.data.photos?.length || 0} photos uploaded successfully!`);\n      fetchPhotos(); // Refresh photos list\n      \n    } catch (error) {\n      console.error('Error uploading photos:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to upload photos';\n      toast.error(errorMessage);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Handle file input change\n  const handleFileInputChange = (e) => {\n    handlePhotoUpload(e.target.files);\n  };\n\n  // Drag and drop handlers\n  const [dragActive, setDragActive] = useState(false);\n\n  const handleDrag = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const files = Array.from(e.dataTransfer.files).filter(file => \n        file.type.startsWith('image/')\n      );\n      if (files.length > 0) {\n        handlePhotoUpload(files);\n      } else {\n        toast.error('Please drop only image files');\n      }\n    }\n  };\n\n  // Delete photo\n  const handleDeletePhoto = async (photoId) => {\n    if (!window.confirm('Are you sure you want to delete this photo?')) return;\n    \n    try {\n      await axios.delete(`/photos/${photoId}`);\n      toast.success('Photo deleted successfully');\n      fetchPhotos(); // Refresh photos list\n    } catch (error) {\n      console.error('Error deleting photo:', error);\n      toast.error('Failed to delete photo');\n    }\n  };\n\n  // Edit photo metadata\n  const handleEditPhoto = (photo) => {\n    setEditingPhoto(photo);\n    setPhotoMetadata({\n      title: photo.title || '',\n      description: photo.description || '',\n      tags: photo.tags || [],\n      artworkInfo: {\n        year: photo.artwork?.year || photo.exif?.dateTaken ? new Date(photo.exif.dateTaken).getFullYear().toString() : '',\n        series: photo.artwork?.series || '',\n        edition: photo.artwork?.edition || '',\n        size: photo.artwork?.dimensions || '',\n        materials: photo.artwork?.materials || ''\n      },\n      artwork: {\n        medium: photo.artwork?.medium || '',\n        condition: (() => {\n          const condition = photo.artwork?.condition;\n          if (condition === 'excellent') return 'Excellent';\n          if (condition === 'very-good' || condition === 'very good') return 'Very Good';\n          if (condition === 'good') return 'Good';\n          if (condition === 'fair') return 'Fair';\n          if (condition === 'poor') return 'Poor';\n          return condition || 'Excellent';\n        })(),\n        rarity: (() => {\n          const rarity = photo.artwork?.rarity;\n          if (rarity === 'unique') return 'Unique';\n          if (rarity === 'rare') return 'Rare';\n          if (rarity === 'scarce') return 'Scarce';\n          if (rarity === 'common') return 'Common';\n          return rarity || 'Common';\n        })(),\n        signature: photo.artwork?.signature || '',\n        provenance: photo.artwork?.provenance || ''\n      },\n      artist: {\n        biography: photo.artist?.biography || ''\n      },\n      purchaseInfo: {\n        price: photo.artwork?.price || '',\n        priceOnRequest: !photo.artwork?.price && !!photo.artwork?.isForSale,\n        availability: photo.artwork?.isForSale ? 'available' : 'not_available',\n        shippingInfo: photo.artwork?.shippingInfo || '',\n        returnPolicy: photo.artwork?.returnPolicy || ''\n      },\n      context: {\n        artistStatement: photo.artwork?.context || '',\n        exhibitionHistory: photo.context?.exhibitionHistory || ''\n      }\n    });\n  };\n\n  // Save photo metadata\n  const handleSavePhotoMetadata = async () => {\n    if (!editingPhoto) {\n      return;\n    }\n    \n    try {\n      // Transform frontend form data to backend Photo model structure\n      const updateData = {\n        title: photoMetadata.title,\n        description: photoMetadata.description,\n        tags: photoMetadata.tags,\n        artwork: {\n          year: photoMetadata.artworkInfo?.year ? parseInt(photoMetadata.artworkInfo.year) : undefined,\n          series: photoMetadata.artworkInfo?.series,\n          edition: photoMetadata.artworkInfo?.edition,\n          dimensions: photoMetadata.artworkInfo?.size,\n          materials: photoMetadata.artworkInfo?.materials,\n          medium: photoMetadata.artwork?.medium,\n          condition: (() => {\n            const condition = photoMetadata.artwork?.condition;\n            if (condition === 'Excellent') return 'Excellent';\n            if (condition === 'Very Good') return 'Very Good';\n            if (condition === 'Good') return 'Good';\n            if (condition === 'Fair') return 'Fair';\n            if (condition === 'Poor') return 'Poor';\n            return condition;\n          })(),\n          rarity: (() => {\n            const rarity = photoMetadata.artwork?.rarity;\n            if (rarity === 'Unique') return 'Unique';\n            if (rarity === 'Rare') return 'Rare';\n            if (rarity === 'Scarce') return 'Scarce';\n            if (rarity === 'Common') return 'Common';\n            return rarity;\n          })(),\n          signature: photoMetadata.artwork?.signature,\n          provenance: photoMetadata.artwork?.provenance,\n\n          price: photoMetadata.purchaseInfo?.price ? parseFloat(photoMetadata.purchaseInfo.price) : undefined,\n          isForSale: photoMetadata.purchaseInfo?.availability === 'available' || photoMetadata.purchaseInfo?.priceOnRequest,\n          context: photoMetadata.context?.artistStatement,\n          shippingInfo: photoMetadata.purchaseInfo?.shippingInfo,\n          returnPolicy: photoMetadata.purchaseInfo?.returnPolicy\n        },\n        artist: {\n          biography: photoMetadata.artist?.biography\n        }\n      };\n      \n      // Remove undefined values to avoid overwriting existing data with undefined\n      Object.keys(updateData.artwork).forEach(key => {\n        if (updateData.artwork[key] === undefined || updateData.artwork[key] === '') {\n          delete updateData.artwork[key];\n        }\n      });\n      \n      Object.keys(updateData.artist).forEach(key => {\n        if (updateData.artist[key] === undefined || updateData.artist[key] === '') {\n          delete updateData.artist[key];\n        }\n      });\n      \n      await axios.put(`/photos/${editingPhoto._id}`, updateData);\n      toast.success('Photo metadata updated successfully');\n      setEditingPhoto(null);\n      fetchPhotos(); // Refresh photos list\n    } catch (error) {\n      console.error('Error updating photo metadata:', error);\n      toast.error('Failed to update photo metadata');\n    }\n  };\n\n  // Handle metadata input change\n  const handleMetadataChange = (field, value) => {\n    if (field.includes('.')) {\n      const keys = field.split('.');\n      setPhotoMetadata(prev => {\n        const newData = { ...prev };\n        let current = newData;\n        \n        // Navigate to the parent object\n        for (let i = 0; i < keys.length - 1; i++) {\n          if (!current[keys[i]]) {\n            current[keys[i]] = {};\n          }\n          current[keys[i]] = { ...current[keys[i]] };\n          current = current[keys[i]];\n        }\n        \n        // Set the final value\n        current[keys[keys.length - 1]] = value;\n        \n        return newData;\n      });\n    } else {\n      setPhotoMetadata(prev => ({\n        ...prev,\n        [field]: value\n      }));\n    }\n  };\n\n  // Toggle publish status\n  const handleTogglePublish = async () => {\n    try {\n      const newStatus = !formData.isPublished;\n      await axios.patch(`/galleries/${id}/status`, {\n        isPublished: newStatus\n      });\n      \n      setFormData(prev => ({ ...prev, isPublished: newStatus }));\n      toast.success(newStatus ? 'Gallery published!' : 'Gallery unpublished');\n      \n    } catch (error) {\n      console.error('Error toggling publish status:', error);\n      toast.error('Failed to update gallery status');\n    }\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Authentication Required</h2>\n          <p className=\"text-gray-600 mb-6\">Please log in to edit galleries.</p>\n          <Link to=\"/login\" className=\"btn-primary\">\n            Log In\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  if (!gallery) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Gallery Not Found</h2>\n          <p className=\"text-gray-600 mb-6\">The requested gallery could not be found.</p>\n          <Link to=\"/dashboard\" className=\"btn-primary\">\n            Back to Dashboard\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center space-x-4\">\n              <Link to=\"/dashboard\" className=\"text-gray-600 hover:text-gray-900\">\n                <ArrowLeftIcon className=\"w-5 h-5\" />\n              </Link>\n              <Link to=\"/\" className=\"text-2xl font-serif font-bold gradient-text\">\n                Gallery Pavilion\n              </Link>\n              <span className=\"text-sm text-gray-500\">/ Editing: {gallery.title}</span>\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={handleTogglePublish}\n                className={`px-4 py-2 rounded-lg font-medium ${\n                  formData.isPublished \n                    ? 'bg-green-100 text-green-800 hover:bg-green-200' \n                    : 'bg-gray-100 text-gray-800 hover:bg-gray-200'\n                } transition-colors`}\n              >\n                {formData.isPublished ? 'Published' : 'Draft'}\n              </button>\n              \n              <button\n                onClick={handleSave}\n                disabled={saving}\n                className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\"\n              >\n                {saving && <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>}\n                <span>{saving ? 'Saving...' : 'Save Changes'}</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n        >\n          {/* Tab Navigation */}\n          <div className=\"mb-8 border-b border-gray-200\">\n            <nav className=\"flex space-x-8\">\n              {[\n                { id: 'edit', label: 'Edit Gallery', icon: PencilIcon },\n                { id: 'photos', label: 'Photos', icon: PhotoIcon },\n                { id: 'photographer', label: 'Photographer', icon: UserIcon },\n                { id: 'share', label: 'Share Links', icon: ShareIcon },\n                { id: 'invitations', label: 'Invitations', icon: UserGroupIcon },\n                { id: 'settings', label: 'Settings', icon: Cog6ToothIcon }\n              ].map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors ${\n                    activeTab === tab.id\n                      ? 'border-primary-500 text-primary-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <tab.icon className=\"w-5 h-5\" />\n                  <span>{tab.label}</span>\n                </button>\n              ))}\n            </nav>\n          </div>\n\n          {/* Edit Tab */}\n          {activeTab === 'edit' && (\n            <div className=\"space-y-8\">\n              {/* Basic Information */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Basic Information</h2>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  {/* Title */}\n                  <div className=\"md:col-span-2\">\n                    <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Gallery Title *\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"title\"\n                      name=\"title\"\n                      value={formData.title}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors.title ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter gallery title\"\n                      maxLength={100}\n                    />\n                    {errors.title && <p className=\"mt-1 text-sm text-red-600\">{errors.title}</p>}\n                    <p className=\"mt-1 text-sm text-gray-500\">{formData.title.length}/100 characters</p>\n                  </div>\n\n                  {/* Category */}\n                  <div>\n                    <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Category *\n                    </label>\n                    <select\n                      id=\"category\"\n                      name=\"category\"\n                      value={formData.category}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors.category ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                    >\n                      <option value=\"\">Select a category</option>\n                      {categories.map(category => (\n                        <option key={category} value={category}>{category}</option>\n                      ))}\n                    </select>\n                    {errors.category && <p className=\"mt-1 text-sm text-red-600\">{errors.category}</p>}\n                  </div>\n\n                  {/* Collections */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Collections\n                    </label>\n                    <div className=\"flex space-x-2\">\n                      <input\n                        type=\"text\"\n                        value={newCollection}\n                        onChange={(e) => setNewCollection(e.target.value)}\n                        onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addCollection())}\n                        className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        placeholder=\"Add collection tag\"\n                        maxLength={50}\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={addCollection}\n                        className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\n                      >\n                        Add\n                      </button>\n                    </div>\n                    {formData.collections.length > 0 && (\n                      <div className=\"mt-2 flex flex-wrap gap-2\">\n                        {formData.collections.map((collection, index) => (\n                          <span\n                            key={index}\n                            className=\"inline-flex items-center px-3 py-1 bg-primary-100 text-primary-800 text-sm rounded-full\"\n                          >\n                            {collection}\n                            <button\n                              type=\"button\"\n                              onClick={() => removeCollection(index)}\n                              className=\"ml-2 text-primary-600 hover:text-primary-800\"\n                            >\n                              <XMarkIcon className=\"w-4 h-4\" />\n                            </button>\n                          </span>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Description */}\n                  <div className=\"md:col-span-2\">\n                    <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Description *\n                    </label>\n                    <textarea\n                      id=\"description\"\n                      name=\"description\"\n                      value={formData.description}\n                      onChange={handleInputChange}\n                      rows={4}\n                      className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors.description ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Describe your gallery\"\n                      maxLength={1000}\n                    />\n                    {errors.description && <p className=\"mt-1 text-sm text-red-600\">{errors.description}</p>}\n                    <p className=\"mt-1 text-sm text-gray-500\">{formData.description.length}/1000 characters</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Cover Image */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Cover Image</h2>\n                \n                {!coverImagePreview ? (\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                    <CloudArrowUpIcon className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-gray-600 mb-4\">Upload a cover image for your gallery</p>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleCoverImageChange}\n                      className=\"hidden\"\n                      id=\"coverImage\"\n                    />\n                    <label\n                      htmlFor=\"coverImage\"\n                      className=\"btn-secondary cursor-pointer\"\n                    >\n                      Choose Image\n                    </label>\n                    <p className=\"text-sm text-gray-500 mt-2\">PNG, JPG, GIF up to 10MB</p>\n                  </div>\n                ) : (\n                  <div className=\"relative\">\n                    <img\n                      src={coverImagePreview}\n                      alt=\"Cover preview\"\n                      className=\"w-full h-64 object-cover rounded-lg\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={removeCoverImage}\n                      className=\"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors\"\n                    >\n                      <XMarkIcon className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Photos Tab */}\n          {activeTab === 'photos' && (\n            <div className=\"space-y-6\">\n              {/* Upload Section */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Upload Photos</h2>\n                \n                <div \n                  className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n                    dragActive \n                      ? 'border-primary-500 bg-primary-50' \n                      : 'border-gray-300 hover:border-gray-400'\n                  }`}\n                  onDragEnter={handleDrag}\n                  onDragLeave={handleDrag}\n                  onDragOver={handleDrag}\n                  onDrop={handleDrop}\n                >\n                  <CloudArrowUpIcon className={`w-12 h-12 mx-auto mb-4 ${\n                    dragActive ? 'text-primary-500' : 'text-gray-400'\n                  }`} />\n                  <p className={`mb-4 ${\n                    dragActive ? 'text-primary-600' : 'text-gray-600'\n                  }`}>\n                    {dragActive ? 'Drop photos here!' : 'Drag and drop photos here, or click to browse'}\n                  </p>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleFileInputChange}\n                    multiple\n                    className=\"hidden\"\n                    id=\"photoUpload\"\n                    disabled={uploading}\n                  />\n                  <label\n                    htmlFor=\"photoUpload\"\n                    className={`btn-secondary cursor-pointer ${\n                      uploading ? 'opacity-50 cursor-not-allowed' : ''\n                    }`}\n                  >\n                    {uploading ? 'Uploading...' : 'Select Photos'}\n                  </label>\n                  <p className=\"text-sm text-gray-500 mt-2\">\n                    Up to 20 photos at once, 10MB each  Supports JPG, PNG, WEBP\n                  </p>\n                  {uploading && (\n                    <div className=\"mt-4\">\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                        <div className=\"bg-primary-600 h-2 rounded-full animate-pulse\" style={{width: '60%'}}></div>\n                      </div>\n                      <p className=\"text-sm text-gray-500 mt-2\">Processing images and generating watermarks...</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Photos Grid */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">\n                  Photos ({photos.length})\n                </h2>\n                \n                {photos.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <PhotoIcon className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                    <p className=\"text-gray-600\">No photos uploaded yet</p>\n                    <p className=\"text-sm text-gray-500 mt-2\">Upload photos to get started</p>\n                  </div>\n                ) : (\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4\">\n                    {photos.map((photo) => (\n                      <div key={photo._id} className=\"group relative\">\n                        <img\n                          src={photo.previewUrl || `/uploads/photos/${photo.filename}`}\n                          alt={photo.title}\n                          className=\"w-full h-48 object-cover rounded-lg\"\n                        />\n                        <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100\">\n                          <div className=\"flex space-x-2\">\n                            <button className=\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\">\n                              <EyeIcon className=\"w-4 h-4 text-white\" />\n                            </button>\n                            <button \n                              onClick={() => handleEditPhoto(photo)}\n                              className=\"p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full transition-colors\"\n                            >\n                              <AdjustmentsHorizontalIcon className=\"w-4 h-4 text-white\" />\n                            </button>\n                            <button \n                              onClick={() => handleDeletePhoto(photo._id)}\n                              className=\"p-2 bg-red-600 hover:bg-red-700 rounded-full transition-colors\"\n                            >\n                              <TrashIcon className=\"w-4 h-4 text-white\" />\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Share Tab */}\n          {activeTab === 'share' && (\n            <div className=\"space-y-6\">\n              {/* Create New Share Link */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Create Share Link</h2>\n                <ShareLinkForm onCreateShare={createShareLink} />\n              </div>\n\n              {/* Existing Share Links */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Existing Share Links</h2>\n                {loadingShares ? (\n                  <div className=\"flex justify-center py-8\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n                  </div>\n                ) : shareLinks.length === 0 ? (\n                  <div className=\"text-center py-8 text-gray-500\">\n                    <ShareIcon className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\n                    <p>No share links created yet</p>\n                    <p className=\"text-sm\">Create your first share link above</p>\n                  </div>\n                ) : (\n                  <ShareLinksList \n                    shareLinks={shareLinks} \n                    onDeleteShare={deleteShareLink}\n                    galleryId={id}\n                  />\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Invitations Tab */}\n          {activeTab === 'invitations' && (\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <InviteManager \n                galleryId={id} \n                isInviteOnly={formData.settings.inviteOnly} \n              />\n            </div>\n          )}\n\n          {/* Photographer Tab */}\n          {activeTab === 'photographer' && (\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">About the Photographer</h2>\n              \n              <div className=\"space-y-6\">\n                <div>\n                  <label htmlFor=\"photographerBio\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Photographer Biography\n                  </label>\n                  <textarea\n                    id=\"photographerBio\"\n                    name=\"photographerBio\"\n                    rows={8}\n                    value={formData.photographerBio}\n                    onChange={handleInputChange}\n                    placeholder=\"Write about the photographer's background, experience, artistic vision, and achievements...\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 resize-vertical\"\n                  />\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    This information will be displayed on the photo detail pages. Maximum 2000 characters.\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Settings Tab */}\n          {activeTab === 'settings' && (\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Gallery Settings</h2>\n              \n              <div className=\"space-y-6\">\n                {/* Basic Settings */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"allowDownload\"\n                      name=\"settings.allowDownload\"\n                      checked={formData.settings.allowDownload}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"allowDownload\" className=\"ml-2 block text-sm text-gray-700\">\n                      Allow photo downloads\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"showMetadata\"\n                      name=\"settings.showMetadata\"\n                      checked={formData.settings.showMetadata}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"showMetadata\" className=\"ml-2 block text-sm text-gray-700\">\n                      Show photo metadata\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"enableComments\"\n                      name=\"settings.enableComments\"\n                      checked={formData.settings.enableComments}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"enableComments\" className=\"ml-2 block text-sm text-gray-700\">\n                      Enable comments\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"requirePassword\"\n                      name=\"settings.requirePassword\"\n                      checked={formData.settings.requirePassword}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"requirePassword\" className=\"ml-2 block text-sm text-gray-700\">\n                      Require password for access\n                    </label>\n                  </div>\n                  \n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"inviteOnly\"\n                      name=\"settings.inviteOnly\"\n                      checked={formData.settings.inviteOnly}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label htmlFor=\"inviteOnly\" className=\"ml-2 block text-sm text-gray-700\">\n                      Invite-only access (requires invitation code)\n                    </label>\n                  </div>\n                </div>\n\n                {/* Password Field */}\n                {formData.settings.requirePassword && (\n                  <div>\n                    <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Gallery Password *\n                    </label>\n                    <input\n                      type=\"password\"\n                      id=\"password\"\n                      name=\"settings.password\"\n                      value={formData.settings.password}\n                      onChange={handleInputChange}\n                      className={`w-full max-w-md px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${\n                        errors['settings.password'] ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter gallery password\"\n                    />\n                    {errors['settings.password'] && (\n                      <p className=\"mt-1 text-sm text-red-600\">{errors['settings.password']}</p>\n                    )}\n                  </div>\n                )}\n\n                {/* Watermark Intensity */}\n                <div>\n                  <label htmlFor=\"watermarkIntensity\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Watermark Intensity: {Math.round(formData.settings.watermarkIntensity * 100)}%\n                  </label>\n                  <input\n                    type=\"range\"\n                    id=\"watermarkIntensity\"\n                    name=\"settings.watermarkIntensity\"\n                    min=\"0\"\n                    max=\"1\"\n                    step=\"0.1\"\n                    value={formData.settings.watermarkIntensity}\n                    onChange={handleInputChange}\n                    className=\"w-full max-w-md\"\n                  />\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    Controls the opacity of watermarks on preview images\n                  </p>\n                </div>\n\n                {/* Danger Zone */}\n                <div className=\"border-t border-gray-200 pt-6 mt-6\">\n                  <h3 className=\"text-lg font-semibold text-red-700 mb-4\">Danger Zone</h3>\n                  <div className=\"space-y-4\">\n                    <button\n                      onClick={() => {\n                        if (window.confirm('Are you sure you want to delete this gallery? This action cannot be undone.')) {\n                          // Handle delete\n                        }\n                      }}\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n                    >\n                      Delete Gallery\n                    </button>\n                    <p className=\"text-sm text-gray-600\">\n                      Once deleted, the gallery and all its photos cannot be recovered.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </motion.div>\n      </main>\n\n      {/* Photo Metadata Editing Modal */}\n      {editingPhoto && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-2xl font-semibold text-gray-900\">Edit Photo Metadata</h2>\n                <button\n                  onClick={() => setEditingPhoto(null)}\n                  className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n                >\n                  <XMarkIcon className=\"w-6 h-6 text-gray-500\" />\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                {/* Photo Preview */}\n                <div>\n                  <img\n                    src={editingPhoto.previewUrl || `/uploads/photos/${editingPhoto.filename}`}\n                    alt={editingPhoto.title}\n                    className=\"w-full h-64 object-cover rounded-lg mb-4\"\n                  />\n                  <p className=\"text-sm text-gray-500\">Original: {editingPhoto.originalFilename}</p>\n                </div>\n\n                {/* Metadata Form */}\n                <div className=\"space-y-6\">\n                  {/* Basic Info */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Basic Information</h3>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Title</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.title}\n                          onChange={(e) => handleMetadataChange('title', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                        <textarea\n                          value={photoMetadata.description}\n                          onChange={(e) => handleMetadataChange('description', e.target.value)}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Artwork Information */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Artwork Information</h3>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Year</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo?.year || ''}\n                          onChange={(e) => handleMetadataChange('artworkInfo.year', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Series</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo?.series || ''}\n                          onChange={(e) => handleMetadataChange('artworkInfo.series', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Edition</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo?.edition || ''}\n                          onChange={(e) => handleMetadataChange('artworkInfo.edition', e.target.value)}\n                          placeholder=\"e.g., 1/50\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Size</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo?.size || ''}\n                          onChange={(e) => handleMetadataChange('artworkInfo.size', e.target.value)}\n                          placeholder=\"e.g., 24x36 inches\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Medium</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artwork?.medium || ''}\n                          onChange={(e) => handleMetadataChange('artwork.medium', e.target.value)}\n                          placeholder=\"e.g., Photography, Digital Print\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Condition</label>\n                        <select\n                          value={photoMetadata.artwork?.condition || 'Excellent'}\n                          onChange={(e) => handleMetadataChange('artwork.condition', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        >\n                          <option value=\"Excellent\">Excellent</option>\n                          <option value=\"Very Good\">Very Good</option>\n                          <option value=\"Good\">Good</option>\n                          <option value=\"Fair\">Fair</option>\n                          <option value=\"Poor\">Poor</option>\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Rarity</label>\n                        <select\n                          value={photoMetadata.artwork?.rarity || 'Common'}\n                          onChange={(e) => handleMetadataChange('artwork.rarity', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        >\n                          <option value=\"Unique\">Unique</option>\n                          <option value=\"Rare\">Rare</option>\n                          <option value=\"Scarce\">Scarce</option>\n                          <option value=\"Common\">Common</option>\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Signature</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artwork?.signature || ''}\n                          onChange={(e) => handleMetadataChange('artwork.signature', e.target.value)}\n                          placeholder=\"e.g., Signed lower right\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div className=\"col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Materials</label>\n                        <input\n                          type=\"text\"\n                          value={photoMetadata.artworkInfo?.materials || ''}\n                          onChange={(e) => handleMetadataChange('artworkInfo.materials', e.target.value)}\n                          placeholder=\"e.g., Archival pigment print on cotton paper\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                      <div className=\"col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Provenance</label>\n                        <textarea\n                          value={photoMetadata.artwork?.provenance || ''}\n                          onChange={(e) => handleMetadataChange('artwork.provenance', e.target.value)}\n                          placeholder=\"History of ownership and exhibition\"\n                          rows={3}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Artist Information */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Artist Information</h3>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Biography</label>\n                        <textarea\n                          value={photoMetadata.artist?.biography || ''}\n                          onChange={(e) => handleMetadataChange('artist.biography', e.target.value)}\n                          placeholder=\"Artist's background and career highlights\"\n                          rows={4}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        />\n                      </div>\n\n                    </div>\n                  </div>\n\n\n\n                  {/* Tags */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Tags</h3>\n                    <div className=\"space-y-2\">\n                      {(photoMetadata.tags || []).map((tag, index) => (\n                        <div key={index} className=\"flex gap-2\">\n                          <input\n                            type=\"text\"\n                            value={tag}\n                            onChange={(e) => {\n                              const newTags = [...(photoMetadata.tags || [])];\n                              newTags[index] = e.target.value;\n                              handleMetadataChange('tags', newTags);\n                            }}\n                            placeholder=\"Tag\"\n                            className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                          />\n                          <button\n                            type=\"button\"\n                            onClick={() => {\n                              const newTags = (photoMetadata.tags || []).filter((_, i) => i !== index);\n                              handleMetadataChange('tags', newTags);\n                            }}\n                            className=\"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                          >\n                            Remove\n                          </button>\n                        </div>\n                      ))}\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          const newTags = [...(photoMetadata.tags || []), ''];\n                          handleMetadataChange('tags', newTags);\n                        }}\n                        className=\"px-4 py-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors\"\n                      >\n                        Add Tag\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* Purchase Information */}\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Purchase Information</h3>\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"flex-1\">\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Price</label>\n                          <input\n                            type=\"text\"\n                            value={photoMetadata.purchaseInfo.price}\n                            onChange={(e) => handleMetadataChange('purchaseInfo.price', e.target.value)}\n                            placeholder=\"$2,500\"\n                            disabled={photoMetadata.purchaseInfo.priceOnRequest}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100\"\n                          />\n                        </div>\n                        <div className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            id=\"priceOnRequest\"\n                            checked={photoMetadata.purchaseInfo.priceOnRequest}\n                            onChange={(e) => handleMetadataChange('purchaseInfo.priceOnRequest', e.target.checked)}\n                            className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                          />\n                          <label htmlFor=\"priceOnRequest\" className=\"ml-2 text-sm text-gray-700\">\n                            Price on Request\n                          </label>\n                        </div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Availability</label>\n                        <select\n                          value={photoMetadata.purchaseInfo.availability}\n                          onChange={(e) => handleMetadataChange('purchaseInfo.availability', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                        >\n                          <option value=\"available\">Available</option>\n                          <option value=\"sold\">Sold</option>\n                          <option value=\"reserved\">Reserved</option>\n                          <option value=\"not-for-sale\">Not for Sale</option>\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"flex justify-end space-x-4 mt-8 pt-6 border-t\">\n                <button\n                  onClick={() => setEditingPhoto(null)}\n                  className=\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSavePhotoMetadata}\n                  className=\"px-4 py-2 bg-primary-600 text-white hover:bg-primary-700 rounded-lg transition-colors\"\n                >\n                  Save Changes\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GalleryPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}